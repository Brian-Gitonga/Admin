[2025-04-05 11:19:56] ======= NEW PAYMENT PROCESS STARTED =======
[2025-04-05 11:19:56] POST data: Array
(
    [reseller_id] => 6
    [package_name] => Game Connect
    [package_price] => 30.00
    [package_id] => 12
    [mpesa_number] => 254114669532
)

[2025-04-05 11:19:56] Form data received: {"resellerId":6,"packageName":"Game Connect","packagePrice":"30.00","mpesaNumber":"254114669532","packageId":12}
[2025-04-05 11:19:56] Formatted phone number: 254114669532
[2025-04-05 11:19:56] Validated amount: 30
[2025-04-05 11:19:56] Generating access token...
[2025-04-05 11:19:57] Access token response: {
            "access_token": "NnNfsINEwPhAasACbIYfR0iwZXbA",
            "expires_in": "3599"
        }
        
[2025-04-05 11:19:57] Access token generated successfully: NnNfsINEwP...
[2025-04-05 12:19:57] Callback URL: http://localhost/Admin/mpesa_callback.php
[2025-04-05 12:19:57] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUwNDA1MTIxOTU3",
    "Timestamp": "20250405121957",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 30,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "http:\/\/localhost\/Admin\/mpesa_callback.php",
    "AccountReference": "WiFi-1743844797",
    "TransactionDesc": "Payment for Game Connect"
}
[2025-04-05 12:19:57] Sending STK Push request
[2025-04-05 12:19:57] STK Push response: {
                    "requestId":"b54f-471d-93d9-f7f3bf3f7c0e3919904",
                    "errorCode": "400.002.02",
                    "errorMessage": "Bad Request - Invalid CallBackURL"
                }
            
[2025-04-05 12:19:57] HTTP status code: 400
[2025-04-05 12:19:57] Request took 0.444305 seconds
[2025-04-05 12:19:57] Response data: stdClass Object
(
    [requestId] => b54f-471d-93d9-f7f3bf3f7c0e3919904
    [errorCode] => 400.002.02
    [errorMessage] => Bad Request - Invalid CallBackURL
)

[2025-04-05 12:19:57] STK Push failed: Bad Request - Invalid CallBackURL
[2025-04-05 11:20:05] ======= NEW PAYMENT PROCESS STARTED =======
[2025-04-05 11:20:05] POST data: Array
(
    [reseller_id] => 6
    [package_name] => Game Connect
    [package_price] => 30.00
    [package_id] => 12
    [mpesa_number] => 254114669532
)

[2025-04-05 11:20:05] Form data received: {"resellerId":6,"packageName":"Game Connect","packagePrice":"30.00","mpesaNumber":"254114669532","packageId":12}
[2025-04-05 11:20:05] Formatted phone number: 254114669532
[2025-04-05 11:20:05] Validated amount: 30
[2025-04-05 11:20:05] Generating access token...
[2025-04-05 11:20:06] Access token response: {
            "access_token": "KraxLRBU5herftPMwMKJejWKyLSC",
            "expires_in": "3599"
        }
        
[2025-04-05 11:20:06] Access token generated successfully: KraxLRBU5h...
[2025-04-05 12:20:06] Callback URL: http://localhost/Admin/mpesa_callback.php
[2025-04-05 12:20:06] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUwNDA1MTIyMDA2",
    "Timestamp": "20250405122006",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 30,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "http:\/\/localhost\/Admin\/mpesa_callback.php",
    "AccountReference": "WiFi-1743844806",
    "TransactionDesc": "Payment for Game Connect"
}
[2025-04-05 12:20:06] Sending STK Push request
[2025-04-05 12:20:07] STK Push response: {
                    "requestId":"b54f-471d-93d9-f7f3bf3f7c0e3919920",
                    "errorCode": "500.003.02",
                    "errorMessage": "System is busy. Please try again in few minutes."
                }
            
[2025-04-05 12:20:07] HTTP status code: 500
[2025-04-05 12:20:07] Request took 0.550168 seconds
[2025-04-05 12:20:07] Response data: stdClass Object
(
    [requestId] => b54f-471d-93d9-f7f3bf3f7c0e3919920
    [errorCode] => 500.003.02
    [errorMessage] => System is busy. Please try again in few minutes.
)

[2025-04-05 12:20:07] STK Push failed: System is busy. Please try again in few minutes.
[2025-04-05 11:21:21] ======= NEW PAYMENT PROCESS STARTED =======
[2025-04-05 11:21:21] POST data: Array
(
    [reseller_id] => 6
    [package_name] => 1Hr Konnect
    [package_price] => 10.00
    [package_id] => 14
    [mpesa_number] => 254114669532
)

[2025-04-05 11:21:21] Form data received: {"resellerId":6,"packageName":"1Hr Konnect","packagePrice":"10.00","mpesaNumber":"254114669532","packageId":14}
[2025-04-05 11:21:21] Formatted phone number: 254114669532
[2025-04-05 11:21:21] Validated amount: 10
[2025-04-05 11:21:21] Generating access token...
[2025-04-05 11:21:21] Access token response: {
            "access_token": "W9iQ3vhaGbAg5z0zzcZBxy0AqRV0",
            "expires_in": "3599"
        }
        
[2025-04-05 11:21:21] Access token generated successfully: W9iQ3vhaGb...
[2025-04-05 12:21:21] Callback URL: http://localhost/Admin/mpesa_callback.php
[2025-04-05 12:21:21] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUwNDA1MTIyMTIx",
    "Timestamp": "20250405122121",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 10,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "http:\/\/localhost\/Admin\/mpesa_callback.php",
    "AccountReference": "WiFi-1743844881",
    "TransactionDesc": "Payment for 1Hr Konnect"
}
[2025-04-05 12:21:21] Sending STK Push request
[2025-04-05 12:21:22] STK Push response: {
                    "requestId":"8131-4f68-ab7a-5e68879d780e346667",
                    "errorCode": "400.002.02",
                    "errorMessage": "Bad Request - Invalid CallBackURL"
                }
            
[2025-04-05 12:21:22] HTTP status code: 400
[2025-04-05 12:21:22] Request took 1.010504 seconds
[2025-04-05 12:21:22] Response data: stdClass Object
(
    [requestId] => 8131-4f68-ab7a-5e68879d780e346667
    [errorCode] => 400.002.02
    [errorMessage] => Bad Request - Invalid CallBackURL
)

[2025-04-05 12:21:22] STK Push failed: Bad Request - Invalid CallBackURL
[2025-04-05 11:30:29] ======= NEW PAYMENT PROCESS STARTED =======
[2025-04-05 11:30:29] POST data: Array
(
    [reseller_id] => 6
    [package_name] => Game Connect
    [package_price] => 30.00
    [package_id] => 12
    [mpesa_number] => 254114669532
)

[2025-04-05 11:30:29] Form data received: {"resellerId":6,"packageName":"Game Connect","packagePrice":"30.00","mpesaNumber":"254114669532","packageId":12}
[2025-04-05 11:30:29] Formatted phone number: 254114669532
[2025-04-05 11:30:29] Validated amount: 30
[2025-04-05 11:30:29] Generating access token...
[2025-04-05 11:30:30] Access token response: {
            "access_token": "DdqhlJn9qmPOiakHt55l3tt18P1z",
            "expires_in": "3599"
        }
        
[2025-04-05 11:30:30] Access token generated successfully: DdqhlJn9qm...
[2025-04-05 12:30:30] Using placeholder callback URL: https://mydomain.com/path
[2025-04-05 12:30:30] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUwNDA1MTIzMDMw",
    "Timestamp": "20250405123030",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 30,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/mydomain.com\/path",
    "AccountReference": "WiFi-1743845430",
    "TransactionDesc": "Payment for Game Connect"
}
[2025-04-05 12:30:30] Sending STK Push request
[2025-04-05 12:30:31] STK Push response: {
            "MerchantRequestID":"c20c-4eb8-8161-40af4f84ee39148692",
            "CheckoutRequestID":"ws_CO_05042025123030394114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-04-05 12:30:31] HTTP status code: 200
[2025-04-05 12:30:31] Request took 0.95108 seconds
[2025-04-05 12:30:31] Response data: stdClass Object
(
    [MerchantRequestID] => c20c-4eb8-8161-40af4f84ee39148692
    [CheckoutRequestID] => ws_CO_05042025123030394114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-04-05 12:30:31] STK Push successful! CheckoutRequestID: ws_CO_05042025123030394114669532
[2025-04-05 12:30:31] MerchantRequestID: c20c-4eb8-8161-40af4f84ee39148692
[2025-04-05 12:30:31] Failed to prepare transaction statement: Table 'billing_system.mpesa_transactions' doesn't exist
[2025-04-05 12:30:31] Sending successful response to client
[2025-04-05 11:31:20] ======= NEW PAYMENT PROCESS STARTED =======
[2025-04-05 11:31:20] POST data: Array
(
    [reseller_id] => 6
    [package_name] => Basic Montly plan
    [package_price] => 1200.00
    [package_id] => 13
    [mpesa_number] => 254114669532
)

[2025-04-05 11:31:20] Form data received: {"resellerId":6,"packageName":"Basic Montly plan","packagePrice":"1200.00","mpesaNumber":"254114669532","packageId":13}
[2025-04-05 11:31:20] Formatted phone number: 254114669532
[2025-04-05 11:31:20] Validated amount: 1200
[2025-04-05 11:31:20] Generating access token...
[2025-04-05 11:31:20] Access token response: {
            "access_token": "XQMVABMSAezlv0HMUoxxSQ2GyDBE",
            "expires_in": "3599"
        }
        
[2025-04-05 11:31:20] Access token generated successfully: XQMVABMSAe...
[2025-04-05 12:31:20] Using placeholder callback URL: https://mydomain.com/path
[2025-04-05 12:31:20] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUwNDA1MTIzMTIw",
    "Timestamp": "20250405123120",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 1200,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/mydomain.com\/path",
    "AccountReference": "WiFi-1743845480",
    "TransactionDesc": "Payment for Basic Montly plan"
}
[2025-04-05 12:31:20] Sending STK Push request
[2025-04-05 12:31:21] STK Push response: {
            "MerchantRequestID":"9bdb-4b0d-afb4-9ed1534e873782971",
            "CheckoutRequestID":"ws_CO_05042025123259476114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-04-05 12:31:21] HTTP status code: 200
[2025-04-05 12:31:21] Request took 0.648903 seconds
[2025-04-05 12:31:21] Response data: stdClass Object
(
    [MerchantRequestID] => 9bdb-4b0d-afb4-9ed1534e873782971
    [CheckoutRequestID] => ws_CO_05042025123259476114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-04-05 12:31:21] STK Push successful! CheckoutRequestID: ws_CO_05042025123259476114669532
[2025-04-05 12:31:21] MerchantRequestID: 9bdb-4b0d-afb4-9ed1534e873782971
[2025-04-05 12:31:21] Failed to prepare transaction statement: Table 'billing_system.mpesa_transactions' doesn't exist
[2025-04-05 12:31:21] Sending successful response to client
[2025-04-05 11:31:54] ======= NEW PAYMENT PROCESS STARTED =======
[2025-04-05 11:31:54] POST data: Array
(
    [reseller_id] => 6
    [package_name] => Basic Montly plan
    [package_price] => 1200.00
    [package_id] => 13
    [mpesa_number] => 254114669532
)

[2025-04-05 11:31:54] Form data received: {"resellerId":6,"packageName":"Basic Montly plan","packagePrice":"1200.00","mpesaNumber":"254114669532","packageId":13}
[2025-04-05 11:31:54] Formatted phone number: 254114669532
[2025-04-05 11:31:54] Validated amount: 1200
[2025-04-05 11:31:54] Generating access token...
[2025-04-05 11:31:54] Access token response: {
            "access_token": "Tbiu9EGpCzAxAGai1bEKIvPsi7BO",
            "expires_in": "3599"
        }
        
[2025-04-05 11:31:54] Access token generated successfully: Tbiu9EGpCz...
[2025-04-05 12:31:54] Using placeholder callback URL: https://mydomain.com/path
[2025-04-05 12:31:54] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUwNDA1MTIzMTU0",
    "Timestamp": "20250405123154",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 1200,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/mydomain.com\/path",
    "AccountReference": "WiFi-1743845514",
    "TransactionDesc": "Payment for Basic Montly plan"
}
[2025-04-05 12:31:54] Sending STK Push request
[2025-04-05 12:31:56] STK Push response: {
            "MerchantRequestID":"c20c-4eb8-8161-40af4f84ee39148732",
            "CheckoutRequestID":"ws_CO_05042025123333938114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-04-05 12:31:56] HTTP status code: 200
[2025-04-05 12:31:56] Request took 1.255991 seconds
[2025-04-05 12:31:56] Response data: stdClass Object
(
    [MerchantRequestID] => c20c-4eb8-8161-40af4f84ee39148732
    [CheckoutRequestID] => ws_CO_05042025123333938114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-04-05 12:31:56] STK Push successful! CheckoutRequestID: ws_CO_05042025123333938114669532
[2025-04-05 12:31:56] MerchantRequestID: c20c-4eb8-8161-40af4f84ee39148732
[2025-04-05 12:31:56] Failed to prepare transaction statement: Table 'billing_system.mpesa_transactions' doesn't exist
[2025-04-05 12:31:56] Sending successful response to client
[2025-04-05 11:34:02] ======= NEW PAYMENT PROCESS STARTED =======
[2025-04-05 11:34:02] POST data: Array
(
    [reseller_id] => 6
    [package_name] => 1Hr Konnect
    [package_price] => 1.00
    [package_id] => 15
    [mpesa_number] => 254114669532
)

[2025-04-05 11:34:02] Form data received: {"resellerId":6,"packageName":"1Hr Konnect","packagePrice":"1.00","mpesaNumber":"254114669532","packageId":15}
[2025-04-05 11:34:02] Formatted phone number: 254114669532
[2025-04-05 11:34:02] WARNING: Amount less than 10 KES. Setting to minimum 10 KES for sandbox testing.
[2025-04-05 11:34:02] Validated amount: 10
[2025-04-05 11:34:02] Generating access token...
[2025-04-05 11:34:03] Access token response: {
            "access_token": "YZRbdFxunOu2UIbXvHxKwdC8Xorn",
            "expires_in": "3599"
        }
        
[2025-04-05 11:34:03] Access token generated successfully: YZRbdFxunO...
[2025-04-05 12:34:03] Using placeholder callback URL: https://mydomain.com/path
[2025-04-05 12:34:03] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUwNDA1MTIzNDAz",
    "Timestamp": "20250405123403",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 10,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/mydomain.com\/path",
    "AccountReference": "WiFi-1743845643",
    "TransactionDesc": "Payment for 1Hr Konnect"
}
[2025-04-05 12:34:03] Sending STK Push request
[2025-04-05 12:34:04] STK Push response: {
            "MerchantRequestID":"aa10-4361-b7cd-2aa0e34ed7e4175319",
            "CheckoutRequestID":"ws_CO_05042025123542618114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-04-05 12:34:04] HTTP status code: 200
[2025-04-05 12:34:04] Request took 0.735514 seconds
[2025-04-05 12:34:04] Response data: stdClass Object
(
    [MerchantRequestID] => aa10-4361-b7cd-2aa0e34ed7e4175319
    [CheckoutRequestID] => ws_CO_05042025123542618114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-04-05 12:34:04] STK Push successful! CheckoutRequestID: ws_CO_05042025123542618114669532
[2025-04-05 12:34:04] MerchantRequestID: aa10-4361-b7cd-2aa0e34ed7e4175319
[2025-04-05 12:34:04] Failed to prepare transaction statement: Table 'billing_system.mpesa_transactions' doesn't exist
[2025-04-05 12:34:04] Sending successful response to client
[2025-04-05 12:32:36] ======= NEW PAYMENT PROCESS STARTED =======
[2025-04-05 12:32:36] POST data: Array
(
    [reseller_id] => 6
    [package_name] => 1Hr Konnect
    [package_price] => 1.00
    [package_id] => 15
    [mpesa_number] => 254114669532
)

[2025-04-05 12:32:36] Form data received: {"resellerId":6,"packageName":"1Hr Konnect","packagePrice":"1.00","mpesaNumber":"254114669532","packageId":15}
[2025-04-05 12:32:36] Formatted phone number: 254114669532
[2025-04-05 12:32:36] WARNING: Amount less than 10 KES. Setting to minimum 10 KES for sandbox testing.
[2025-04-05 12:32:36] Validated amount: 10
[2025-04-05 12:32:36] Generating access token...
[2025-04-05 12:32:37] Access token response: {
            "access_token": "JLMGu1TuJDwWihGfQHjEKduLwZUu",
            "expires_in": "3599"
        }
        
[2025-04-05 12:32:37] Access token generated successfully: JLMGu1TuJD...
[2025-04-05 13:32:37] Using placeholder callback URL: https://mydomain.com/path
[2025-04-05 13:32:37] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUwNDA1MTMzMjM3",
    "Timestamp": "20250405133237",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 10,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/mydomain.com\/path",
    "AccountReference": "WiFi-1743849157",
    "TransactionDesc": "Payment for 1Hr Konnect"
}
[2025-04-05 13:32:37] Sending STK Push request
[2025-04-05 13:32:37] STK Push response: {
            "MerchantRequestID":"b54f-471d-93d9-f7f3bf3f7c0e3921202",
            "CheckoutRequestID":"ws_CO_05042025133236831114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-04-05 13:32:37] HTTP status code: 200
[2025-04-05 13:32:37] Request took 0.857941 seconds
[2025-04-05 13:32:37] Response data: stdClass Object
(
    [MerchantRequestID] => b54f-471d-93d9-f7f3bf3f7c0e3921202
    [CheckoutRequestID] => ws_CO_05042025133236831114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-04-05 13:32:37] STK Push successful! CheckoutRequestID: ws_CO_05042025133236831114669532
[2025-04-05 13:32:37] MerchantRequestID: b54f-471d-93d9-f7f3bf3f7c0e3921202
[2025-04-05 13:32:37] Failed to prepare transaction statement: Table 'billing_system.mpesa_transactions' doesn't exist
[2025-04-05 13:32:37] Sending successful response to client
[2025-04-05 15:47:11] ======= NEW PAYMENT PROCESS STARTED =======
[2025-04-05 15:47:11] POST data: Array
(
    [reseller_id] => 6
    [package_name] => Basic Montly plan
    [package_price] => 1200.00
    [package_id] => 13
    [mpesa_number] => 254114669532
)

[2025-04-05 15:47:11] Form data received: {"resellerId":6,"packageName":"Basic Montly plan","packagePrice":"1200.00","mpesaNumber":"254114669532","packageId":13}
[2025-04-05 15:47:11] Formatted phone number: 254114669532
[2025-04-05 15:47:11] Validated amount: 1200
[2025-04-05 15:47:11] Generating access token...
[2025-04-05 15:47:12] Access token response: {
            "access_token": "KvlNOrz47OQA6Su0nltvB4DodIO0",
            "expires_in": "3599"
        }
        
[2025-04-05 15:47:12] Access token generated successfully: KvlNOrz47O...
[2025-04-05 16:47:12] Using placeholder callback URL: https://mydomain.com/path
[2025-04-05 16:47:12] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUwNDA1MTY0NzEy",
    "Timestamp": "20250405164712",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 1200,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/mydomain.com\/path",
    "AccountReference": "WiFi-1743860832",
    "TransactionDesc": "Payment for Basic Montly plan"
}
[2025-04-05 16:47:12] Sending STK Push request
[2025-04-05 16:47:13] STK Push response: {
            "MerchantRequestID":"bbcd-4a89-bd1a-6ecdc639893b3921352",
            "CheckoutRequestID":"ws_CO_05042025164711645114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-04-05 16:47:13] HTTP status code: 200
[2025-04-05 16:47:13] Request took 0.728952 seconds
[2025-04-05 16:47:13] Response data: stdClass Object
(
    [MerchantRequestID] => bbcd-4a89-bd1a-6ecdc639893b3921352
    [CheckoutRequestID] => ws_CO_05042025164711645114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-04-05 16:47:13] STK Push successful! CheckoutRequestID: ws_CO_05042025164711645114669532
[2025-04-05 16:47:13] MerchantRequestID: bbcd-4a89-bd1a-6ecdc639893b3921352
[2025-04-05 16:47:13] Failed to prepare transaction statement: Table 'billing_system.mpesa_transactions' doesn't exist
[2025-04-05 16:47:13] Sending successful response to client
[2025-04-05 15:47:52] ======= NEW PAYMENT PROCESS STARTED =======
[2025-04-05 15:47:52] POST data: Array
(
    [reseller_id] => 6
    [package_name] => Basic Montly plan
    [package_price] => 1200.00
    [package_id] => 13
    [mpesa_number] => 254114669532
)

[2025-04-05 15:47:52] Form data received: {"resellerId":6,"packageName":"Basic Montly plan","packagePrice":"1200.00","mpesaNumber":"254114669532","packageId":13}
[2025-04-05 15:47:52] Formatted phone number: 254114669532
[2025-04-05 15:47:52] Validated amount: 1200
[2025-04-05 15:47:52] Generating access token...
[2025-04-05 15:47:52] Access token response: {
            "access_token": "fSSOhyscFaiKy9xBoygGiYg451xL",
            "expires_in": "3599"
        }
        
[2025-04-05 15:47:52] Access token generated successfully: fSSOhyscFa...
[2025-04-05 16:47:52] Using placeholder callback URL: https://mydomain.com/path
[2025-04-05 16:47:52] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUwNDA1MTY0NzUy",
    "Timestamp": "20250405164752",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 1200,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/mydomain.com\/path",
    "AccountReference": "WiFi-1743860872",
    "TransactionDesc": "Payment for Basic Montly plan"
}
[2025-04-05 16:47:52] Sending STK Push request
[2025-04-05 16:47:59] STK Push response: {
            "MerchantRequestID":"b54f-471d-93d9-f7f3bf3f7c0e3924826",
            "CheckoutRequestID":"ws_CO_05042025164751959114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-04-05 16:47:59] HTTP status code: 200
[2025-04-05 16:47:59] Request took 6.997407 seconds
[2025-04-05 16:47:59] Response data: stdClass Object
(
    [MerchantRequestID] => b54f-471d-93d9-f7f3bf3f7c0e3924826
    [CheckoutRequestID] => ws_CO_05042025164751959114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-04-05 16:47:59] STK Push successful! CheckoutRequestID: ws_CO_05042025164751959114669532
[2025-04-05 16:47:59] MerchantRequestID: b54f-471d-93d9-f7f3bf3f7c0e3924826
[2025-04-05 16:47:59] Failed to prepare transaction statement: Table 'billing_system.mpesa_transactions' doesn't exist
[2025-04-05 16:47:59] Sending successful response to client
[2025-04-05 15:49:51] ======= NEW PAYMENT PROCESS STARTED =======
[2025-04-05 15:49:51] POST data: Array
(
    [reseller_id] => 6
    [package_name] => Konnect
    [package_price] => 200.00
    [package_id] => 10
    [mpesa_number] => 254114669532
)

[2025-04-05 15:49:51] Form data received: {"resellerId":6,"packageName":"Konnect","packagePrice":"200.00","mpesaNumber":"254114669532","packageId":10}
[2025-04-05 15:49:51] Formatted phone number: 254114669532
[2025-04-05 15:49:51] Validated amount: 200
[2025-04-05 15:49:51] Generating access token...
[2025-04-05 15:49:52] Access token response: {
            "access_token": "evd0ptGLs3jgX73friboPQjhrCCP",
            "expires_in": "3599"
        }
        
[2025-04-05 15:49:52] Access token generated successfully: evd0ptGLs3...
[2025-04-05 16:49:52] Using placeholder callback URL: https://mydomain.com/path
[2025-04-05 16:49:52] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUwNDA1MTY0OTUy",
    "Timestamp": "20250405164952",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 200,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/mydomain.com\/path",
    "AccountReference": "WiFi-1743860992",
    "TransactionDesc": "Payment for Konnect"
}
[2025-04-05 16:49:52] Sending STK Push request
[2025-04-05 16:49:53] STK Push response: {
            "MerchantRequestID":"bbcd-4a89-bd1a-6ecdc639893b3921383",
            "CheckoutRequestID":"ws_CO_05042025165131289114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-04-05 16:49:53] HTTP status code: 200
[2025-04-05 16:49:53] Request took 1.681487 seconds
[2025-04-05 16:49:53] Response data: stdClass Object
(
    [MerchantRequestID] => bbcd-4a89-bd1a-6ecdc639893b3921383
    [CheckoutRequestID] => ws_CO_05042025165131289114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-04-05 16:49:53] STK Push successful! CheckoutRequestID: ws_CO_05042025165131289114669532
[2025-04-05 16:49:53] MerchantRequestID: bbcd-4a89-bd1a-6ecdc639893b3921383
[2025-04-05 16:49:53] Failed to prepare transaction statement: Table 'billing_system.mpesa_transactions' doesn't exist
[2025-04-05 16:49:53] Sending successful response to client
[2025-04-07 12:40:10] ======= NEW PAYMENT PROCESS STARTED =======
[2025-04-07 12:40:10] POST data: Array
(
    [reseller_id] => 6
    [package_name] => Game Connect
    [package_price] => 30.00
    [package_id] => 12
    [mpesa_number] => 254114669532
)

[2025-04-07 12:40:10] Form data received: {"resellerId":6,"packageName":"Game Connect","packagePrice":"30.00","mpesaNumber":"254114669532","packageId":12}
[2025-04-07 12:40:10] Formatted phone number: 254114669532
[2025-04-07 12:40:10] Validated amount: 30
[2025-04-07 12:40:10] Generating access token...
[2025-04-07 12:40:10] Access token response: {
            "access_token": "JS73GqjN7riHRHqij4E43USQcEmY",
            "expires_in": "3599"
        }
        
[2025-04-07 12:40:10] Access token generated successfully: JS73GqjN7r...
[2025-04-07 13:40:10] Using callback URL: https://mydomain.com/mpesa_callback.php
[2025-04-07 13:40:10] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUwNDA3MTM0MDEw",
    "Timestamp": "20250407134010",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 30,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/mydomain.com\/mpesa_callback.php",
    "AccountReference": "WiFi-1744022410",
    "TransactionDesc": "Payment for Game Connect"
}
[2025-04-07 13:40:10] Sending STK Push request
[2025-04-07 13:40:11] STK Push response: {
            "MerchantRequestID":"9bdb-4b0d-afb4-9ed1534e8737145400",
            "CheckoutRequestID":"ws_CO_07042025134150383114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-04-07 13:40:11] HTTP status code: 200
[2025-04-07 13:40:11] Request took 0.812565 seconds
[2025-04-07 13:40:11] Response data: stdClass Object
(
    [MerchantRequestID] => 9bdb-4b0d-afb4-9ed1534e8737145400
    [CheckoutRequestID] => ws_CO_07042025134150383114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-04-07 13:40:11] STK Push successful! CheckoutRequestID: ws_CO_07042025134150383114669532
[2025-04-07 13:40:11] MerchantRequestID: 9bdb-4b0d-afb4-9ed1534e8737145400
[2025-04-07 13:40:11] Failed to prepare transaction statement: Table 'billing_system.mpesa_transactions' doesn't exist
[2025-04-07 13:40:11] Sending successful response to client
[2025-04-07 15:55:39] ======= NEW PAYMENT PROCESS STARTED =======
[2025-04-07 15:55:39] POST data: Array
(
    [reseller_id] => 6
    [package_name] => Game Connect
    [package_price] => 120.00
    [package_id] => 16
    [mpesa_number] => 254114669532
)

[2025-04-07 15:55:39] Form data received: {"resellerId":6,"packageName":"Game Connect","packagePrice":"120.00","mpesaNumber":"254114669532","packageId":16}
[2025-04-07 15:55:39] Formatted phone number: 254114669532
[2025-04-07 15:55:39] Validated amount: 120
[2025-04-07 15:55:39] Generating access token...
[2025-04-07 15:55:40] Access token response: {
            "access_token": "kKDNllSVMD1i7pSEFTRsa9wHNOAc",
            "expires_in": "3599"
        }
        
[2025-04-07 15:55:40] Access token generated successfully: kKDNllSVMD...
[2025-04-07 16:55:40] Using callback URL: https://mydomain.com/mpesa_callback.php
[2025-04-07 16:55:40] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUwNDA3MTY1NTQw",
    "Timestamp": "20250407165540",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 120,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/mydomain.com\/mpesa_callback.php",
    "AccountReference": "WiFi-1744034140",
    "TransactionDesc": "Payment for Game Connect"
}
[2025-04-07 16:55:40] Sending STK Push request
[2025-04-07 16:55:41] STK Push response: {
            "MerchantRequestID":"aa10-4361-b7cd-2aa0e34ed7e4241907",
            "CheckoutRequestID":"ws_CO_07042025165540158114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-04-07 16:55:41] HTTP status code: 200
[2025-04-07 16:55:41] Request took 0.676636 seconds
[2025-04-07 16:55:41] Response data: stdClass Object
(
    [MerchantRequestID] => aa10-4361-b7cd-2aa0e34ed7e4241907
    [CheckoutRequestID] => ws_CO_07042025165540158114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-04-07 16:55:41] STK Push successful! CheckoutRequestID: ws_CO_07042025165540158114669532
[2025-04-07 16:55:41] MerchantRequestID: aa10-4361-b7cd-2aa0e34ed7e4241907
[2025-04-07 16:55:41] Failed to prepare transaction statement: Table 'billing_system.mpesa_transactions' doesn't exist
[2025-04-07 16:55:41] Sending successful response to client
[2025-04-07 16:02:00] ======= NEW PAYMENT PROCESS STARTED =======
[2025-04-07 16:02:00] POST data: Array
(
    [reseller_id] => 6
    [package_name] => Basic Montly plan
    [package_price] => 1200.00
    [package_id] => 13
    [mpesa_number] => 254114669532
)

[2025-04-07 16:02:00] Form data received: {"resellerId":6,"packageName":"Basic Montly plan","packagePrice":"1200.00","mpesaNumber":"254114669532","packageId":13}
[2025-04-07 16:02:00] Formatted phone number: 254114669532
[2025-04-07 16:02:00] Validated amount: 1200
[2025-04-07 16:02:00] Generating access token...
[2025-04-07 16:02:01] Access token response: {
            "access_token": "4s5Sjrkhbj2ikZyG7wXlgGAgyIbX",
            "expires_in": "3599"
        }
        
[2025-04-07 16:02:01] Access token generated successfully: 4s5Sjrkhbj...
[2025-04-07 17:02:01] Using callback URL: https://mydomain.com/mpesa_callback.php
[2025-04-07 17:02:01] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUwNDA3MTcwMjAx",
    "Timestamp": "20250407170201",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 1200,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/mydomain.com\/mpesa_callback.php",
    "AccountReference": "WiFi-1744034521",
    "TransactionDesc": "Payment for Basic Montly plan"
}
[2025-04-07 17:02:01] Sending STK Push request
[2025-04-07 17:02:02] STK Push response: {
            "MerchantRequestID":"b54f-471d-93d9-f7f3bf3f7c0e3969632",
            "CheckoutRequestID":"ws_CO_07042025170200490114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-04-07 17:02:02] HTTP status code: 200
[2025-04-07 17:02:02] Request took 0.77598 seconds
[2025-04-07 17:02:02] Response data: stdClass Object
(
    [MerchantRequestID] => b54f-471d-93d9-f7f3bf3f7c0e3969632
    [CheckoutRequestID] => ws_CO_07042025170200490114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-04-07 17:02:02] STK Push successful! CheckoutRequestID: ws_CO_07042025170200490114669532
[2025-04-07 17:02:02] MerchantRequestID: b54f-471d-93d9-f7f3bf3f7c0e3969632
[2025-04-07 17:02:02] Failed to prepare transaction statement: Table 'billing_system.mpesa_transactions' doesn't exist
[2025-04-07 17:02:02] Sending successful response to client
[2025-04-09 08:49:40] ======= NEW PAYMENT PROCESS STARTED =======
[2025-04-09 08:49:40] POST data: Array
(
    [reseller_id] => 6
    [package_name] => 1Hr Konnect
    [package_price] => 1.00
    [package_id] => 15
    [mpesa_number] => 254114669532
)

[2025-04-09 08:49:40] Form data received: {"resellerId":6,"packageName":"1Hr Konnect","packagePrice":"1.00","mpesaNumber":"254114669532","packageId":15}
[2025-04-09 08:49:40] Formatted phone number: 254114669532
[2025-04-09 08:49:40] WARNING: Amount less than 10 KES. Setting to minimum 10 KES for sandbox testing.
[2025-04-09 08:49:40] Validated amount: 10
[2025-04-09 08:49:40] Generating access token...
[2025-04-09 08:49:41] Access token response: {
            "access_token": "8w3CoM3hzAnQfgUqWbrrMmTP27ai",
            "expires_in": "3599"
        }
        
[2025-04-09 08:49:41] Access token generated successfully: 8w3CoM3hzA...
[2025-04-09 09:49:41] Using callback URL: https://mydomain.com/mpesa_callback.php
[2025-04-09 09:49:41] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUwNDA5MDk0OTQx",
    "Timestamp": "20250409094941",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 10,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/mydomain.com\/mpesa_callback.php",
    "AccountReference": "WiFi-1744181381",
    "TransactionDesc": "Payment for 1Hr Konnect"
}
[2025-04-09 09:49:41] Sending STK Push request
[2025-04-09 09:49:42] STK Push response: {
            "MerchantRequestID":"c20c-4eb8-8161-40af4f84ee39263974",
            "CheckoutRequestID":"ws_CO_09042025094942156114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-04-09 09:49:42] HTTP status code: 200
[2025-04-09 09:49:42] Request took 1.268409 seconds
[2025-04-09 09:49:42] Response data: stdClass Object
(
    [MerchantRequestID] => c20c-4eb8-8161-40af4f84ee39263974
    [CheckoutRequestID] => ws_CO_09042025094942156114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-04-09 09:49:42] STK Push successful! CheckoutRequestID: ws_CO_09042025094942156114669532
[2025-04-09 09:49:42] MerchantRequestID: c20c-4eb8-8161-40af4f84ee39263974
[2025-04-09 09:49:42] Failed to prepare transaction statement: Table 'billing_system.mpesa_transactions' doesn't exist
[2025-04-09 09:49:42] Sending successful response to client
[2025-04-09 08:55:51] ======= NEW PAYMENT PROCESS STARTED =======
[2025-04-09 08:55:51] POST data: Array
(
    [reseller_id] => 6
    [package_name] => 1Hr Konnect
    [package_price] => 1.00
    [package_id] => 15
    [mpesa_number] => 254114669532
)

[2025-04-09 08:55:51] Form data received: {"resellerId":6,"packageName":"1Hr Konnect","packagePrice":"1.00","mpesaNumber":"254114669532","packageId":15}
[2025-04-09 08:55:51] Formatted phone number: 254114669532
[2025-04-09 08:55:51] WARNING: Amount less than 10 KES. Setting to minimum 10 KES for sandbox testing.
[2025-04-09 08:55:51] Validated amount: 10
[2025-04-09 08:55:51] Generating access token...
[2025-04-09 08:55:51] Access token response: {
            "access_token": "5BTzLYaaFJsL2gXPdH2Wc9ibAyBG",
            "expires_in": "3599"
        }
        
[2025-04-09 08:55:51] Access token generated successfully: 5BTzLYaaFJ...
[2025-04-09 09:55:51] Using callback URL: https://mydomain.com/mpesa_callback.php
[2025-04-09 09:55:51] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUwNDA5MDk1NTUx",
    "Timestamp": "20250409095551",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 10,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/mydomain.com\/mpesa_callback.php",
    "AccountReference": "WiFi-1744181751",
    "TransactionDesc": "Payment for 1Hr Konnect"
}
[2025-04-09 09:55:51] Sending STK Push request
[2025-04-09 09:55:52] STK Push response: {
            "MerchantRequestID":"c20c-4eb8-8161-40af4f84ee39264111",
            "CheckoutRequestID":"ws_CO_09042025095732720114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-04-09 09:55:52] HTTP status code: 200
[2025-04-09 09:55:52] Request took 0.638986 seconds
[2025-04-09 09:55:52] Response data: stdClass Object
(
    [MerchantRequestID] => c20c-4eb8-8161-40af4f84ee39264111
    [CheckoutRequestID] => ws_CO_09042025095732720114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-04-09 09:55:52] STK Push successful! CheckoutRequestID: ws_CO_09042025095732720114669532
[2025-04-09 09:55:52] MerchantRequestID: c20c-4eb8-8161-40af4f84ee39264111
[2025-04-09 09:55:52] Transaction details saved to database with ID: 1
[2025-04-09 09:55:52] Sending successful response to client
[2025-04-09 09:20:38] ======= NEW PAYMENT PROCESS STARTED =======
[2025-04-09 09:20:38] POST data: Array
(
    [reseller_id] => 6
    [package_name] => 1Hr Konnect
    [package_price] => 1.00
    [package_id] => 15
    [mpesa_number] => 254114669532
)

[2025-04-09 09:20:38] Form data received: {"resellerId":6,"packageName":"1Hr Konnect","packagePrice":"1.00","mpesaNumber":"254114669532","packageId":15}
[2025-04-09 09:20:38] Formatted phone number: 254114669532
[2025-04-09 09:20:38] WARNING: Amount less than 10 KES. Setting to minimum 10 KES for sandbox testing.
[2025-04-09 09:20:38] Validated amount: 10
[2025-04-09 09:20:38] Generating access token...
[2025-04-09 09:20:38] Access token response: {
            "access_token": "5SydteXhdenjDVxjRFnSEVAMG5i4",
            "expires_in": "3599"
        }
        
[2025-04-09 09:20:38] Access token generated successfully: 5SydteXhde...
[2025-04-09 10:20:38] Using callback URL: https://mydomain.com/mpesa_callback.php
[2025-04-09 10:20:38] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUwNDA5MTAyMDM4",
    "Timestamp": "20250409102038",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 10,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/mydomain.com\/mpesa_callback.php",
    "AccountReference": "WiFi-1744183238",
    "TransactionDesc": "Payment for 1Hr Konnect"
}
[2025-04-09 10:20:38] Sending STK Push request
[2025-04-09 10:20:39] STK Push response: {
            "MerchantRequestID":"2203-464a-b6e1-0288223bfd3f7770",
            "CheckoutRequestID":"ws_CO_09042025102220189114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-04-09 10:20:39] HTTP status code: 200
[2025-04-09 10:20:39] Request took 1.019655 seconds
[2025-04-09 10:20:39] Response data: stdClass Object
(
    [MerchantRequestID] => 2203-464a-b6e1-0288223bfd3f7770
    [CheckoutRequestID] => ws_CO_09042025102220189114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-04-09 10:20:39] STK Push successful! CheckoutRequestID: ws_CO_09042025102220189114669532
[2025-04-09 10:20:39] MerchantRequestID: 2203-464a-b6e1-0288223bfd3f7770
[2025-04-09 10:20:39] Transaction details saved to database with ID: 2
[2025-04-09 10:20:39] Sending successful response to client
[2025-04-09 13:32:33] ======= NEW PAYMENT PROCESS STARTED =======
[2025-04-09 13:32:33] POST data: Array
(
    [reseller_id] => 6
    [package_name] => 1Hr Konnect
    [package_price] => 1.00
    [package_id] => 15
    [mpesa_number] => 254114669532
)

[2025-04-09 13:32:33] Form data received: {"resellerId":6,"packageName":"1Hr Konnect","packagePrice":"1.00","mpesaNumber":"254114669532","packageId":15}
[2025-04-09 13:32:33] Formatted phone number: 254114669532
[2025-04-09 13:32:33] WARNING: Amount less than 10 KES. Setting to minimum 10 KES for sandbox testing.
[2025-04-09 13:32:33] Validated amount: 10
[2025-04-09 13:32:33] Generating access token...
[2025-04-09 13:32:45] Access token response: 
[2025-04-09 13:32:45] Curl error: Could not resolve host: sandbox.safaricom.co.ke
[2025-04-09 13:33:20] ======= NEW PAYMENT PROCESS STARTED =======
[2025-04-09 13:33:20] POST data: Array
(
    [reseller_id] => 6
    [package_name] => 1Hr Konnect
    [package_price] => 1.00
    [package_id] => 15
    [mpesa_number] => 254114669532
)

[2025-04-09 13:33:20] Form data received: {"resellerId":6,"packageName":"1Hr Konnect","packagePrice":"1.00","mpesaNumber":"254114669532","packageId":15}
[2025-04-09 13:33:20] Formatted phone number: 254114669532
[2025-04-09 13:33:20] WARNING: Amount less than 10 KES. Setting to minimum 10 KES for sandbox testing.
[2025-04-09 13:33:20] Validated amount: 10
[2025-04-09 13:33:20] Generating access token...
[2025-04-09 13:33:20] Access token response: 
[2025-04-09 13:33:20] Curl error: Could not resolve host: sandbox.safaricom.co.ke
[2025-04-14 12:09:20] ======= NEW PAYMENT PROCESS STARTED =======
[2025-04-14 12:09:20] POST data: Array
(
    [reseller_id] => 15
    [package_name] => 2HR Qtro Konnect
    [package_price] => 10.00
    [package_id] => 18
    [mpesa_number] => 254114669532
)

[2025-04-14 12:09:20] Form data received: {"resellerId":15,"packageName":"2HR Qtro Konnect","packagePrice":"10.00","mpesaNumber":"254114669532","packageId":18}
[2025-04-14 12:09:20] Formatted phone number: 254114669532
[2025-04-14 12:09:20] Validated amount: 10
[2025-04-14 12:09:20] Generating access token...
[2025-04-14 12:09:21] Access token response: {
            "access_token": "psdMDGyhKXmh5WkQSrFooLUE3xIG",
            "expires_in": "3599"
        }
        
[2025-04-14 12:09:21] Access token generated successfully: psdMDGyhKX...
[2025-04-14 13:09:21] Using callback URL: https://mydomain.com/mpesa_callback.php
[2025-04-14 13:09:21] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUwNDE0MTMwOTIx",
    "Timestamp": "20250414130921",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 10,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/mydomain.com\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for 2HR Qtro Konnect"
}
[2025-04-14 13:09:21] Sending STK Push request
[2025-04-14 13:09:21] STK Push response: {
            "MerchantRequestID":"5b3d-4c11-9598-abb6c87b02ec17987",
            "CheckoutRequestID":"ws_CO_14042025130920578114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-04-14 13:09:21] HTTP status code: 200
[2025-04-14 13:09:21] Request took 0.84533 seconds
[2025-04-14 13:09:21] Response data: stdClass Object
(
    [MerchantRequestID] => 5b3d-4c11-9598-abb6c87b02ec17987
    [CheckoutRequestID] => ws_CO_14042025130920578114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-04-14 13:09:21] STK Push successful! CheckoutRequestID: ws_CO_14042025130920578114669532
[2025-04-14 13:09:21] MerchantRequestID: 5b3d-4c11-9598-abb6c87b02ec17987
[2025-04-14 13:09:21] Transaction details saved to database with ID: 3
[2025-04-14 13:09:21] Sending successful response to client
[2025-04-14 12:09:49] ======= NEW PAYMENT PROCESS STARTED =======
[2025-04-14 12:09:49] POST data: Array
(
    [reseller_id] => 15
    [package_name] => 2HR Qtro Konnect
    [package_price] => 10.00
    [package_id] => 18
    [mpesa_number] => 254114669532
)

[2025-04-14 12:09:49] Form data received: {"resellerId":15,"packageName":"2HR Qtro Konnect","packagePrice":"10.00","mpesaNumber":"254114669532","packageId":18}
[2025-04-14 12:09:49] Formatted phone number: 254114669532
[2025-04-14 12:09:49] Validated amount: 10
[2025-04-14 12:09:49] Generating access token...
[2025-04-14 12:09:49] Access token response: {
            "access_token": "rG4dwxPcaOIOPEkA6BqYmQ3kMJS2",
            "expires_in": "3599"
        }
        
[2025-04-14 12:09:49] Access token generated successfully: rG4dwxPcaO...
[2025-04-14 13:09:49] Using callback URL: https://mydomain.com/mpesa_callback.php
[2025-04-14 13:09:49] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUwNDE0MTMwOTQ5",
    "Timestamp": "20250414130949",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 10,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/mydomain.com\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for 2HR Qtro Konnect"
}
[2025-04-14 13:09:49] Sending STK Push request
[2025-04-14 13:09:50] STK Push response: {
            "MerchantRequestID":"2203-464a-b6e1-0288223bfd3f146373",
            "CheckoutRequestID":"ws_CO_14042025131134377114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-04-14 13:09:50] HTTP status code: 200
[2025-04-14 13:09:50] Request took 1.025972 seconds
[2025-04-14 13:09:50] Response data: stdClass Object
(
    [MerchantRequestID] => 2203-464a-b6e1-0288223bfd3f146373
    [CheckoutRequestID] => ws_CO_14042025131134377114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-04-14 13:09:50] STK Push successful! CheckoutRequestID: ws_CO_14042025131134377114669532
[2025-04-14 13:09:50] MerchantRequestID: 2203-464a-b6e1-0288223bfd3f146373
[2025-04-14 13:09:50] Transaction details saved to database with ID: 4
[2025-04-14 13:09:50] Sending successful response to client
[2025-04-14 12:10:53] ======= NEW PAYMENT PROCESS STARTED =======
[2025-04-14 12:10:53] POST data: Array
(
    [reseller_id] => 15
    [package_name] => 2HR Qtro Konnect
    [package_price] => 10.00
    [package_id] => 18
    [mpesa_number] => 254114669532
)

[2025-04-14 12:10:53] Form data received: {"resellerId":15,"packageName":"2HR Qtro Konnect","packagePrice":"10.00","mpesaNumber":"254114669532","packageId":18}
[2025-04-14 12:10:53] Formatted phone number: 254114669532
[2025-04-14 12:10:53] Validated amount: 10
[2025-04-14 12:10:53] Generating access token...
[2025-04-14 12:10:54] Access token response: {
            "access_token": "EoeeqIhD26sBKy1Q4VvfGz66qOKh",
            "expires_in": "3599"
        }
        
[2025-04-14 12:10:54] Access token generated successfully: EoeeqIhD26...
[2025-04-14 13:10:54] Using callback URL: https://mydomain.com/mpesa_callback.php
[2025-04-14 13:10:54] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUwNDE0MTMxMDU0",
    "Timestamp": "20250414131054",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 10,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/mydomain.com\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for 2HR Qtro Konnect"
}
[2025-04-14 13:10:54] Sending STK Push request
[2025-04-14 13:10:55] STK Push response: {
            "MerchantRequestID":"5b3d-4c11-9598-abb6c87b02ec17997",
            "CheckoutRequestID":"ws_CO_14042025131239273114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-04-14 13:10:55] HTTP status code: 200
[2025-04-14 13:10:55] Request took 0.742569 seconds
[2025-04-14 13:10:55] Response data: stdClass Object
(
    [MerchantRequestID] => 5b3d-4c11-9598-abb6c87b02ec17997
    [CheckoutRequestID] => ws_CO_14042025131239273114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-04-14 13:10:55] STK Push successful! CheckoutRequestID: ws_CO_14042025131239273114669532
[2025-04-14 13:10:55] MerchantRequestID: 5b3d-4c11-9598-abb6c87b02ec17997
[2025-04-14 13:10:55] Transaction details saved to database with ID: 5
[2025-04-14 13:10:55] Sending successful response to client
[2025-04-14 12:13:15] ======= NEW PAYMENT PROCESS STARTED =======
[2025-04-14 12:13:15] POST data: Array
(
    [reseller_id] => 6
    [package_name] => 1Hr Konnect
    [package_price] => 1.00
    [package_id] => 15
    [mpesa_number] => 254114669532
)

[2025-04-14 12:13:15] Form data received: {"resellerId":6,"packageName":"1Hr Konnect","packagePrice":"1.00","mpesaNumber":"254114669532","packageId":15}
[2025-04-14 12:13:15] Formatted phone number: 254114669532
[2025-04-14 12:13:15] WARNING: Amount less than 10 KES. Setting to minimum 10 KES for sandbox testing.
[2025-04-14 12:13:15] Validated amount: 10
[2025-04-14 12:13:15] Generating access token...
[2025-04-14 12:13:17] Access token response: {
            "access_token": "e85bQaiGv7fr2wuRmDOk5d6GMUUT",
            "expires_in": "3599"
        }
        
[2025-04-14 12:13:17] Access token generated successfully: e85bQaiGv7...
[2025-04-14 13:13:17] Using callback URL: https://mydomain.com/mpesa_callback.php
[2025-04-14 13:13:17] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUwNDE0MTMxMzE3",
    "Timestamp": "20250414131317",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 10,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/mydomain.com\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for 1Hr Konnect"
}
[2025-04-14 13:13:17] Sending STK Push request
[2025-04-14 13:13:17] STK Push response: {
            "MerchantRequestID":"5fbd-4f1c-b3c1-b463d28d74d2147095",
            "CheckoutRequestID":"ws_CO_14042025131316620114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-04-14 13:13:17] HTTP status code: 200
[2025-04-14 13:13:17] Request took 0.61894 seconds
[2025-04-14 13:13:17] Response data: stdClass Object
(
    [MerchantRequestID] => 5fbd-4f1c-b3c1-b463d28d74d2147095
    [CheckoutRequestID] => ws_CO_14042025131316620114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-04-14 13:13:17] STK Push successful! CheckoutRequestID: ws_CO_14042025131316620114669532
[2025-04-14 13:13:17] MerchantRequestID: 5fbd-4f1c-b3c1-b463d28d74d2147095
[2025-04-14 13:13:17] Transaction details saved to database with ID: 6
[2025-04-14 13:13:17] Sending successful response to client
[2025-04-14 12:20:54] ======= NEW PAYMENT PROCESS STARTED =======
[2025-04-14 12:20:54] POST data: Array
(
    [reseller_id] => 6
    [package_name] => 1Hr Konnect
    [package_price] => 1.00
    [package_id] => 15
    [mpesa_number] => 254114669532
)

[2025-04-14 12:20:54] Form data received: {"resellerId":6,"packageName":"1Hr Konnect","packagePrice":"1.00","mpesaNumber":"254114669532","packageId":15}
[2025-04-14 12:20:54] Formatted phone number: 254114669532
[2025-04-14 12:20:54] WARNING: Amount less than 10 KES. Setting to minimum 10 KES for sandbox testing.
[2025-04-14 12:20:54] Validated amount: 10
[2025-04-14 12:20:54] Generating access token...
[2025-04-14 12:20:55] Access token response: {
            "access_token": "i0Kc7anhmM3fZ6mKXG4ul2rBAIeq",
            "expires_in": "3599"
        }
        
[2025-04-14 12:20:55] Access token generated successfully: i0Kc7anhmM...
[2025-04-14 13:20:55] Using callback URL: https://mydomain.com/mpesa_callback.php
[2025-04-14 13:20:55] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUwNDE0MTMyMDU1",
    "Timestamp": "20250414132055",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 10,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/mydomain.com\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for 1Hr Konnect"
}
[2025-04-14 13:20:55] Sending STK Push request
[2025-04-14 13:20:56] STK Push response: {
            "MerchantRequestID":"ec07-4524-9c53-db81c5aef3985599",
            "CheckoutRequestID":"ws_CO_14042025132240303114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-04-14 13:20:56] HTTP status code: 200
[2025-04-14 13:20:56] Request took 1.412882 seconds
[2025-04-14 13:20:56] Response data: stdClass Object
(
    [MerchantRequestID] => ec07-4524-9c53-db81c5aef3985599
    [CheckoutRequestID] => ws_CO_14042025132240303114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-04-14 13:20:56] STK Push successful! CheckoutRequestID: ws_CO_14042025132240303114669532
[2025-04-14 13:20:56] MerchantRequestID: ec07-4524-9c53-db81c5aef3985599
[2025-04-14 13:20:56] Transaction details saved to database with ID: 7
[2025-04-14 13:20:56] Sending successful response to client
[2025-04-25 03:10:23] ======= NEW PAYMENT PROCESS STARTED =======
[2025-04-25 03:10:23] POST data: Array
(
    [reseller_id] => 6
    [package_name] => 1Hr Konnect
    [package_price] => 1.00
    [package_id] => 15
    [mpesa_number] => 254114669532
)

[2025-04-25 03:10:23] Form data received: {"resellerId":6,"packageName":"1Hr Konnect","packagePrice":"1.00","mpesaNumber":"254114669532","packageId":15}
[2025-04-25 03:10:23] Formatted phone number: 254114669532
[2025-04-25 03:10:23] WARNING: Amount less than 10 KES. Setting to minimum 10 KES for sandbox testing.
[2025-04-25 03:10:23] Validated amount: 10
[2025-04-25 03:10:23] Generating access token...
[2025-04-25 03:10:24] Access token response: {
            "access_token": "HFucQj39ZHnBQ6iYN06QHGKFOTrb",
            "expires_in": "3599"
        }
        
[2025-04-25 03:10:24] Access token generated successfully: HFucQj39ZH...
[2025-04-25 04:10:24] Using callback URL: https://13a2-197-136-202-10.ngrok-free.app/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-04-25 04:10:24] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-04-25 04:10:24] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUwNDI1MDQxMDI0",
    "Timestamp": "20250425041024",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 10,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/13a2-197-136-202-10.ngrok-free.app\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for 1Hr Konnect"
}
[2025-04-25 04:10:24] Sending STK Push request
[2025-04-25 04:10:25] STK Push response: {
            "MerchantRequestID":"75f4-4e91-aa3c-79e4611bbc5833591",
            "CheckoutRequestID":"ws_CO_25042025041216243114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-04-25 04:10:25] HTTP status code: 200
[2025-04-25 04:10:25] Request took 1.024078 seconds
[2025-04-25 04:10:25] Response data: stdClass Object
(
    [MerchantRequestID] => 75f4-4e91-aa3c-79e4611bbc5833591
    [CheckoutRequestID] => ws_CO_25042025041216243114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-04-25 04:10:25] STK Push successful! CheckoutRequestID: ws_CO_25042025041216243114669532
[2025-04-25 04:10:25] MerchantRequestID: 75f4-4e91-aa3c-79e4611bbc5833591
[2025-04-25 04:10:25] Transaction details saved to database with ID: 8
[2025-04-25 04:10:25] Sending successful response to client
[2025-04-26 02:06:51] ======= NEW PAYMENT PROCESS STARTED =======
[2025-04-26 02:06:51] POST data: Array
(
    [reseller_id] => 6
    [router_id] => 15
    [package_name] => Game Connect
    [package_price] => 30.00
    [package_id] => 12
    [mpesa_number] => 254114669532
)

[2025-04-26 02:06:51] Form data received: {"resellerId":6,"packageName":"Game Connect","packagePrice":"30.00","mpesaNumber":"254114669532","packageId":12}
[2025-04-26 02:06:51] Formatted phone number: 254114669532
[2025-04-26 02:06:51] Validated amount: 30
[2025-04-26 02:06:51] Generating access token...
[2025-04-26 02:06:52] Access token response: {
            "access_token": "vW2rqVGSCOAeqLLbTyCQeD1tlC1t",
            "expires_in": "3599"
        }
        
[2025-04-26 02:06:52] Access token generated successfully: vW2rqVGSCO...
[2025-04-26 03:06:52] Using callback URL: https://13a2-197-136-202-10.ngrok-free.app/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-04-26 03:06:52] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-04-26 03:06:52] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUwNDI2MDMwNjUy",
    "Timestamp": "20250426030652",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 30,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/13a2-197-136-202-10.ngrok-free.app\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for Game Connect"
}
[2025-04-26 03:06:52] Sending STK Push request
[2025-04-26 03:06:53] STK Push response: {
            "MerchantRequestID":"ce92-4c74-a396-4768a3ea93e4102298",
            "CheckoutRequestID":"ws_CO_26042025030844768114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-04-26 03:06:53] HTTP status code: 200
[2025-04-26 03:06:53] Request took 1.016342 seconds
[2025-04-26 03:06:53] Response data: stdClass Object
(
    [MerchantRequestID] => ce92-4c74-a396-4768a3ea93e4102298
    [CheckoutRequestID] => ws_CO_26042025030844768114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-04-26 03:06:53] STK Push successful! CheckoutRequestID: ws_CO_26042025030844768114669532
[2025-04-26 03:06:53] MerchantRequestID: ce92-4c74-a396-4768a3ea93e4102298
[2025-04-26 03:06:53] Transaction details saved to database with ID: 9
[2025-04-26 03:06:53] Sending successful response to client
[2025-04-27 00:10:30] ======= NEW PAYMENT PROCESS STARTED =======
[2025-04-27 00:10:30] POST data: Array
(
    [reseller_id] => 6
    [router_id] => 17
    [package_name] => 1Hr Konnect
    [package_price] => 1.00
    [package_id] => 15
    [mpesa_number] => 254114669532
)

[2025-04-27 00:10:30] Form data received: {"resellerId":6,"packageName":"1Hr Konnect","packagePrice":"1.00","mpesaNumber":"254114669532","packageId":15,"routerId":17}
[2025-04-27 00:10:30] Formatted phone number: 254114669532
[2025-04-27 00:10:30] WARNING: Amount less than 10 KES. Setting to minimum 10 KES for sandbox testing.
[2025-04-27 00:10:30] Validated amount: 10
[2025-04-27 00:10:30] Generating access token...
[2025-04-27 00:10:31] Access token response: {
            "access_token": "M8fXp2IeVR9z0Ax5QAaWKd0M6AOe",
            "expires_in": "3599"
        }
        
[2025-04-27 00:10:31] Access token generated successfully: M8fXp2IeVR...
[2025-04-27 01:10:31] Using callback URL: https://13a2-197-136-202-10.ngrok-free.app/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-04-27 01:10:31] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-04-27 01:10:31] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUwNDI3MDExMDMx",
    "Timestamp": "20250427011031",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 10,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/13a2-197-136-202-10.ngrok-free.app\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for 1Hr Konnect"
}
[2025-04-27 01:10:31] Sending STK Push request
[2025-04-27 01:10:33] STK Push response: {
            "MerchantRequestID":"83d4-4f58-9d7b-8134bf68ae3085264",
            "CheckoutRequestID":"ws_CO_27042025011034247114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-04-27 01:10:33] HTTP status code: 200
[2025-04-27 01:10:33] Request took 1.751733 seconds
[2025-04-27 01:10:33] Response data: stdClass Object
(
    [MerchantRequestID] => 83d4-4f58-9d7b-8134bf68ae3085264
    [CheckoutRequestID] => ws_CO_27042025011034247114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-04-27 01:10:33] STK Push successful! CheckoutRequestID: ws_CO_27042025011034247114669532
[2025-04-27 01:10:33] MerchantRequestID: 83d4-4f58-9d7b-8134bf68ae3085264
[2025-04-27 01:10:33] Failed to prepare transaction statement: Unknown column 'router_id' in 'field list'
[2025-04-27 01:10:33] Sending successful response to client
[2025-05-04 08:30:25] ======= NEW PAYMENT PROCESS STARTED =======
[2025-05-04 08:30:25] POST data: Array
(
    [reseller_id] => 6
    [router_id] => 15
    [package_name] => 1Hr Konnect
    [package_price] => 1.00
    [package_id] => 15
    [mpesa_number] => 254114669532
)

[2025-05-04 08:30:25] Form data received: {"resellerId":6,"packageName":"1Hr Konnect","packagePrice":"1.00","mpesaNumber":"254114669532","packageId":15,"routerId":15}
[2025-05-04 08:30:25] Formatted phone number: 254114669532
[2025-05-04 08:30:25] WARNING: Amount less than 10 KES. Setting to minimum 10 KES for sandbox testing.
[2025-05-04 08:30:25] Validated amount: 10
[2025-05-04 08:30:25] Generating access token...
[2025-05-04 08:30:27] Access token response: 
[2025-05-04 08:30:27] Failed to generate access token: Unknown error
[2025-05-04 09:32:32] ======= NEW PAYMENT PROCESS STARTED =======
[2025-05-04 09:32:32] POST data: Array
(
    [reseller_id] => 6
    [router_id] => 15
    [package_name] => 1Hr Konnect
    [package_price] => 1.00
    [package_id] => 15
    [mpesa_number] => 254114669532
)

[2025-05-04 09:32:32] Form data received: {"resellerId":6,"packageName":"1Hr Konnect","packagePrice":"1.00","mpesaNumber":"254114669532","packageId":15,"routerId":15}
[2025-05-04 09:32:32] Formatted phone number: 254114669532
[2025-05-04 09:32:32] WARNING: Amount less than 10 KES. Setting to minimum 10 KES for sandbox testing.
[2025-05-04 09:32:32] Validated amount: 10
[2025-05-04 09:32:32] Generating access token...
[2025-05-04 09:32:33] Access token response: {
            "access_token": "KTboRANMDZWUPVpYI49AdsdVH4df",
            "expires_in": "3599"
        }
        
[2025-05-04 09:32:33] Access token generated successfully: KTboRANMDZ...
[2025-05-04 10:32:33] Using callback URL: https://13a2-197-136-202-10.ngrok-free.app/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-05-04 10:32:33] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-05-04 10:32:33] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUwNTA0MTAzMjMz",
    "Timestamp": "20250504103233",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 10,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/13a2-197-136-202-10.ngrok-free.app\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for 1Hr Konnect"
}
[2025-05-04 10:32:33] Sending STK Push request
[2025-05-04 10:32:35] STK Push response: {
            "MerchantRequestID":"5772-45ff-adb5-823779ddd1bc157393",
            "CheckoutRequestID":"ws_CO_04052025103233193114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-05-04 10:32:35] HTTP status code: 200
[2025-05-04 10:32:35] Request took 1.29333 seconds
[2025-05-04 10:32:35] Response data: stdClass Object
(
    [MerchantRequestID] => 5772-45ff-adb5-823779ddd1bc157393
    [CheckoutRequestID] => ws_CO_04052025103233193114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-05-04 10:32:35] STK Push successful! CheckoutRequestID: ws_CO_04052025103233193114669532
[2025-05-04 10:32:35] MerchantRequestID: 5772-45ff-adb5-823779ddd1bc157393
[2025-05-04 10:32:35] Failed to prepare transaction statement: Unknown column 'router_id' in 'field list'
[2025-05-04 10:32:35] Sending successful response to client
[2025-05-04 14:12:35] ======= NEW PAYMENT PROCESS STARTED =======
[2025-05-04 14:12:35] POST data: Array
(
    [reseller_id] => 6
    [router_id] => 15
    [package_name] => 1Hr Konnect
    [package_price] => 1.00
    [package_id] => 15
    [mpesa_number] => 254114669532
)

[2025-05-04 14:12:35] Form data received: {"resellerId":6,"packageName":"1Hr Konnect","packagePrice":"1.00","mpesaNumber":"254114669532","packageId":15,"routerId":15}
[2025-05-04 14:12:35] Formatted phone number: 254114669532
[2025-05-04 14:12:35] WARNING: Amount less than 10 KES. Setting to minimum 10 KES for sandbox testing.
[2025-05-04 14:12:35] Validated amount: 10
[2025-05-04 14:12:35] Generating access token...
[2025-05-04 14:12:36] Access token response: {
            "access_token": "hAdT9P4E4RJKwNSXsSz68pD4dO4G",
            "expires_in": "3599"
        }
        
[2025-05-04 14:12:36] Access token generated successfully: hAdT9P4E4R...
[2025-05-04 15:12:36] Using callback URL: https://13a2-197-136-202-10.ngrok-free.app/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-05-04 15:12:36] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-05-04 15:12:36] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUwNTA0MTUxMjM2",
    "Timestamp": "20250504151236",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 10,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/13a2-197-136-202-10.ngrok-free.app\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for 1Hr Konnect"
}
[2025-05-04 15:12:36] Sending STK Push request
[2025-05-04 15:12:37] STK Push response: {
            "MerchantRequestID":"74cc-45b4-9c87-cf63848fd865214984",
            "CheckoutRequestID":"ws_CO_04052025151432399114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-05-04 15:12:37] HTTP status code: 200
[2025-05-04 15:12:37] Request took 1.084859 seconds
[2025-05-04 15:12:37] Response data: stdClass Object
(
    [MerchantRequestID] => 74cc-45b4-9c87-cf63848fd865214984
    [CheckoutRequestID] => ws_CO_04052025151432399114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-05-04 15:12:37] STK Push successful! CheckoutRequestID: ws_CO_04052025151432399114669532
[2025-05-04 15:12:37] MerchantRequestID: 74cc-45b4-9c87-cf63848fd865214984
[2025-05-04 15:12:37] Failed to prepare transaction statement: Unknown column 'router_id' in 'field list'
[2025-05-04 15:12:37] Sending successful response to client
[2025-08-21 10:34:44] ======= NEW PAYMENT PROCESS STARTED =======
[2025-08-21 10:34:44] POST data: Array
(
    [reseller_id] => 6
    [router_id] => 15
    [package_name] => Game Connect
    [package_price] => 30.00
    [package_id] => 12
    [mpesa_number] => 254114669532
)

[2025-08-21 10:34:44] Form data received: {"resellerId":6,"packageName":"Game Connect","packagePrice":"30.00","mpesaNumber":"254114669532","packageId":12,"routerId":15}
[2025-08-21 10:34:44] Formatted phone number: 254114669532
[2025-08-21 10:34:44] Validated amount: 30
[2025-08-21 10:34:44] Generating access token...
[2025-08-21 10:34:45] Access token response: {
            "access_token": "iCM3zSsOeKBbfZyKtViOzvOcC5GH",
            "expires_in": "3599"
        }
        
[2025-08-21 10:34:45] Access token generated successfully: iCM3zSsOeK...
[2025-08-21 11:34:45] Using callback URL: https://13a2-197-136-202-10.ngrok-free.app/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-08-21 11:34:45] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-08-21 11:34:45] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUwODIxMTEzNDQ1",
    "Timestamp": "20250821113445",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 30,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/13a2-197-136-202-10.ngrok-free.app\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for Game Connect"
}
[2025-08-21 11:34:45] Sending STK Push request
[2025-08-21 11:34:46] STK Push response: {
            "MerchantRequestID":"92f0-455d-9e8c-b8f93c31aced35280",
            "CheckoutRequestID":"ws_CO_210820251134475114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-08-21 11:34:46] HTTP status code: 200
[2025-08-21 11:34:46] Request took 0.929519 seconds
[2025-08-21 11:34:46] Response data: stdClass Object
(
    [MerchantRequestID] => 92f0-455d-9e8c-b8f93c31aced35280
    [CheckoutRequestID] => ws_CO_210820251134475114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-08-21 11:34:46] STK Push successful! CheckoutRequestID: ws_CO_210820251134475114669532
[2025-08-21 11:34:46] MerchantRequestID: 92f0-455d-9e8c-b8f93c31aced35280
[2025-08-21 11:34:46] Failed to prepare transaction statement: Unknown column 'router_id' in 'field list'
[2025-08-21 11:34:46] Sending successful response to client
[2025-09-23 21:41:30] ======= NEW PAYMENT PROCESS STARTED =======
[2025-09-23 21:41:30] POST data: Array
(
    [reseller_id] => 17
    [router_id] => 19
    [package_name] => Konnect
    [package_price] => 11.00
    [package_id] => 30
    [mpesa_number] => 254114669532
)

[2025-09-23 21:41:30] Form data received: {"resellerId":17,"packageName":"Konnect","packagePrice":"11.00","mpesaNumber":"254114669532","packageId":30,"routerId":19}
[2025-09-23 21:41:30] Formatted phone number: 254114669532
[2025-09-23 21:41:30] Validated amount: 11
[2025-09-23 21:41:30] Generating access token...
[2025-09-23 21:41:31] Access token response: 
[2025-09-23 21:41:31] Failed to generate access token: Unknown error
[2025-09-23 21:41:35] ======= NEW PAYMENT PROCESS STARTED =======
[2025-09-23 21:41:35] POST data: Array
(
    [reseller_id] => 17
    [router_id] => 19
    [package_name] => Konnect
    [package_price] => 11.00
    [package_id] => 30
    [mpesa_number] => 254114669532
)

[2025-09-23 21:41:35] Form data received: {"resellerId":17,"packageName":"Konnect","packagePrice":"11.00","mpesaNumber":"254114669532","packageId":30,"routerId":19}
[2025-09-23 21:41:35] Formatted phone number: 254114669532
[2025-09-23 21:41:35] Validated amount: 11
[2025-09-23 21:41:35] Generating access token...
[2025-09-23 21:41:36] Access token response: 
[2025-09-23 21:41:36] Failed to generate access token: Unknown error
[2025-09-23 21:43:00] ======= NEW PAYMENT PROCESS STARTED =======
[2025-09-23 21:43:00] POST data: Array
(
    [reseller_id] => 17
    [router_id] => 19
    [package_name] => Konnect
    [package_price] => 11.00
    [package_id] => 30
    [mpesa_number] => 254114669532
)

[2025-09-23 21:43:00] Form data received: {"resellerId":17,"packageName":"Konnect","packagePrice":"11.00","mpesaNumber":"254114669532","packageId":30,"routerId":19}
[2025-09-23 21:43:00] Formatted phone number: 254114669532
[2025-09-23 21:43:00] Validated amount: 11
[2025-09-23 21:43:00] Generating access token...
[2025-09-23 21:43:01] Access token response: 
[2025-09-23 21:43:01] Failed to generate access token: Unknown error
[2025-10-02 21:19:13] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-02 21:19:13] POST data: Array
(
    [reseller_id] => 17
    [router_id] => 20
    [package_name] => Game Connect
    [package_price] => 5.00
    [package_id] => 31
    [payment_gateway] => till
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-02 21:19:13] Form data received: {"resellerId":17,"packageName":"Game Connect","packagePrice":"5.00","mpesaNumber":"254114669532","packageId":31,"routerId":20}
[2025-10-02 21:19:13] Formatted phone number: 254114669532
[2025-10-02 21:19:13] WARNING: Amount less than 10 KES. Setting to minimum 10 KES for sandbox testing.
[2025-10-02 21:19:13] Validated amount: 10
[2025-10-02 21:19:13] Generating access token...
[2025-10-02 21:19:14] Access token response: {
            "access_token": "K3gd1H9ENoOdFG4ARpvSrspLTDpm",
            "expires_in": "3599"
        }
        
[2025-10-02 21:19:14] Access token generated successfully: K3gd1H9ENo...
[2025-10-02 22:19:14] Using callback URL: https://13a2-197-136-202-10.ngrok-free.app/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-02 22:19:14] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-02 22:19:14] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5MDkwNDlhNmQ2MzY0NTk0NTA1ODNhMDdhZWY3MWNlNDI3ZjY5YTZlNzJmYzgzYjFlOWJkODFkYTQyODI5MmJhMTIwMjUxMDAyMjIxOTE0",
    "Timestamp": "20251002221914",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 10,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/13a2-197-136-202-10.ngrok-free.app\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for Game Connect"
}
[2025-10-02 22:19:14] Sending STK Push request
[2025-10-02 22:19:14] STK Push response: {
                    "requestId":"1a21-4f53-86f5-c8c984f35d8a18917",
                    "errorCode": "500.001.1001",
                    "errorMessage": "Wrong credentials"
                }
            
[2025-10-02 22:19:14] HTTP status code: 500
[2025-10-02 22:19:14] Request took 0.548916 seconds
[2025-10-02 22:19:14] Response data: stdClass Object
(
    [requestId] => 1a21-4f53-86f5-c8c984f35d8a18917
    [errorCode] => 500.001.1001
    [errorMessage] => Wrong credentials
)

[2025-10-02 22:19:14] STK Push failed: Wrong credentials
[2025-10-02 21:19:38] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-02 21:19:38] POST data: Array
(
    [reseller_id] => 17
    [router_id] => 19
    [package_name] => Konnect
    [package_price] => 11.00
    [package_id] => 30
    [payment_gateway] => till
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-02 21:19:38] Form data received: {"resellerId":17,"packageName":"Konnect","packagePrice":"11.00","mpesaNumber":"254114669532","packageId":30,"routerId":19}
[2025-10-02 21:19:38] Formatted phone number: 254114669532
[2025-10-02 21:19:38] Validated amount: 11
[2025-10-02 21:19:38] Generating access token...
[2025-10-02 21:19:40] Access token response: {
            "access_token": "GvQby6thQGX8QZxssNUTARnylFDG",
            "expires_in": "3599"
        }
        
[2025-10-02 21:19:40] Access token generated successfully: GvQby6thQG...
[2025-10-02 22:19:40] Using callback URL: https://13a2-197-136-202-10.ngrok-free.app/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-02 22:19:40] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-02 22:19:40] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5MDkwNDlhNmQ2MzY0NTk0NTA1ODNhMDdhZWY3MWNlNDI3ZjY5YTZlNzJmYzgzYjFlOWJkODFkYTQyODI5MmJhMTIwMjUxMDAyMjIxOTQw",
    "Timestamp": "20251002221940",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 11,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/13a2-197-136-202-10.ngrok-free.app\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for Konnect"
}
[2025-10-02 22:19:40] Sending STK Push request
[2025-10-02 22:19:40] STK Push response: {
                    "requestId":"93a4-4d71-8c2d-4124bf51705029512",
                    "errorCode": "500.001.1001",
                    "errorMessage": "Wrong credentials"
                }
            
[2025-10-02 22:19:40] HTTP status code: 500
[2025-10-02 22:19:40] Request took 0.675427 seconds
[2025-10-02 22:19:40] Response data: stdClass Object
(
    [requestId] => 93a4-4d71-8c2d-4124bf51705029512
    [errorCode] => 500.001.1001
    [errorMessage] => Wrong credentials
)

[2025-10-02 22:19:40] STK Push failed: Wrong credentials
[2025-10-02 21:26:24] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-02 21:26:24] POST data: Array
(
    [reseller_id] => 17
    [router_id] => 19
    [package_name] => Konnect
    [package_price] => 11.00
    [package_id] => 30
    [payment_gateway] => till
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-02 21:26:24] Form data received: {"resellerId":17,"packageName":"Konnect","packagePrice":"11.00","mpesaNumber":"254114669532","packageId":30,"routerId":19}
[2025-10-02 21:26:24] Formatted phone number: 254114669532
[2025-10-02 21:26:24] Validated amount: 11
[2025-10-02 21:26:24] Generating access token...
[2025-10-02 21:26:25] Access token response: {
            "access_token": "5Dse5MNIpijelQBUrjyhzCdZMM4V",
            "expires_in": "3599"
        }
        
[2025-10-02 21:26:25] Access token generated successfully: 5Dse5MNIpi...
[2025-10-02 22:26:25] Using callback URL: https://13a2-197-136-202-10.ngrok-free.app/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-02 22:26:25] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-02 22:26:25] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5MDkwNDlhNmQ2MzY0NTk0NTA1ODNhMDdhZWY3MWNlNDI3ZjY5YTZlNzJmYzgzYjFlOWJkODFkYTQyODI5MmJhMTIwMjUxMDAyMjIyNjI1",
    "Timestamp": "20251002222625",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 11,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/13a2-197-136-202-10.ngrok-free.app\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for Konnect"
}
[2025-10-02 22:26:25] Sending STK Push request
[2025-10-02 22:26:26] STK Push response: {
                    "requestId":"2e9c-429c-a95c-b4cd653531a314",
                    "errorCode": "500.001.1001",
                    "errorMessage": "Wrong credentials"
                }
            
[2025-10-02 22:26:26] HTTP status code: 500
[2025-10-02 22:26:26] Request took 0.737548 seconds
[2025-10-02 22:26:26] Response data: stdClass Object
(
    [requestId] => 2e9c-429c-a95c-b4cd653531a314
    [errorCode] => 500.001.1001
    [errorMessage] => Wrong credentials
)

[2025-10-02 22:26:26] STK Push failed: Wrong credentials
[2025-10-02 21:29:23] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-02 21:29:23] POST data: Array
(
    [reseller_id] => 17
    [router_id] => 19
    [package_name] => Konnect
    [package_price] => 11.00
    [package_id] => 30
    [payment_gateway] => till
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-02 21:29:23] Form data received: {"resellerId":17,"packageName":"Konnect","packagePrice":"11.00","mpesaNumber":"254114669532","packageId":30,"routerId":19}
[2025-10-02 21:29:23] Formatted phone number: 254114669532
[2025-10-02 21:29:23] Validated amount: 11
[2025-10-02 21:29:23] Generating access token...
[2025-10-02 21:29:25] Access token response: {
            "access_token": "YL0C27tj5TO3aI9CvWU778p4c1Vt",
            "expires_in": "3599"
        }
        
[2025-10-02 21:29:25] Access token generated successfully: YL0C27tj5T...
[2025-10-02 22:29:25] Using callback URL: https://13a2-197-136-202-10.ngrok-free.app/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-02 22:29:25] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-02 22:29:25] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5MDkwNDlhNmQ2MzY0NTk0NTA1ODNhMDdhZWY3MWNlNDI3ZjY5YTZlNzJmYzgzYjFlOWJkODFkYTQyODI5MmJhMTIwMjUxMDAyMjIyOTI1",
    "Timestamp": "20251002222925",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 11,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/13a2-197-136-202-10.ngrok-free.app\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for Konnect"
}
[2025-10-02 22:29:25] Sending STK Push request
[2025-10-02 22:29:26] STK Push response: {
                    "requestId":"1db1-4208-92c7-1269f74679c316414",
                    "errorCode": "500.001.1001",
                    "errorMessage": "Wrong credentials"
                }
            
[2025-10-02 22:29:26] HTTP status code: 500
[2025-10-02 22:29:26] Request took 0.758687 seconds
[2025-10-02 22:29:26] Response data: stdClass Object
(
    [requestId] => 1db1-4208-92c7-1269f74679c316414
    [errorCode] => 500.001.1001
    [errorMessage] => Wrong credentials
)

[2025-10-02 22:29:26] STK Push failed: Wrong credentials
[2025-10-02 21:33:19] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-02 21:33:19] POST data: Array
(
    [reseller_id] => 6
    [router_id] => 15
    [package_name] => Konnect
    [package_price] => 200.00
    [package_id] => 10
    [payment_gateway] => till
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-02 21:33:19] Form data received: {"resellerId":6,"packageName":"Konnect","packagePrice":"200.00","mpesaNumber":"254114669532","packageId":10,"routerId":15}
[2025-10-02 21:33:19] Formatted phone number: 254114669532
[2025-10-02 21:33:19] Validated amount: 200
[2025-10-02 21:33:19] Generating access token...
[2025-10-02 21:33:20] Access token response: {
            "access_token": "CZexB3jR2Fnzc09s5aTAeCc50P8j",
            "expires_in": "3599"
        }
        
[2025-10-02 21:33:20] Access token generated successfully: CZexB3jR2F...
[2025-10-02 22:33:20] Using callback URL: https://fd7f49c64822.ngrok-free.app/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-02 22:33:20] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-02 22:33:20] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUxMDAyMjIzMzIw",
    "Timestamp": "20251002223320",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 200,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/fd7f49c64822.ngrok-free.app\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for Konnect"
}
[2025-10-02 22:33:20] Sending STK Push request
[2025-10-02 22:33:21] STK Push response: {
            "MerchantRequestID":"5998-46a7-a4aa-5a37a83f21ad1180",
            "CheckoutRequestID":"ws_CO_02102025223321561114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-10-02 22:33:21] HTTP status code: 200
[2025-10-02 22:33:21] Request took 1.089781 seconds
[2025-10-02 22:33:21] Response data: stdClass Object
(
    [MerchantRequestID] => 5998-46a7-a4aa-5a37a83f21ad1180
    [CheckoutRequestID] => ws_CO_02102025223321561114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-10-02 22:33:21] STK Push successful! CheckoutRequestID: ws_CO_02102025223321561114669532
[2025-10-02 22:33:21] MerchantRequestID: 5998-46a7-a4aa-5a37a83f21ad1180
[2025-10-02 22:33:21] Failed to prepare transaction statement: Unknown column 'router_id' in 'field list'
[2025-10-02 22:33:21] Sending successful response to client
[2025-10-02 21:36:54] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-02 21:36:54] POST data: Array
(
    [reseller_id] => 6
    [router_id] => 15
    [package_name] => 1Hr Konnect
    [package_price] => 1.00
    [package_id] => 15
    [payment_gateway] => till
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-02 21:36:54] Form data received: {"resellerId":6,"packageName":"1Hr Konnect","packagePrice":"1.00","mpesaNumber":"254114669532","packageId":15,"routerId":15}
[2025-10-02 21:36:54] Formatted phone number: 254114669532
[2025-10-02 21:36:54] WARNING: Amount less than 10 KES. Setting to minimum 10 KES for sandbox testing.
[2025-10-02 21:36:54] Validated amount: 10
[2025-10-02 21:36:54] Generating access token...
[2025-10-02 21:36:54] Access token response: {
            "access_token": "ZaPotSr69wcYoleHa3NGVMZw3VAT",
            "expires_in": "3599"
        }
        
[2025-10-02 21:36:54] Access token generated successfully: ZaPotSr69w...
[2025-10-02 22:36:54] Using callback URL: https://fd7f49c64822.ngrok-free.app/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-02 22:36:54] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-02 22:36:54] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUxMDAyMjIzNjU0",
    "Timestamp": "20251002223654",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 10,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/fd7f49c64822.ngrok-free.app\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for 1Hr Konnect"
}
[2025-10-02 22:36:54] Sending STK Push request
[2025-10-02 22:36:55] STK Push response: {
            "MerchantRequestID":"2e9c-429c-a95c-b4cd653531a392",
            "CheckoutRequestID":"ws_CO_02102025223655368114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-10-02 22:36:55] HTTP status code: 200
[2025-10-02 22:36:55] Request took 0.960819 seconds
[2025-10-02 22:36:55] Response data: stdClass Object
(
    [MerchantRequestID] => 2e9c-429c-a95c-b4cd653531a392
    [CheckoutRequestID] => ws_CO_02102025223655368114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-10-02 22:36:55] STK Push successful! CheckoutRequestID: ws_CO_02102025223655368114669532
[2025-10-02 22:36:55] MerchantRequestID: 2e9c-429c-a95c-b4cd653531a392
[2025-10-02 22:36:55] Failed to prepare transaction statement: Unknown column 'router_id' in 'field list'
[2025-10-02 22:36:55] Sending successful response to client
[2025-10-02 21:38:17] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-02 21:38:17] POST data: Array
(
    [reseller_id] => 6
    [router_id] => 15
    [package_name] => 1Hr Konnect
    [package_price] => 1.00
    [package_id] => 15
    [payment_gateway] => till
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-02 21:38:17] Form data received: {"resellerId":6,"packageName":"1Hr Konnect","packagePrice":"1.00","mpesaNumber":"254114669532","packageId":15,"routerId":15}
[2025-10-02 21:38:17] Formatted phone number: 254114669532
[2025-10-02 21:38:17] WARNING: Amount less than 10 KES. Setting to minimum 10 KES for sandbox testing.
[2025-10-02 21:38:17] Validated amount: 10
[2025-10-02 21:38:17] Generating access token...
[2025-10-02 21:38:18] Access token response: {
            "access_token": "JVjFILtMoWAYzL8LtbQ1Khrd81b0",
            "expires_in": "3599"
        }
        
[2025-10-02 21:38:18] Access token generated successfully: JVjFILtMoW...
[2025-10-02 22:38:18] Using callback URL: https://fd7f49c64822.ngrok-free.app/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-02 22:38:18] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-02 22:38:18] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUxMDAyMjIzODE4",
    "Timestamp": "20251002223818",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 10,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/fd7f49c64822.ngrok-free.app\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for 1Hr Konnect"
}
[2025-10-02 22:38:18] Sending STK Push request
[2025-10-02 22:38:19] STK Push response: {
            "MerchantRequestID":"2e9c-429c-a95c-b4cd653531a3111",
            "CheckoutRequestID":"ws_CO_02102025223818788114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-10-02 22:38:19] HTTP status code: 200
[2025-10-02 22:38:19] Request took 0.966617 seconds
[2025-10-02 22:38:19] Response data: stdClass Object
(
    [MerchantRequestID] => 2e9c-429c-a95c-b4cd653531a3111
    [CheckoutRequestID] => ws_CO_02102025223818788114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-10-02 22:38:19] STK Push successful! CheckoutRequestID: ws_CO_02102025223818788114669532
[2025-10-02 22:38:19] MerchantRequestID: 2e9c-429c-a95c-b4cd653531a3111
[2025-10-02 22:38:19] Failed to prepare transaction statement: Unknown column 'router_id' in 'field list'
[2025-10-02 22:38:19] Sending successful response to client
[2025-10-02 21:46:48] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-02 21:46:48] POST data: Array
(
    [reseller_id] => 6
    [router_id] => 15
    [package_name] => 1Hr Konnect
    [package_price] => 1.00
    [package_id] => 15
    [payment_gateway] => till
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-02 21:46:48] Form data received: {"resellerId":6,"packageName":"1Hr Konnect","packagePrice":"1.00","mpesaNumber":"254114669532","packageId":15,"routerId":15}
[2025-10-02 21:46:48] Formatted phone number: 254114669532
[2025-10-02 21:46:48] WARNING: Amount less than 10 KES. Setting to minimum 10 KES for sandbox testing.
[2025-10-02 21:46:48] Validated amount: 10
[2025-10-02 21:46:48] Generating access token...
[2025-10-02 21:46:49] Access token response: {
            "access_token": "OgOAg2eyN5NPPj7WigkiA5IYwfmv",
            "expires_in": "3599"
        }
        
[2025-10-02 21:46:49] Access token generated successfully: OgOAg2eyN5...
[2025-10-02 22:46:49] Using callback URL: https://fd7f49c64822.ngrok-free.app/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-02 22:46:49] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-02 22:46:49] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUxMDAyMjI0NjQ5",
    "Timestamp": "20251002224649",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 10,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/fd7f49c64822.ngrok-free.app\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for 1Hr Konnect"
}
[2025-10-02 22:46:49] Sending STK Push request
[2025-10-02 22:46:49] STK Push response: {
            "MerchantRequestID":"1db1-4208-92c7-1269f74679c316589",
            "CheckoutRequestID":"ws_CO_02102025224649681114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-10-02 22:46:49] HTTP status code: 200
[2025-10-02 22:46:49] Request took 0.681329 seconds
[2025-10-02 22:46:49] Response data: stdClass Object
(
    [MerchantRequestID] => 1db1-4208-92c7-1269f74679c316589
    [CheckoutRequestID] => ws_CO_02102025224649681114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-10-02 22:46:49] STK Push successful! CheckoutRequestID: ws_CO_02102025224649681114669532
[2025-10-02 22:46:49] MerchantRequestID: 1db1-4208-92c7-1269f74679c316589
[2025-10-02 22:46:49] Failed to prepare transaction statement: Unknown column 'router_id' in 'field list'
[2025-10-02 22:46:49] Sending successful response to client
[2025-10-02 23:16:33] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-02 23:16:33] POST data: Array
(
    [reseller_id] => 6
    [router_id] => 15
    [package_name] => 1Hr Konnect
    [package_price] => 1.00
    [package_id] => 15
    [payment_gateway] => till
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-02 23:16:33] Form data received: {"resellerId":6,"packageName":"1Hr Konnect","packagePrice":"1.00","mpesaNumber":"254114669532","packageId":15,"routerId":15}
[2025-10-02 23:16:33] Formatted phone number: 254114669532
[2025-10-02 23:16:33] WARNING: Amount less than 10 KES. Setting to minimum 10 KES for sandbox testing.
[2025-10-02 23:16:33] Validated amount: 10
[2025-10-02 23:16:33] Generating access token...
[2025-10-02 23:16:34] Access token response: {
            "access_token": "xYVGcoSI7ltGA7tAfGw6t9nWPVBQ",
            "expires_in": "3599"
        }
        
[2025-10-02 23:16:34] Access token generated successfully: xYVGcoSI7l...
[2025-10-03 00:16:34] Using callback URL: https://fd7f49c64822.ngrok-free.app/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-03 00:16:34] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-03 00:16:34] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUxMDAzMDAxNjM0",
    "Timestamp": "20251003001634",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 10,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/fd7f49c64822.ngrok-free.app\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for 1Hr Konnect"
}
[2025-10-03 00:16:34] Sending STK Push request
[2025-10-03 00:16:35] STK Push response: {
            "MerchantRequestID":"1db1-4208-92c7-1269f74679c317563",
            "CheckoutRequestID":"ws_CO_03102025001635551114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-10-03 00:16:35] HTTP status code: 200
[2025-10-03 00:16:35] Request took 0.969014 seconds
[2025-10-03 00:16:35] Response data: stdClass Object
(
    [MerchantRequestID] => 1db1-4208-92c7-1269f74679c317563
    [CheckoutRequestID] => ws_CO_03102025001635551114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-10-03 00:16:35] STK Push successful! CheckoutRequestID: ws_CO_03102025001635551114669532
[2025-10-03 00:16:35] MerchantRequestID: 1db1-4208-92c7-1269f74679c317563
[2025-10-03 00:16:35] Failed to prepare transaction statement: Unknown column 'router_id' in 'field list'
[2025-10-03 00:16:35] Sending successful response to client
[2025-10-02 23:56:37] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-02 23:56:37] POST data: Array
(
    [reseller_id] => 6
    [router_id] => 15
    [package_name] => 1Hr Konnect
    [package_price] => 1.00
    [package_id] => 15
    [payment_gateway] => till
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-02 23:56:37] Form data received: {"resellerId":6,"packageName":"1Hr Konnect","packagePrice":"1.00","mpesaNumber":"254114669532","packageId":15,"routerId":15}
[2025-10-02 23:56:37] Formatted phone number: 254114669532
[2025-10-02 23:56:37] WARNING: Amount less than 10 KES. Setting to minimum 10 KES for sandbox testing.
[2025-10-02 23:56:37] Validated amount: 10
[2025-10-02 23:56:37] Generating access token...
[2025-10-02 23:56:38] Access token response: {
            "access_token": "E33PRdSkObnBbM5A3YYPyhvGmGKQ",
            "expires_in": "3599"
        }
        
[2025-10-02 23:56:38] Access token generated successfully: E33PRdSkOb...
[2025-10-03 00:56:38] Using callback URL from reseller settings: https://fd7f49c64822.ngrok-free.app/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-03 00:56:38] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-03 00:56:38] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUxMDAzMDA1NjM4",
    "Timestamp": "20251003005638",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 10,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/fd7f49c64822.ngrok-free.app\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for 1Hr Konnect"
}
[2025-10-03 00:56:38] Sending STK Push request
[2025-10-03 00:56:39] STK Push response: {
            "MerchantRequestID":"1db1-4208-92c7-1269f74679c317899",
            "CheckoutRequestID":"ws_CO_03102025005639822114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-10-03 00:56:39] HTTP status code: 200
[2025-10-03 00:56:39] Request took 1.477117 seconds
[2025-10-03 00:56:39] Response data: stdClass Object
(
    [MerchantRequestID] => 1db1-4208-92c7-1269f74679c317899
    [CheckoutRequestID] => ws_CO_03102025005639822114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-10-03 00:56:39] STK Push successful! CheckoutRequestID: ws_CO_03102025005639822114669532
[2025-10-03 00:56:39] MerchantRequestID: 1db1-4208-92c7-1269f74679c317899
[2025-10-03 00:56:39] Failed to prepare transaction statement: Unknown column 'router_id' in 'field list'
[2025-10-03 00:56:39] Sending successful response to client
[2025-10-03 00:10:26] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-03 00:10:26] POST data: Array
(
    [reseller_id] => 6
    [router_id] => 15
    [package_name] => 1Hr Konnect
    [package_price] => 1.00
    [package_id] => 15
    [payment_gateway] => till
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-03 00:10:26] Form data received: {"resellerId":6,"packageName":"1Hr Konnect","packagePrice":"1.00","mpesaNumber":"254114669532","packageId":15,"routerId":15}
[2025-10-03 00:10:26] Formatted phone number: 254114669532
[2025-10-03 00:10:26] WARNING: Amount less than 10 KES. Setting to minimum 10 KES for sandbox testing.
[2025-10-03 00:10:26] Validated amount: 10
[2025-10-03 00:10:26] Generating access token...
[2025-10-03 00:10:27] Access token response: {
            "access_token": "CA7GjdGVmrutktONRtzF5CpCG4Fk",
            "expires_in": "3599"
        }
        
[2025-10-03 00:10:27] Access token generated successfully: CA7GjdGVmr...
[2025-10-03 01:10:27] Using callback URL from reseller settings: https://fd7f49c64822.ngrok-free.app/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-03 01:10:27] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-03 01:10:27] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUxMDAzMDExMDI3",
    "Timestamp": "20251003011027",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 10,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/fd7f49c64822.ngrok-free.app\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for 1Hr Konnect"
}
[2025-10-03 01:10:27] Sending STK Push request
[2025-10-03 01:10:28] STK Push response: {
            "MerchantRequestID":"5998-46a7-a4aa-5a37a83f21ad2745",
            "CheckoutRequestID":"ws_CO_03102025011028879114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-10-03 01:10:28] HTTP status code: 200
[2025-10-03 01:10:28] Request took 0.978707 seconds
[2025-10-03 01:10:28] Response data: stdClass Object
(
    [MerchantRequestID] => 5998-46a7-a4aa-5a37a83f21ad2745
    [CheckoutRequestID] => ws_CO_03102025011028879114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-10-03 01:10:28] STK Push successful! CheckoutRequestID: ws_CO_03102025011028879114669532
[2025-10-03 01:10:28] MerchantRequestID: 5998-46a7-a4aa-5a37a83f21ad2745
[2025-10-03 01:10:28] Failed to prepare transaction statement: Unknown column 'router_id' in 'field list'
[2025-10-03 01:10:28] Sending successful response to client
[2025-10-03 00:43:05] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-03 00:43:05] POST data: Array
(
    [reseller_id] => 6
    [router_id] => 15
    [package_name] => 1Hr Konnect
    [package_price] => 1.00
    [package_id] => 15
    [payment_gateway] => till
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-03 00:43:05] Form data received: {"resellerId":6,"packageName":"1Hr Konnect","packagePrice":"1.00","mpesaNumber":"254114669532","packageId":15,"routerId":15}
[2025-10-03 00:43:05] Formatted phone number: 254114669532
[2025-10-03 00:43:05] WARNING: Amount less than 10 KES. Setting to minimum 10 KES for sandbox testing.
[2025-10-03 00:43:05] Validated amount: 10
[2025-10-03 00:43:05] Generating access token...
[2025-10-03 00:43:06] Access token response: {
            "access_token": "CjPF1Je5RsGfuLY0VQ1XtFbITS7F",
            "expires_in": "3599"
        }
        
[2025-10-03 00:43:06] Access token generated successfully: CjPF1Je5Rs...
[2025-10-03 01:43:06] Using callback URL from reseller settings: https://fd7f49c64822.ngrok-free.app/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-03 01:43:06] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-03 01:43:06] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUxMDAzMDE0MzA2",
    "Timestamp": "20251003014306",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 10,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/fd7f49c64822.ngrok-free.app\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for 1Hr Konnect"
}
[2025-10-03 01:43:06] Sending STK Push request
[2025-10-03 01:43:07] STK Push response: {
            "MerchantRequestID":"1db1-4208-92c7-1269f74679c318357",
            "CheckoutRequestID":"ws_CO_03102025014307593114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-10-03 01:43:07] HTTP status code: 200
[2025-10-03 01:43:07] Request took 1.315342 seconds
[2025-10-03 01:43:07] Response data: stdClass Object
(
    [MerchantRequestID] => 1db1-4208-92c7-1269f74679c318357
    [CheckoutRequestID] => ws_CO_03102025014307593114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-10-03 01:43:07] STK Push successful! CheckoutRequestID: ws_CO_03102025014307593114669532
[2025-10-03 01:43:07] MerchantRequestID: 1db1-4208-92c7-1269f74679c318357
[2025-10-03 01:43:07] Transaction details saved to database with ID: 13
[2025-10-03 01:43:07] Sending successful response to client
[2025-10-03 00:50:47] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-03 00:50:47] POST data: Array
(
    [reseller_id] => 6
    [router_id] => 15
    [package_name] => 1Hr Konnect
    [package_price] => 1.00
    [package_id] => 15
    [payment_gateway] => till
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-03 00:50:47] Form data received: {"resellerId":6,"packageName":"1Hr Konnect","packagePrice":"1.00","mpesaNumber":"254114669532","packageId":15,"routerId":15}
[2025-10-03 00:50:47] Formatted phone number: 254114669532
[2025-10-03 00:50:47] WARNING: Amount less than 10 KES. Setting to minimum 10 KES for sandbox testing.
[2025-10-03 00:50:47] Validated amount: 10
[2025-10-03 00:50:47] Generating access token...
[2025-10-03 00:50:47] Access token response: {
            "access_token": "gb9d2SSrmTbXwFP43OPOnRuAlVDJ",
            "expires_in": "3599"
        }
        
[2025-10-03 00:50:47] Access token generated successfully: gb9d2SSrmT...
[2025-10-03 01:50:47] Using callback URL from reseller settings: https://fd7f49c64822.ngrok-free.app/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-03 01:50:47] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-03 01:50:47] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUxMDAzMDE1MDQ3",
    "Timestamp": "20251003015047",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 10,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/fd7f49c64822.ngrok-free.app\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for 1Hr Konnect"
}
[2025-10-03 01:50:47] Sending STK Push request
[2025-10-03 01:50:48] STK Push response: {
            "MerchantRequestID":"1a21-4f53-86f5-c8c984f35d8a20683",
            "CheckoutRequestID":"ws_CO_03102025015048777114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-10-03 01:50:48] HTTP status code: 200
[2025-10-03 01:50:48] Request took 0.82328 seconds
[2025-10-03 01:50:48] Response data: stdClass Object
(
    [MerchantRequestID] => 1a21-4f53-86f5-c8c984f35d8a20683
    [CheckoutRequestID] => ws_CO_03102025015048777114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-10-03 01:50:48] STK Push successful! CheckoutRequestID: ws_CO_03102025015048777114669532
[2025-10-03 01:50:48] MerchantRequestID: 1a21-4f53-86f5-c8c984f35d8a20683
[2025-10-03 01:50:48] Transaction details saved to database with ID: 14
[2025-10-03 01:50:48] Sending successful response to client
[2025-10-03 01:23:49] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-03 01:23:49] POST data: Array
(
    [reseller_id] => 6
    [router_id] => 15
    [package_name] => 1Hr Konnect
    [package_price] => 1.00
    [package_id] => 15
    [payment_gateway] => till
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-03 01:23:49] Form data received: {"resellerId":6,"packageName":"1Hr Konnect","packagePrice":"1.00","mpesaNumber":"254114669532","packageId":15,"routerId":15}
[2025-10-03 01:23:49] Formatted phone number: 254114669532
[2025-10-03 01:23:49] WARNING: Amount less than 10 KES. Setting to minimum 10 KES for sandbox testing.
[2025-10-03 01:23:49] Validated amount: 10
[2025-10-03 01:23:49] Generating access token...
[2025-10-03 01:23:51] Access token response: {
            "access_token": "mwbLLDAtbomU5kCZKBKm0RbqkA1k",
            "expires_in": "3599"
        }
        
[2025-10-03 01:23:51] Access token generated successfully: mwbLLDAtbo...
[2025-10-03 02:23:51] Using callback URL from reseller settings: https://fd7f49c64822.ngrok-free.app/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-03 02:23:51] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-03 02:23:51] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUxMDAzMDIyMzUx",
    "Timestamp": "20251003022351",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 10,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/fd7f49c64822.ngrok-free.app\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for 1Hr Konnect"
}
[2025-10-03 02:23:51] Sending STK Push request
[2025-10-03 02:23:51] STK Push response: {
            "MerchantRequestID":"5998-46a7-a4aa-5a37a83f21ad3461",
            "CheckoutRequestID":"ws_CO_03102025022352346114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-10-03 02:23:51] HTTP status code: 200
[2025-10-03 02:23:51] Request took 0.72804 seconds
[2025-10-03 02:23:51] Response data: stdClass Object
(
    [MerchantRequestID] => 5998-46a7-a4aa-5a37a83f21ad3461
    [CheckoutRequestID] => ws_CO_03102025022352346114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-10-03 02:23:51] STK Push successful! CheckoutRequestID: ws_CO_03102025022352346114669532
[2025-10-03 02:23:51] MerchantRequestID: 5998-46a7-a4aa-5a37a83f21ad3461
[2025-10-03 02:23:51] Transaction details saved to database with ID: 15
[2025-10-03 02:23:51] Sending successful response to client
[2025-10-03 01:24:57] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-03 01:24:57] POST data: Array
(
    [reseller_id] => 6
    [router_id] => 15
    [package_name] => 1Hr Konnect
    [package_price] => 1.00
    [package_id] => 15
    [payment_gateway] => till
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-03 01:24:57] Form data received: {"resellerId":6,"packageName":"1Hr Konnect","packagePrice":"1.00","mpesaNumber":"254114669532","packageId":15,"routerId":15}
[2025-10-03 01:24:57] Formatted phone number: 254114669532
[2025-10-03 01:24:57] WARNING: Amount less than 10 KES. Setting to minimum 10 KES for sandbox testing.
[2025-10-03 01:24:57] Validated amount: 10
[2025-10-03 01:24:57] Generating access token...
[2025-10-03 01:24:58] Access token response: {
            "access_token": "HYSv4V82vWtGakDVwG328Q6DdXVa",
            "expires_in": "3599"
        }
        
[2025-10-03 01:24:58] Access token generated successfully: HYSv4V82vW...
[2025-10-03 02:24:58] Using callback URL from reseller settings: https://fd7f49c64822.ngrok-free.app/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-03 02:24:58] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-03 02:24:58] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUxMDAzMDIyNDU4",
    "Timestamp": "20251003022458",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 10,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/fd7f49c64822.ngrok-free.app\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for 1Hr Konnect"
}
[2025-10-03 02:24:58] Sending STK Push request
[2025-10-03 02:24:58] STK Push response: {
            "MerchantRequestID":"5998-46a7-a4aa-5a37a83f21ad3476",
            "CheckoutRequestID":"ws_CO_03102025022459391114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-10-03 02:24:58] HTTP status code: 200
[2025-10-03 02:24:58] Request took 0.839 seconds
[2025-10-03 02:24:58] Response data: stdClass Object
(
    [MerchantRequestID] => 5998-46a7-a4aa-5a37a83f21ad3476
    [CheckoutRequestID] => ws_CO_03102025022459391114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-10-03 02:24:58] STK Push successful! CheckoutRequestID: ws_CO_03102025022459391114669532
[2025-10-03 02:24:58] MerchantRequestID: 5998-46a7-a4aa-5a37a83f21ad3476
[2025-10-03 02:24:58] Transaction details saved to database with ID: 16
[2025-10-03 02:24:58] Sending successful response to client
[2025-10-03 02:04:07] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-03 02:04:07] POST data: Array
(
    [reseller_id] => 6
    [router_id] => 15
    [package_name] => 1Hr Konnect
    [package_price] => 1.00
    [package_id] => 15
    [payment_gateway] => till
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-03 02:04:07] Form data received: {"resellerId":6,"packageName":"1Hr Konnect","packagePrice":"1.00","mpesaNumber":"254114669532","packageId":15,"routerId":15}
[2025-10-03 02:04:07] Formatted phone number: 254114669532
[2025-10-03 02:04:07] WARNING: Amount less than 10 KES. Setting to minimum 10 KES for sandbox testing.
[2025-10-03 02:04:07] Validated amount: 10
[2025-10-03 02:04:07] Generating access token...
[2025-10-03 02:04:07] Access token response: {
            "access_token": "aHEG0rg3xexe7QM3t9mA1N2U41WC",
            "expires_in": "3599"
        }
        
[2025-10-03 02:04:07] Access token generated successfully: aHEG0rg3xe...
[2025-10-03 03:04:07] Using system callback URL: https://fd7f49c64822.ngrok-free.app/SAAS/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-03 03:04:07] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-03 03:04:07] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUxMDAzMDMwNDA3",
    "Timestamp": "20251003030407",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 10,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/fd7f49c64822.ngrok-free.app\/SAAS\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for 1Hr Konnect"
}
[2025-10-03 03:04:07] Sending STK Push request
[2025-10-03 03:04:08] STK Push response: {
            "MerchantRequestID":"5998-46a7-a4aa-5a37a83f21ad3833",
            "CheckoutRequestID":"ws_CO_03102025030409377114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-10-03 03:04:08] HTTP status code: 200
[2025-10-03 03:04:08] Request took 0.887236 seconds
[2025-10-03 03:04:08] Response data: stdClass Object
(
    [MerchantRequestID] => 5998-46a7-a4aa-5a37a83f21ad3833
    [CheckoutRequestID] => ws_CO_03102025030409377114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-10-03 03:04:08] STK Push successful! CheckoutRequestID: ws_CO_03102025030409377114669532
[2025-10-03 03:04:08] MerchantRequestID: 5998-46a7-a4aa-5a37a83f21ad3833
[2025-10-03 03:04:08] Transaction details saved to database with ID: 17
[2025-10-03 03:04:08] Sending successful response to client
[2025-10-03 12:10:46] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-03 12:10:46] POST data: Array
(
    [reseller_id] => 6
    [router_id] => 15
    [package_name] => 1Hr Konnect
    [package_price] => 1.00
    [package_id] => 15
    [payment_gateway] => till
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-03 12:10:46] Form data received: {"resellerId":6,"packageName":"1Hr Konnect","packagePrice":"1.00","mpesaNumber":"254114669532","packageId":15,"routerId":15}
[2025-10-03 12:10:46] Formatted phone number: 254114669532
[2025-10-03 12:10:46] WARNING: Amount less than 10 KES. Setting to minimum 10 KES for sandbox testing.
[2025-10-03 12:10:46] Validated amount: 10
[2025-10-03 12:10:46] Generating access token...
[2025-10-03 12:10:47] Access token response: {
            "access_token": "nYjxL5Iv8SOqhOjgNSqv0FGcxK7R",
            "expires_in": "3599"
        }
        
[2025-10-03 12:10:47] Access token generated successfully: nYjxL5Iv8S...
[2025-10-03 13:10:47] Using callback URL from reseller settings: https://fd7f49c64822.ngrok-free.app/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-03 13:10:47] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-03 13:10:47] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUxMDAzMTMxMDQ3",
    "Timestamp": "20251003131047",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 10,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/fd7f49c64822.ngrok-free.app\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for 1Hr Konnect"
}
[2025-10-03 13:10:47] Sending STK Push request
[2025-10-03 13:10:47] STK Push response: {
            "MerchantRequestID":"5998-46a7-a4aa-5a37a83f21ad11253",
            "CheckoutRequestID":"ws_CO_03102025131048891114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-10-03 13:10:47] HTTP status code: 200
[2025-10-03 13:10:47] Request took 0.850392 seconds
[2025-10-03 13:10:47] Response data: stdClass Object
(
    [MerchantRequestID] => 5998-46a7-a4aa-5a37a83f21ad11253
    [CheckoutRequestID] => ws_CO_03102025131048891114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-10-03 13:10:47] STK Push successful! CheckoutRequestID: ws_CO_03102025131048891114669532
[2025-10-03 13:10:47] MerchantRequestID: 5998-46a7-a4aa-5a37a83f21ad11253
[2025-10-03 13:10:47] Transaction details saved to database with ID: 18
[2025-10-03 13:10:47] Sending successful response to client
[2025-10-03 12:21:17] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-03 12:21:17] POST data: Array
(
    [reseller_id] => 6
    [router_id] => 15
    [package_name] => 1Hr Konnect
    [package_price] => 1.00
    [package_id] => 15
    [payment_gateway] => till
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-03 12:21:17] Form data received: {"resellerId":6,"packageName":"1Hr Konnect","packagePrice":"1.00","mpesaNumber":"254114669532","packageId":15,"routerId":15}
[2025-10-03 12:21:17] Formatted phone number: 254114669532
[2025-10-03 12:21:17] WARNING: Amount less than 10 KES. Setting to minimum 10 KES for sandbox testing.
[2025-10-03 12:21:17] Validated amount: 10
[2025-10-03 12:21:17] Generating access token...
[2025-10-03 12:21:18] Access token response: {
            "access_token": "FIW5E2GeRHlILpdoTcpSj7WvyWmC",
            "expires_in": "3599"
        }
        
[2025-10-03 12:21:18] Access token generated successfully: FIW5E2GeRH...
[2025-10-03 13:21:18] Using callback URL from reseller settings: https://fd7f49c64822.ngrok-free.app/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-03 13:21:18] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-03 13:21:18] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUxMDAzMTMyMTE4",
    "Timestamp": "20251003132118",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 10,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/fd7f49c64822.ngrok-free.app\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for 1Hr Konnect"
}
[2025-10-03 13:21:18] Sending STK Push request
[2025-10-03 13:21:19] STK Push response: {
            "MerchantRequestID":"2e9c-429c-a95c-b4cd653531a36930",
            "CheckoutRequestID":"ws_CO_03102025132120439114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-10-03 13:21:19] HTTP status code: 200
[2025-10-03 13:21:19] Request took 1.076721 seconds
[2025-10-03 13:21:19] Response data: stdClass Object
(
    [MerchantRequestID] => 2e9c-429c-a95c-b4cd653531a36930
    [CheckoutRequestID] => ws_CO_03102025132120439114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-10-03 13:21:19] STK Push successful! CheckoutRequestID: ws_CO_03102025132120439114669532
[2025-10-03 13:21:19] MerchantRequestID: 2e9c-429c-a95c-b4cd653531a36930
[2025-10-03 13:21:19] Transaction details saved to database with ID: 19
[2025-10-03 13:21:19] Sending successful response to client
[2025-10-03 12:31:33] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-03 12:31:33] POST data: Array
(
    [reseller_id] => 6
    [router_id] => 15
    [package_name] => 1Hr Konnect
    [package_price] => 1.00
    [package_id] => 15
    [payment_gateway] => till
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-03 12:31:33] Form data received: {"resellerId":6,"packageName":"1Hr Konnect","packagePrice":"1.00","mpesaNumber":"254114669532","packageId":15,"routerId":15}
[2025-10-03 12:31:33] Formatted phone number: 254114669532
[2025-10-03 12:31:33] WARNING: Amount less than 10 KES. Setting to minimum 10 KES for sandbox testing.
[2025-10-03 12:31:33] Validated amount: 10
[2025-10-03 12:31:33] Generating access token...
[2025-10-03 12:31:34] Access token response: {
            "access_token": "RdxYobk9mNcN0DOd28IYaHXAOe5o",
            "expires_in": "3599"
        }
        
[2025-10-03 12:31:34] Access token generated successfully: RdxYobk9mN...
[2025-10-03 13:31:34] Using callback URL from reseller settings: https://fd7f49c64822.ngrok-free.app/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-03 13:31:34] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-03 13:31:34] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUxMDAzMTMzMTM0",
    "Timestamp": "20251003133134",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 10,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/fd7f49c64822.ngrok-free.app\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for 1Hr Konnect"
}
[2025-10-03 13:31:34] Sending STK Push request
[2025-10-03 13:31:34] STK Push response: {
            "MerchantRequestID":"5998-46a7-a4aa-5a37a83f21ad11589",
            "CheckoutRequestID":"ws_CO_03102025133135920114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-10-03 13:31:34] HTTP status code: 200
[2025-10-03 13:31:34] Request took 0.805481 seconds
[2025-10-03 13:31:34] Response data: stdClass Object
(
    [MerchantRequestID] => 5998-46a7-a4aa-5a37a83f21ad11589
    [CheckoutRequestID] => ws_CO_03102025133135920114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-10-03 13:31:34] STK Push successful! CheckoutRequestID: ws_CO_03102025133135920114669532
[2025-10-03 13:31:34] MerchantRequestID: 5998-46a7-a4aa-5a37a83f21ad11589
[2025-10-03 13:31:34] Transaction details saved to database with ID: 20
[2025-10-03 13:31:34] Sending successful response to client
[2025-10-03 12:36:06] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-03 12:36:06] POST data: Array
(
    [reseller_id] => 6
    [router_id] => 15
    [package_name] => 1Hr Konnect
    [package_price] => 1.00
    [package_id] => 15
    [payment_gateway] => till
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-03 12:36:06] Form data received: {"resellerId":6,"packageName":"1Hr Konnect","packagePrice":"1.00","mpesaNumber":"254114669532","packageId":15,"routerId":15}
[2025-10-03 12:36:06] Formatted phone number: 254114669532
[2025-10-03 12:36:06] WARNING: Amount less than 10 KES. Setting to minimum 10 KES for sandbox testing.
[2025-10-03 12:36:06] Validated amount: 10
[2025-10-03 12:36:06] Generating access token...
[2025-10-03 12:36:06] Access token response: {
            "access_token": "onUzajbgDMv7jt5nZvtFOTRuU45K",
            "expires_in": "3599"
        }
        
[2025-10-03 12:36:06] Access token generated successfully: onUzajbgDM...
[2025-10-03 13:36:06] Using callback URL from reseller settings: https://fd7f49c64822.ngrok-free.app/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-03 13:36:06] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-03 13:36:06] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUxMDAzMTMzNjA2",
    "Timestamp": "20251003133606",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 10,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/fd7f49c64822.ngrok-free.app\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for 1Hr Konnect"
}
[2025-10-03 13:36:06] Sending STK Push request
[2025-10-03 13:36:07] STK Push response: {
            "MerchantRequestID":"8650-45d8-a15a-b8eb285d295a4181",
            "CheckoutRequestID":"ws_CO_03102025133608928114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-10-03 13:36:07] HTTP status code: 200
[2025-10-03 13:36:07] Request took 0.938585 seconds
[2025-10-03 13:36:07] Response data: stdClass Object
(
    [MerchantRequestID] => 8650-45d8-a15a-b8eb285d295a4181
    [CheckoutRequestID] => ws_CO_03102025133608928114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-10-03 13:36:07] STK Push successful! CheckoutRequestID: ws_CO_03102025133608928114669532
[2025-10-03 13:36:07] MerchantRequestID: 8650-45d8-a15a-b8eb285d295a4181
[2025-10-03 13:36:07] Transaction details saved to database with ID: 21
[2025-10-03 13:36:07] Sending successful response to client
[2025-10-03 12:47:36] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-03 12:47:36] POST data: Array
(
    [reseller_id] => 6
    [package_name] => Test Package
    [package_price] => 100
    [mpesa_number] => 254114669532
    [package_id] => 15
    [router_id] => 0
    [payment_gateway] => mpesa
)

[2025-10-03 12:47:36] Form data received: {"resellerId":6,"packageName":"Test Package","packagePrice":"100","mpesaNumber":"254114669532","packageId":15,"routerId":0}
[2025-10-03 12:47:36] Formatted phone number: 254114669532
[2025-10-03 12:47:36] Validated amount: 100
[2025-10-03 12:47:36] Generating access token...
[2025-10-03 12:47:38] Access token response: {
            "access_token": "hxAuwm3GA7I8iYqkrSUDlWPTI1We",
            "expires_in": "3599"
        }
        
[2025-10-03 12:47:38] Access token generated successfully: hxAuwm3GA7...
[2025-10-03 13:47:38] Using callback URL from reseller settings: https://fd7f49c64822.ngrok-free.app/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-03 13:47:38] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-03 13:47:38] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUxMDAzMTM0NzM4",
    "Timestamp": "20251003134738",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 100,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/fd7f49c64822.ngrok-free.app\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for Test Package"
}
[2025-10-03 13:47:38] Sending STK Push request
[2025-10-03 13:47:40] STK Push response: {
            "MerchantRequestID":"1db1-4208-92c7-1269f74679c327077",
            "CheckoutRequestID":"ws_CO_03102025134740949114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-10-03 13:47:40] HTTP status code: 200
[2025-10-03 13:47:40] Request took 1.465214 seconds
[2025-10-03 13:47:40] Response data: stdClass Object
(
    [MerchantRequestID] => 1db1-4208-92c7-1269f74679c327077
    [CheckoutRequestID] => ws_CO_03102025134740949114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-10-03 13:47:40] STK Push successful! CheckoutRequestID: ws_CO_03102025134740949114669532
[2025-10-03 13:47:40] MerchantRequestID: 1db1-4208-92c7-1269f74679c327077
[2025-10-03 13:47:40] Transaction details saved to database with ID: 22
[2025-10-03 13:47:40] Sending successful response to client
[2025-10-03 12:47:53] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-03 12:47:53] POST data: Array
(
    [reseller_id] => 6
    [package_name] => Test Package
    [package_price] => 100
    [mpesa_number] => 254114669532
    [package_id] => 15
    [router_id] => 0
    [payment_gateway] => mpesa
)

[2025-10-03 12:47:53] Form data received: {"resellerId":6,"packageName":"Test Package","packagePrice":"100","mpesaNumber":"254114669532","packageId":15,"routerId":0}
[2025-10-03 12:47:53] Formatted phone number: 254114669532
[2025-10-03 12:47:53] Validated amount: 100
[2025-10-03 12:47:53] Generating access token...
[2025-10-03 12:47:54] Access token response: {
            "access_token": "AHl6HVz49hnnC9WBXbJfOPqFE7z2",
            "expires_in": "3599"
        }
        
[2025-10-03 12:47:54] Access token generated successfully: AHl6HVz49h...
[2025-10-03 13:47:54] Using callback URL from reseller settings: https://fd7f49c64822.ngrok-free.app/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-03 13:47:54] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-03 13:47:54] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUxMDAzMTM0NzU0",
    "Timestamp": "20251003134754",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 100,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/fd7f49c64822.ngrok-free.app\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for Test Package"
}
[2025-10-03 13:47:54] Sending STK Push request
[2025-10-03 13:47:55] STK Push response: {
            "MerchantRequestID":"2e9c-429c-a95c-b4cd653531a37151",
            "CheckoutRequestID":"ws_CO_03102025134756796114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-10-03 13:47:55] HTTP status code: 200
[2025-10-03 13:47:55] Request took 1.097524 seconds
[2025-10-03 13:47:55] Response data: stdClass Object
(
    [MerchantRequestID] => 2e9c-429c-a95c-b4cd653531a37151
    [CheckoutRequestID] => ws_CO_03102025134756796114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-10-03 13:47:55] STK Push successful! CheckoutRequestID: ws_CO_03102025134756796114669532
[2025-10-03 13:47:55] MerchantRequestID: 2e9c-429c-a95c-b4cd653531a37151
[2025-10-03 13:47:55] Transaction details saved to database with ID: 23
[2025-10-03 13:47:55] Sending successful response to client
[2025-10-03 14:20:34] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-03 14:20:34] POST data: Array
(
    [reseller_id] => 6
    [package_name] => Test Package
    [package_price] => 100
    [mpesa_number] => 254114669532
    [package_id] => 15
    [router_id] => 0
    [payment_gateway] => mpesa
)

[2025-10-03 14:20:34] Form data received: {"resellerId":6,"packageName":"Test Package","packagePrice":"100","mpesaNumber":"254114669532","packageId":15,"routerId":0}
[2025-10-03 14:20:34] Formatted phone number: 254114669532
[2025-10-03 14:20:34] Validated amount: 100
[2025-10-03 14:20:34] Generating access token...
[2025-10-03 14:20:35] Access token response: {
            "access_token": "naLlUL2mzDJDRu27F3BGUICcTu5C",
            "expires_in": "3599"
        }
        
[2025-10-03 14:20:35] Access token generated successfully: naLlUL2mzD...
[2025-10-03 15:20:35] Using callback URL from reseller settings: https://fd7f49c64822.ngrok-free.app/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-03 15:20:35] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-03 15:20:35] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUxMDAzMTUyMDM1",
    "Timestamp": "20251003152035",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 100,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/fd7f49c64822.ngrok-free.app\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for Test Package"
}
[2025-10-03 15:20:35] Sending STK Push request
[2025-10-03 15:20:36] STK Push response: {
            "MerchantRequestID":"8650-45d8-a15a-b8eb285d295a4896",
            "CheckoutRequestID":"ws_CO_03102025152037804114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-10-03 15:20:36] HTTP status code: 200
[2025-10-03 15:20:36] Request took 0.997588 seconds
[2025-10-03 15:20:36] Response data: stdClass Object
(
    [MerchantRequestID] => 8650-45d8-a15a-b8eb285d295a4896
    [CheckoutRequestID] => ws_CO_03102025152037804114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-10-03 15:20:36] STK Push successful! CheckoutRequestID: ws_CO_03102025152037804114669532
[2025-10-03 15:20:36] MerchantRequestID: 8650-45d8-a15a-b8eb285d295a4896
[2025-10-03 15:20:36] Transaction details saved to database with ID: 32
[2025-10-03 15:20:36] Sending successful response to client
[2025-10-03 15:53:14] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-03 15:53:14] POST data: Array
(
    [reseller_id] => 6
    [router_id] => 15
    [package_name] => 1Hr Konnect
    [package_price] => 1.00
    [package_id] => 15
    [payment_gateway] => till
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-03 15:53:14] Form data received: {"resellerId":6,"packageName":"1Hr Konnect","packagePrice":"1.00","mpesaNumber":"254114669532","packageId":15,"routerId":15}
[2025-10-03 15:53:14] Formatted phone number: 254114669532
[2025-10-03 15:53:14] WARNING: Amount less than 10 KES. Setting to minimum 10 KES for sandbox testing.
[2025-10-03 15:53:14] Validated amount: 10
[2025-10-03 15:53:14] Generating access token...
[2025-10-03 15:53:15] Access token response: {
            "access_token": "jjDJmtrbJl25IwnYmncycDMaa1NG",
            "expires_in": "3599"
        }
        
[2025-10-03 15:53:15] Access token generated successfully: jjDJmtrbJl...
[2025-10-03 16:53:15] Using callback URL from reseller settings: https://fd7f49c64822.ngrok-free.app/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-03 16:53:15] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-03 16:53:15] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUxMDAzMTY1MzE1",
    "Timestamp": "20251003165315",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 10,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/fd7f49c64822.ngrok-free.app\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for 1Hr Konnect"
}
[2025-10-03 16:53:15] Sending STK Push request
[2025-10-03 16:53:16] STK Push response: {
            "MerchantRequestID":"5998-46a7-a4aa-5a37a83f21ad13573",
            "CheckoutRequestID":"ws_CO_03102025165317439114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-10-03 16:53:16] HTTP status code: 200
[2025-10-03 16:53:16] Request took 0.987938 seconds
[2025-10-03 16:53:16] Response data: stdClass Object
(
    [MerchantRequestID] => 5998-46a7-a4aa-5a37a83f21ad13573
    [CheckoutRequestID] => ws_CO_03102025165317439114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-10-03 16:53:16] STK Push successful! CheckoutRequestID: ws_CO_03102025165317439114669532
[2025-10-03 16:53:16] MerchantRequestID: 5998-46a7-a4aa-5a37a83f21ad13573
[2025-10-03 16:53:16] Transaction details saved to database with ID: 36
[2025-10-03 16:53:16] Sending successful response to client
[2025-10-03 15:55:18] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-03 15:55:18] POST data: Array
(
    [reseller_id] => 6
    [router_id] => 15
    [package_name] => 1Hr Konnect
    [package_price] => 1.00
    [package_id] => 15
    [payment_gateway] => till
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-03 15:55:18] Form data received: {"resellerId":6,"packageName":"1Hr Konnect","packagePrice":"1.00","mpesaNumber":"254114669532","packageId":15,"routerId":15}
[2025-10-03 15:55:18] Formatted phone number: 254114669532
[2025-10-03 15:55:18] WARNING: Amount less than 10 KES. Setting to minimum 10 KES for sandbox testing.
[2025-10-03 15:55:18] Validated amount: 10
[2025-10-03 15:55:18] Generating access token...
[2025-10-03 15:55:19] Access token response: {
            "access_token": "pt4UbxygvA4yGbCSGcwA0iy2A30P",
            "expires_in": "3599"
        }
        
[2025-10-03 15:55:19] Access token generated successfully: pt4UbxygvA...
[2025-10-03 16:55:19] Using callback URL from reseller settings: https://fd7f49c64822.ngrok-free.app/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-03 16:55:19] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-03 16:55:19] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUxMDAzMTY1NTE5",
    "Timestamp": "20251003165519",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 10,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/fd7f49c64822.ngrok-free.app\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for 1Hr Konnect"
}
[2025-10-03 16:55:19] Sending STK Push request
[2025-10-03 16:55:20] STK Push response: {
            "MerchantRequestID":"ec67-43aa-9362-0f167cc2e9de1109",
            "CheckoutRequestID":"ws_CO_03102025165521680114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-10-03 16:55:20] HTTP status code: 200
[2025-10-03 16:55:20] Request took 1.09211 seconds
[2025-10-03 16:55:20] Response data: stdClass Object
(
    [MerchantRequestID] => ec67-43aa-9362-0f167cc2e9de1109
    [CheckoutRequestID] => ws_CO_03102025165521680114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-10-03 16:55:20] STK Push successful! CheckoutRequestID: ws_CO_03102025165521680114669532
[2025-10-03 16:55:20] MerchantRequestID: ec67-43aa-9362-0f167cc2e9de1109
[2025-10-03 16:55:20] Transaction details saved to database with ID: 37
[2025-10-03 16:55:20] Sending successful response to client
[2025-10-03 16:21:27] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-03 16:21:27] POST data: Array
(
    [reseller_id] => 6
    [router_id] => 15
    [package_name] => 1Hr Konnect
    [package_price] => 1.00
    [package_id] => 15
    [payment_gateway] => till
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-03 16:21:27] Form data received: {"resellerId":6,"packageName":"1Hr Konnect","packagePrice":"1.00","mpesaNumber":"254114669532","packageId":15,"routerId":15}
[2025-10-03 16:21:27] Formatted phone number: 254114669532
[2025-10-03 16:21:27] WARNING: Amount less than 10 KES. Setting to minimum 10 KES for sandbox testing.
[2025-10-03 16:21:27] Validated amount: 10
[2025-10-03 16:21:27] Generating access token...
[2025-10-03 16:21:28] Access token response: {
            "access_token": "eBIntiVjrhfGk0ch09qjnrBpNnAT",
            "expires_in": "3599"
        }
        
[2025-10-03 16:21:28] Access token generated successfully: eBIntiVjrh...
[2025-10-03 17:21:28] Using callback URL from reseller settings: https://fd7f49c64822.ngrok-free.app/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-03 17:21:28] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-03 17:21:28] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUxMDAzMTcyMTI4",
    "Timestamp": "20251003172128",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 10,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/fd7f49c64822.ngrok-free.app\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for 1Hr Konnect"
}
[2025-10-03 17:21:28] Sending STK Push request
[2025-10-03 17:21:29] STK Push response: {
            "MerchantRequestID":"5998-46a7-a4aa-5a37a83f21ad13804",
            "CheckoutRequestID":"ws_CO_03102025172130645114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-10-03 17:21:29] HTTP status code: 200
[2025-10-03 17:21:29] Request took 0.994981 seconds
[2025-10-03 17:21:29] Response data: stdClass Object
(
    [MerchantRequestID] => 5998-46a7-a4aa-5a37a83f21ad13804
    [CheckoutRequestID] => ws_CO_03102025172130645114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-10-03 17:21:29] STK Push successful! CheckoutRequestID: ws_CO_03102025172130645114669532
[2025-10-03 17:21:29] MerchantRequestID: 5998-46a7-a4aa-5a37a83f21ad13804
[2025-10-03 17:21:29] Transaction details saved to database with ID: 73
[2025-10-03 17:21:29] Sending successful response to client
[2025-10-03 16:30:26] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-03 16:30:26] POST data: Array
(
    [reseller_id] => 6
    [router_id] => 15
    [package_name] => 1Hr Konnect
    [package_price] => 1.00
    [package_id] => 15
    [payment_gateway] => till
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-03 16:30:26] Form data received: {"resellerId":6,"packageName":"1Hr Konnect","packagePrice":"1.00","mpesaNumber":"254114669532","packageId":15,"routerId":15}
[2025-10-03 16:30:26] Formatted phone number: 254114669532
[2025-10-03 16:30:26] WARNING: Amount less than 10 KES. Setting to minimum 10 KES for sandbox testing.
[2025-10-03 16:30:26] Validated amount: 10
[2025-10-03 16:30:26] Generating access token...
[2025-10-03 16:30:27] Access token response: {
            "access_token": "LRC0OU4YurDI4QGS6lYao92k6cDt",
            "expires_in": "3599"
        }
        
[2025-10-03 16:30:27] Access token generated successfully: LRC0OU4Yur...
[2025-10-03 17:30:27] Using callback URL from reseller settings: https://fd7f49c64822.ngrok-free.app/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-03 17:30:27] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-03 17:30:27] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUxMDAzMTczMDI3",
    "Timestamp": "20251003173027",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 10,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/fd7f49c64822.ngrok-free.app\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for 1Hr Konnect"
}
[2025-10-03 17:30:27] Sending STK Push request
[2025-10-03 17:30:27] STK Push response: {
            "MerchantRequestID":"5998-46a7-a4aa-5a37a83f21ad13876",
            "CheckoutRequestID":"ws_CO_03102025173029292114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-10-03 17:30:27] HTTP status code: 200
[2025-10-03 17:30:27] Request took 0.80068 seconds
[2025-10-03 17:30:27] Response data: stdClass Object
(
    [MerchantRequestID] => 5998-46a7-a4aa-5a37a83f21ad13876
    [CheckoutRequestID] => ws_CO_03102025173029292114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-10-03 17:30:27] STK Push successful! CheckoutRequestID: ws_CO_03102025173029292114669532
[2025-10-03 17:30:27] MerchantRequestID: 5998-46a7-a4aa-5a37a83f21ad13876
[2025-10-03 17:30:27] Transaction details saved to database with ID: 74
[2025-10-03 17:30:27] Sending successful response to client
[2025-10-04 00:53:21] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-04 00:53:21] POST data: Array
(
    [reseller_id] => 6
    [router_id] => 15
    [package_name] => 1Hr Konnect
    [package_price] => 1.00
    [package_id] => 15
    [payment_gateway] => till
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-04 00:53:21] Form data received: {"resellerId":6,"packageName":"1Hr Konnect","packagePrice":"1.00","mpesaNumber":"254114669532","packageId":15,"routerId":15}
[2025-10-04 00:53:21] Formatted phone number: 254114669532
[2025-10-04 00:53:21] WARNING: Amount less than 10 KES. Setting to minimum 10 KES for sandbox testing.
[2025-10-04 00:53:21] Validated amount: 10
[2025-10-04 00:53:21] Generating access token...
[2025-10-04 00:53:21] Access token response: {
            "access_token": "ERyxRxPu04YAlDwwHebTVa10AHgm",
            "expires_in": "3599"
        }
        
[2025-10-04 00:53:21] Access token generated successfully: ERyxRxPu04...
[2025-10-04 01:53:21] Using callback URL from reseller settings: https://fd7f49c64822.ngrok-free.app/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-04 01:53:21] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-04 01:53:21] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUxMDA0MDE1MzIx",
    "Timestamp": "20251004015321",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 10,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/fd7f49c64822.ngrok-free.app\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for 1Hr Konnect"
}
[2025-10-04 01:53:21] Sending STK Push request
[2025-10-04 01:53:22] STK Push response: {
            "MerchantRequestID":"5998-46a7-a4aa-5a37a83f21ad18525",
            "CheckoutRequestID":"ws_CO_04102025015322727114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-10-04 01:53:22] HTTP status code: 200
[2025-10-04 01:53:22] Request took 0.876644 seconds
[2025-10-04 01:53:22] Response data: stdClass Object
(
    [MerchantRequestID] => 5998-46a7-a4aa-5a37a83f21ad18525
    [CheckoutRequestID] => ws_CO_04102025015322727114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-10-04 01:53:22] STK Push successful! CheckoutRequestID: ws_CO_04102025015322727114669532
[2025-10-04 01:53:22] MerchantRequestID: 5998-46a7-a4aa-5a37a83f21ad18525
[2025-10-04 01:53:22] Transaction details saved to database with ID: 75
[2025-10-04 01:53:22] Sending successful response to client
[2025-10-04 00:56:44] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-04 00:56:44] POST data: Array
(
    [reseller_id] => 6
    [package_name] => Test Package
    [package_price] => 100
    [mpesa_number] => 254114669532
    [package_id] => 15
    [router_id] => 0
    [payment_gateway] => mpesa
)

[2025-10-04 00:56:44] Form data received: {"resellerId":6,"packageName":"Test Package","packagePrice":"100","mpesaNumber":"254114669532","packageId":15,"routerId":0}
[2025-10-04 00:56:44] Formatted phone number: 254114669532
[2025-10-04 00:56:44] Validated amount: 100
[2025-10-04 00:56:44] Generating access token...
[2025-10-04 00:56:44] Access token response: {
            "access_token": "rO8jhgtgE0KmovI3G2muuvncBz7r",
            "expires_in": "3599"
        }
        
[2025-10-04 00:56:44] Access token generated successfully: rO8jhgtgE0...
[2025-10-04 01:56:44] Using callback URL from reseller settings: https://fd7f49c64822.ngrok-free.app/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-04 01:56:44] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-04 01:56:44] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUxMDA0MDE1NjQ0",
    "Timestamp": "20251004015644",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 100,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/fd7f49c64822.ngrok-free.app\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for Test Package"
}
[2025-10-04 01:56:44] Sending STK Push request
[2025-10-04 01:56:45] STK Push response: {
            "MerchantRequestID":"5998-46a7-a4aa-5a37a83f21ad18546",
            "CheckoutRequestID":"ws_CO_04102025015645722114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-10-04 01:56:45] HTTP status code: 200
[2025-10-04 01:56:45] Request took 0.994736 seconds
[2025-10-04 01:56:45] Response data: stdClass Object
(
    [MerchantRequestID] => 5998-46a7-a4aa-5a37a83f21ad18546
    [CheckoutRequestID] => ws_CO_04102025015645722114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-10-04 01:56:45] STK Push successful! CheckoutRequestID: ws_CO_04102025015645722114669532
[2025-10-04 01:56:45] MerchantRequestID: 5998-46a7-a4aa-5a37a83f21ad18546
[2025-10-04 01:56:45] Transaction details saved to database with ID: 76
[2025-10-04 01:56:45] Sending successful response to client
[2025-10-04 01:09:42] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-04 01:09:42] POST data: Array
(
    [reseller_id] => 6
    [router_id] => 15
    [package_name] => 1Hr Konnect
    [package_price] => 1.00
    [package_id] => 15
    [payment_gateway] => till
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-04 01:09:42] Form data received: {"resellerId":6,"packageName":"1Hr Konnect","packagePrice":"1.00","mpesaNumber":"254114669532","packageId":15,"routerId":15}
[2025-10-04 01:09:42] Formatted phone number: 254114669532
[2025-10-04 01:09:42] WARNING: Amount less than 10 KES. Setting to minimum 10 KES for sandbox testing.
[2025-10-04 01:09:42] Validated amount: 10
[2025-10-04 01:09:42] Generating access token...
[2025-10-04 01:09:43] Access token response: {
            "access_token": "jzuTZCB4QIcwixwSv68AGBtuJkbE",
            "expires_in": "3599"
        }
        
[2025-10-04 01:09:43] Access token generated successfully: jzuTZCB4QI...
[2025-10-04 02:09:43] Using callback URL from reseller settings: https://fd7f49c64822.ngrok-free.app/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-04 02:09:43] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-04 02:09:43] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUxMDA0MDIwOTQz",
    "Timestamp": "20251004020943",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 10,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/fd7f49c64822.ngrok-free.app\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for 1Hr Konnect"
}
[2025-10-04 02:09:43] Sending STK Push request
[2025-10-04 02:09:44] STK Push response: {
            "MerchantRequestID":"8650-45d8-a15a-b8eb285d295a9174",
            "CheckoutRequestID":"ws_CO_04102025020944727114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-10-04 02:09:44] HTTP status code: 200
[2025-10-04 02:09:44] Request took 1.351602 seconds
[2025-10-04 02:09:44] Response data: stdClass Object
(
    [MerchantRequestID] => 8650-45d8-a15a-b8eb285d295a9174
    [CheckoutRequestID] => ws_CO_04102025020944727114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-10-04 02:09:44] STK Push successful! CheckoutRequestID: ws_CO_04102025020944727114669532
[2025-10-04 02:09:44] MerchantRequestID: 8650-45d8-a15a-b8eb285d295a9174
[2025-10-04 02:09:44] Transaction details saved to database with ID: 78
[2025-10-04 02:09:44] Sending successful response to client
[2025-10-04 01:46:28] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-04 01:46:28] POST data: Array
(
    [reseller_id] => 6
    [router_id] => 15
    [package_name] => 1Hr Konnect
    [package_price] => 1.00
    [package_id] => 15
    [payment_gateway] => till
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-04 01:46:28] Form data received: {"resellerId":6,"packageName":"1Hr Konnect","packagePrice":"1.00","mpesaNumber":"254114669532","packageId":15,"routerId":15}
[2025-10-04 01:46:28] Formatted phone number: 254114669532
[2025-10-04 01:46:28] WARNING: Amount less than 10 KES. Setting to minimum 10 KES for sandbox testing.
[2025-10-04 01:46:28] Validated amount: 10
[2025-10-04 01:46:28] Generating access token...
[2025-10-04 01:46:28] Access token response: {
            "access_token": "PZcKqLZCgjpPeOqDO0CeSJQR4CN7",
            "expires_in": "3599"
        }
        
[2025-10-04 01:46:28] Access token generated successfully: PZcKqLZCgj...
[2025-10-04 02:46:28] Using callback URL from reseller settings: https://fd7f49c64822.ngrok-free.app/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-04 02:46:28] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-04 02:46:28] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUxMDA0MDI0NjI4",
    "Timestamp": "20251004024628",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 10,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/fd7f49c64822.ngrok-free.app\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for 1Hr Konnect"
}
[2025-10-04 02:46:28] Sending STK Push request
[2025-10-04 02:46:29] STK Push response: {
            "MerchantRequestID":"8650-45d8-a15a-b8eb285d295a9419",
            "CheckoutRequestID":"ws_CO_04102025024629629114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-10-04 02:46:29] HTTP status code: 200
[2025-10-04 02:46:29] Request took 0.791196 seconds
[2025-10-04 02:46:29] Response data: stdClass Object
(
    [MerchantRequestID] => 8650-45d8-a15a-b8eb285d295a9419
    [CheckoutRequestID] => ws_CO_04102025024629629114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-10-04 02:46:29] STK Push successful! CheckoutRequestID: ws_CO_04102025024629629114669532
[2025-10-04 02:46:29] MerchantRequestID: 8650-45d8-a15a-b8eb285d295a9419
[2025-10-04 02:46:29] Transaction details saved to database with ID: 80
[2025-10-04 02:46:29] Sending successful response to client
[2025-10-04 02:17:30] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-04 02:17:30] POST data: Array
(
    [reseller_id] => 6
    [router_id] => 15
    [package_name] => 1Hr Konnect
    [package_price] => 1.00
    [package_id] => 15
    [payment_gateway] => till
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-04 02:17:30] Form data received: {"resellerId":6,"packageName":"1Hr Konnect","packagePrice":"1.00","mpesaNumber":"254114669532","packageId":15,"routerId":15}
[2025-10-04 02:17:30] Formatted phone number: 254114669532
[2025-10-04 02:17:30] WARNING: Amount less than 10 KES. Setting to minimum 10 KES for sandbox testing.
[2025-10-04 02:17:30] Validated amount: 10
[2025-10-04 02:17:30] Generating access token...
[2025-10-04 02:17:30] Access token response: {
            "access_token": "N9sPrtLNqXmsF4wImwAFl8eIznJB",
            "expires_in": "3599"
        }
        
[2025-10-04 02:17:30] Access token generated successfully: N9sPrtLNqX...
[2025-10-04 03:17:30] Using callback URL from reseller settings: https://fd7f49c64822.ngrok-free.app/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-04 03:17:30] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-04 03:17:30] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUxMDA0MDMxNzMw",
    "Timestamp": "20251004031730",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 10,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/fd7f49c64822.ngrok-free.app\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for 1Hr Konnect"
}
[2025-10-04 03:17:30] Sending STK Push request
[2025-10-04 03:17:31] STK Push response: {
            "MerchantRequestID":"5998-46a7-a4aa-5a37a83f21ad19395",
            "CheckoutRequestID":"ws_CO_04102025031731867114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-10-04 03:17:31] HTTP status code: 200
[2025-10-04 03:17:31] Request took 0.937027 seconds
[2025-10-04 03:17:31] Response data: stdClass Object
(
    [MerchantRequestID] => 5998-46a7-a4aa-5a37a83f21ad19395
    [CheckoutRequestID] => ws_CO_04102025031731867114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-10-04 03:17:31] STK Push successful! CheckoutRequestID: ws_CO_04102025031731867114669532
[2025-10-04 03:17:31] MerchantRequestID: 5998-46a7-a4aa-5a37a83f21ad19395
[2025-10-04 03:17:31] Transaction details saved to database with ID: 81
[2025-10-04 03:17:31] Sending successful response to client
[2025-10-04 02:19:28] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-04 02:19:28] POST data: Array
(
    [reseller_id] => 6
    [router_id] => 15
    [package_name] => 1Hr Konnect
    [package_price] => 1.00
    [package_id] => 15
    [payment_gateway] => till
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-04 02:19:28] Form data received: {"resellerId":6,"packageName":"1Hr Konnect","packagePrice":"1.00","mpesaNumber":"254114669532","packageId":15,"routerId":15}
[2025-10-04 02:19:28] Formatted phone number: 254114669532
[2025-10-04 02:19:28] WARNING: Amount less than 10 KES. Setting to minimum 10 KES for sandbox testing.
[2025-10-04 02:19:28] Validated amount: 10
[2025-10-04 02:19:28] Generating access token...
[2025-10-04 02:19:29] Access token response: {
            "access_token": "whKkSjcUF2xBlLQGGVRfYif9BSqA",
            "expires_in": "3599"
        }
        
[2025-10-04 02:19:29] Access token generated successfully: whKkSjcUF2...
[2025-10-04 03:19:29] Using callback URL from reseller settings: https://fd7f49c64822.ngrok-free.app/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-04 03:19:29] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-04 03:19:29] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUxMDA0MDMxOTI5",
    "Timestamp": "20251004031929",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 10,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/fd7f49c64822.ngrok-free.app\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for 1Hr Konnect"
}
[2025-10-04 03:19:29] Sending STK Push request
[2025-10-04 03:19:30] STK Push response: {
            "MerchantRequestID":"2e9c-429c-a95c-b4cd653531a312671",
            "CheckoutRequestID":"ws_CO_04102025031930468114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-10-04 03:19:30] HTTP status code: 200
[2025-10-04 03:19:30] Request took 0.872889 seconds
[2025-10-04 03:19:30] Response data: stdClass Object
(
    [MerchantRequestID] => 2e9c-429c-a95c-b4cd653531a312671
    [CheckoutRequestID] => ws_CO_04102025031930468114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-10-04 03:19:30] STK Push successful! CheckoutRequestID: ws_CO_04102025031930468114669532
[2025-10-04 03:19:30] MerchantRequestID: 2e9c-429c-a95c-b4cd653531a312671
[2025-10-04 03:19:32] Transaction details saved to database with ID: 82
[2025-10-04 03:19:32] Sending successful response to client
[2025-10-04 02:20:45] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-04 02:20:45] POST data: Array
(
    [reseller_id] => 6
    [router_id] => 15
    [package_name] => 1Hr Konnect
    [package_price] => 1.00
    [package_id] => 15
    [payment_gateway] => till
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-04 02:20:45] Form data received: {"resellerId":6,"packageName":"1Hr Konnect","packagePrice":"1.00","mpesaNumber":"254114669532","packageId":15,"routerId":15}
[2025-10-04 02:20:45] Formatted phone number: 254114669532
[2025-10-04 02:20:45] WARNING: Amount less than 10 KES. Setting to minimum 10 KES for sandbox testing.
[2025-10-04 02:20:45] Validated amount: 10
[2025-10-04 02:20:45] Generating access token...
[2025-10-04 02:20:45] Access token response: {
            "access_token": "9iLtFyllno0paACF0kIfJ5ZkDdJ7",
            "expires_in": "3599"
        }
        
[2025-10-04 02:20:45] Access token generated successfully: 9iLtFyllno...
[2025-10-04 03:20:45] Using callback URL from reseller settings: https://fd7f49c64822.ngrok-free.app/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-04 03:20:45] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-04 03:20:45] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUxMDA0MDMyMDQ1",
    "Timestamp": "20251004032045",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 10,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/fd7f49c64822.ngrok-free.app\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for 1Hr Konnect"
}
[2025-10-04 03:20:45] Sending STK Push request
[2025-10-04 03:20:46] STK Push response: {
            "MerchantRequestID":"ec67-43aa-9362-0f167cc2e9de6962",
            "CheckoutRequestID":"ws_CO_04102025032046779114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-10-04 03:20:46] HTTP status code: 200
[2025-10-04 03:20:46] Request took 1.055458 seconds
[2025-10-04 03:20:46] Response data: stdClass Object
(
    [MerchantRequestID] => ec67-43aa-9362-0f167cc2e9de6962
    [CheckoutRequestID] => ws_CO_04102025032046779114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-10-04 03:20:46] STK Push successful! CheckoutRequestID: ws_CO_04102025032046779114669532
[2025-10-04 03:20:46] MerchantRequestID: ec67-43aa-9362-0f167cc2e9de6962
[2025-10-04 03:20:46] Transaction details saved to database with ID: 83
[2025-10-04 03:20:46] Sending successful response to client
[2025-10-04 02:43:45] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-04 02:43:45] POST data: Array
(
    [reseller_id] => 6
    [router_id] => 15
    [package_name] => 1Hr Konnect
    [package_price] => 1.00
    [package_id] => 15
    [payment_gateway] => till
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-04 02:43:45] Form data received: {"resellerId":6,"packageName":"1Hr Konnect","packagePrice":"1.00","mpesaNumber":"254114669532","packageId":15,"routerId":15}
[2025-10-04 02:43:45] Formatted phone number: 254114669532
[2025-10-04 02:43:45] WARNING: Amount less than 10 KES. Setting to minimum 10 KES for sandbox testing.
[2025-10-04 02:43:45] Validated amount: 10
[2025-10-04 02:43:45] Generating access token...
[2025-10-04 02:43:46] Access token response: {
            "access_token": "BoHSpcUKGiYJ2ngdkxLKAJP5zsTx",
            "expires_in": "3599"
        }
        
[2025-10-04 02:43:46] Access token generated successfully: BoHSpcUKGi...
[2025-10-04 03:43:46] Using callback URL from reseller settings: https://fd7f49c64822.ngrok-free.app/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-04 03:43:46] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-04 03:43:46] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUxMDA0MDM0MzQ2",
    "Timestamp": "20251004034346",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 10,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/fd7f49c64822.ngrok-free.app\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for 1Hr Konnect"
}
[2025-10-04 03:43:46] Sending STK Push request
[2025-10-04 03:43:47] STK Push response: {
            "MerchantRequestID":"2e9c-429c-a95c-b4cd653531a312845",
            "CheckoutRequestID":"ws_CO_04102025034347411114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-10-04 03:43:47] HTTP status code: 200
[2025-10-04 03:43:47] Request took 0.842167 seconds
[2025-10-04 03:43:47] Response data: stdClass Object
(
    [MerchantRequestID] => 2e9c-429c-a95c-b4cd653531a312845
    [CheckoutRequestID] => ws_CO_04102025034347411114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-10-04 03:43:47] STK Push successful! CheckoutRequestID: ws_CO_04102025034347411114669532
[2025-10-04 03:43:47] MerchantRequestID: 2e9c-429c-a95c-b4cd653531a312845
[2025-10-04 03:43:47] Transaction details saved to database with ID: 84
[2025-10-04 03:43:47] Sending successful response to client
[2025-10-04 02:49:04] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-04 02:49:04] POST data: Array
(
    [reseller_id] => 6
    [router_id] => 15
    [package_name] => 1Hr Konnect
    [package_price] => 1.00
    [package_id] => 15
    [payment_gateway] => till
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-04 02:49:04] Form data received: {"resellerId":6,"packageName":"1Hr Konnect","packagePrice":"1.00","mpesaNumber":"254114669532","packageId":15,"routerId":15}
[2025-10-04 02:49:04] Formatted phone number: 254114669532
[2025-10-04 02:49:04] WARNING: Amount less than 10 KES. Setting to minimum 10 KES for sandbox testing.
[2025-10-04 02:49:04] Validated amount: 10
[2025-10-04 02:49:04] Generating access token...
[2025-10-04 02:49:04] Access token response: {
            "access_token": "iPZD52iYHPi0MSSHaduzWkepiFVG",
            "expires_in": "3599"
        }
        
[2025-10-04 02:49:04] Access token generated successfully: iPZD52iYHP...
[2025-10-04 03:49:04] Using callback URL from reseller settings: https://fd7f49c64822.ngrok-free.app/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-04 03:49:04] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-04 03:49:04] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUxMDA0MDM0OTA0",
    "Timestamp": "20251004034904",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 10,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/fd7f49c64822.ngrok-free.app\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for 1Hr Konnect"
}
[2025-10-04 03:49:04] Sending STK Push request
[2025-10-04 03:49:05] STK Push response: {
            "MerchantRequestID":"2e9c-429c-a95c-b4cd653531a312894",
            "CheckoutRequestID":"ws_CO_04102025034905596114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-10-04 03:49:05] HTTP status code: 200
[2025-10-04 03:49:05] Request took 0.640926 seconds
[2025-10-04 03:49:05] Response data: stdClass Object
(
    [MerchantRequestID] => 2e9c-429c-a95c-b4cd653531a312894
    [CheckoutRequestID] => ws_CO_04102025034905596114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-10-04 03:49:05] STK Push successful! CheckoutRequestID: ws_CO_04102025034905596114669532
[2025-10-04 03:49:05] MerchantRequestID: 2e9c-429c-a95c-b4cd653531a312894
[2025-10-04 03:49:05] Transaction details saved to database with ID: 85
[2025-10-04 03:49:05] Sending successful response to client
[2025-10-04 03:00:26] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-04 03:00:26] POST data: Array
(
    [reseller_id] => 6
    [router_id] => 15
    [package_name] => 1Hr Konnect
    [package_price] => 1.00
    [package_id] => 15
    [payment_gateway] => till
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-04 03:00:26] Form data received: {"resellerId":6,"packageName":"1Hr Konnect","packagePrice":"1.00","mpesaNumber":"254114669532","packageId":15,"routerId":15}
[2025-10-04 03:00:26] Formatted phone number: 254114669532
[2025-10-04 03:00:26] WARNING: Amount less than 10 KES. Setting to minimum 10 KES for sandbox testing.
[2025-10-04 03:00:26] Validated amount: 10
[2025-10-04 03:00:26] Generating access token...
[2025-10-04 03:00:27] Access token response: {
            "access_token": "5X5wAX2WcqxqVFce1Ux0TCV0MDt9",
            "expires_in": "3599"
        }
        
[2025-10-04 03:00:27] Access token generated successfully: 5X5wAX2Wcq...
[2025-10-04 04:00:27] Using callback URL from reseller settings: https://fd7f49c64822.ngrok-free.app/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-04 04:00:27] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-04 04:00:27] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUxMDA0MDQwMDI3",
    "Timestamp": "20251004040027",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 10,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/fd7f49c64822.ngrok-free.app\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for 1Hr Konnect"
}
[2025-10-04 04:00:27] Sending STK Push request
[2025-10-04 04:00:27] STK Push response: {
            "MerchantRequestID":"ec67-43aa-9362-0f167cc2e9de7360",
            "CheckoutRequestID":"ws_CO_04102025040028128114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-10-04 04:00:27] HTTP status code: 200
[2025-10-04 04:00:27] Request took 0.806421 seconds
[2025-10-04 04:00:27] Response data: stdClass Object
(
    [MerchantRequestID] => ec67-43aa-9362-0f167cc2e9de7360
    [CheckoutRequestID] => ws_CO_04102025040028128114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-10-04 04:00:27] STK Push successful! CheckoutRequestID: ws_CO_04102025040028128114669532
[2025-10-04 04:00:27] MerchantRequestID: ec67-43aa-9362-0f167cc2e9de7360
[2025-10-04 04:00:27] Transaction details saved to database with ID: 86
[2025-10-04 04:00:27] Sending successful response to client
[2025-10-04 03:01:13] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-04 03:01:13] POST data: Array
(
    [reseller_id] => 6
    [router_id] => 15
    [package_name] => 1Hr Konnect
    [package_price] => 1.00
    [package_id] => 15
    [payment_gateway] => till
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-04 03:01:13] Form data received: {"resellerId":6,"packageName":"1Hr Konnect","packagePrice":"1.00","mpesaNumber":"254114669532","packageId":15,"routerId":15}
[2025-10-04 03:01:13] Formatted phone number: 254114669532
[2025-10-04 03:01:13] WARNING: Amount less than 10 KES. Setting to minimum 10 KES for sandbox testing.
[2025-10-04 03:01:13] Validated amount: 10
[2025-10-04 03:01:13] Generating access token...
[2025-10-04 03:01:15] Access token response: {
            "access_token": "w8R34lzvpN2vaGYtXpmzqZLJmEB2",
            "expires_in": "3599"
        }
        
[2025-10-04 03:01:15] Access token generated successfully: w8R34lzvpN...
[2025-10-04 04:01:15] Using callback URL from reseller settings: https://fd7f49c64822.ngrok-free.app/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-04 04:01:15] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-04 04:01:15] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUxMDA0MDQwMTE1",
    "Timestamp": "20251004040115",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 10,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/fd7f49c64822.ngrok-free.app\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for 1Hr Konnect"
}
[2025-10-04 04:01:15] Sending STK Push request
[2025-10-04 04:01:16] STK Push response: {
            "MerchantRequestID":"2e9c-429c-a95c-b4cd653531a312991",
            "CheckoutRequestID":"ws_CO_04102025040116382114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-10-04 04:01:16] HTTP status code: 200
[2025-10-04 04:01:16] Request took 0.853536 seconds
[2025-10-04 04:01:16] Response data: stdClass Object
(
    [MerchantRequestID] => 2e9c-429c-a95c-b4cd653531a312991
    [CheckoutRequestID] => ws_CO_04102025040116382114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-10-04 04:01:16] STK Push successful! CheckoutRequestID: ws_CO_04102025040116382114669532
[2025-10-04 04:01:16] MerchantRequestID: 2e9c-429c-a95c-b4cd653531a312991
[2025-10-04 04:01:16] Transaction details saved to database with ID: 87
[2025-10-04 04:01:16] Sending successful response to client
[2025-10-04 03:01:52] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-04 03:01:52] POST data: Array
(
    [reseller_id] => 6
    [router_id] => 15
    [package_name] => 1Hr Konnect
    [package_price] => 1.00
    [package_id] => 15
    [payment_gateway] => till
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-04 03:01:52] Form data received: {"resellerId":6,"packageName":"1Hr Konnect","packagePrice":"1.00","mpesaNumber":"254114669532","packageId":15,"routerId":15}
[2025-10-04 03:01:52] Formatted phone number: 254114669532
[2025-10-04 03:01:52] WARNING: Amount less than 10 KES. Setting to minimum 10 KES for sandbox testing.
[2025-10-04 03:01:52] Validated amount: 10
[2025-10-04 03:01:52] Generating access token...
[2025-10-04 03:01:53] Access token response: {
            "access_token": "E8z7O5lTINouYzLvKBKfaGfzKBtl",
            "expires_in": "3599"
        }
        
[2025-10-04 03:01:53] Access token generated successfully: E8z7O5lTIN...
[2025-10-04 04:01:53] Using callback URL from reseller settings: https://fd7f49c64822.ngrok-free.app/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-04 04:01:53] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-04 04:01:53] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUxMDA0MDQwMTUz",
    "Timestamp": "20251004040153",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 10,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/fd7f49c64822.ngrok-free.app\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for 1Hr Konnect"
}
[2025-10-04 04:01:53] Sending STK Push request
[2025-10-04 04:01:54] STK Push response: {
            "MerchantRequestID":"2e9c-429c-a95c-b4cd653531a312996",
            "CheckoutRequestID":"ws_CO_04102025040154299114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-10-04 04:01:54] HTTP status code: 200
[2025-10-04 04:01:54] Request took 0.845316 seconds
[2025-10-04 04:01:54] Response data: stdClass Object
(
    [MerchantRequestID] => 2e9c-429c-a95c-b4cd653531a312996
    [CheckoutRequestID] => ws_CO_04102025040154299114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-10-04 04:01:54] STK Push successful! CheckoutRequestID: ws_CO_04102025040154299114669532
[2025-10-04 04:01:54] MerchantRequestID: 2e9c-429c-a95c-b4cd653531a312996
[2025-10-04 04:01:54] Transaction details saved to database with ID: 88
[2025-10-04 04:01:54] Sending successful response to client
[2025-10-04 03:02:25] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-04 03:02:25] POST data: Array
(
    [reseller_id] => 6
    [router_id] => 15
    [package_name] => 1Hr Konnect
    [package_price] => 1.00
    [package_id] => 15
    [payment_gateway] => till
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-04 03:02:25] Form data received: {"resellerId":6,"packageName":"1Hr Konnect","packagePrice":"1.00","mpesaNumber":"254114669532","packageId":15,"routerId":15}
[2025-10-04 03:02:25] Formatted phone number: 254114669532
[2025-10-04 03:02:25] WARNING: Amount less than 10 KES. Setting to minimum 10 KES for sandbox testing.
[2025-10-04 03:02:25] Validated amount: 10
[2025-10-04 03:02:25] Generating access token...
[2025-10-04 03:02:25] Access token response: {
            "access_token": "rEwFxIGNhGHBXorjWJXL7GIFCLse",
            "expires_in": "3599"
        }
        
[2025-10-04 03:02:25] Access token generated successfully: rEwFxIGNhG...
[2025-10-04 04:02:25] Using callback URL from reseller settings: https://fd7f49c64822.ngrok-free.app/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-04 04:02:25] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-04 04:02:25] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUxMDA0MDQwMjI1",
    "Timestamp": "20251004040225",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 10,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/fd7f49c64822.ngrok-free.app\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for 1Hr Konnect"
}
[2025-10-04 04:02:25] Sending STK Push request
[2025-10-04 04:02:26] STK Push response: {
            "MerchantRequestID":"2e9c-429c-a95c-b4cd653531a313000",
            "CheckoutRequestID":"ws_CO_04102025040227159114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-10-04 04:02:26] HTTP status code: 200
[2025-10-04 04:02:26] Request took 1.075308 seconds
[2025-10-04 04:02:26] Response data: stdClass Object
(
    [MerchantRequestID] => 2e9c-429c-a95c-b4cd653531a313000
    [CheckoutRequestID] => ws_CO_04102025040227159114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-10-04 04:02:26] STK Push successful! CheckoutRequestID: ws_CO_04102025040227159114669532
[2025-10-04 04:02:26] MerchantRequestID: 2e9c-429c-a95c-b4cd653531a313000
[2025-10-04 04:02:26] Transaction details saved to database with ID: 89
[2025-10-04 04:02:26] Sending successful response to client
[2025-10-04 03:31:39] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-04 03:31:39] POST data: Array
(
    [reseller_id] => 6
    [router_id] => 15
    [package_name] => 1Hr Konnect
    [package_price] => 1.00
    [package_id] => 15
    [payment_gateway] => till
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-04 03:31:39] Form data received: {"resellerId":6,"packageName":"1Hr Konnect","packagePrice":"1.00","mpesaNumber":"254114669532","packageId":15,"routerId":15}
[2025-10-04 03:31:39] Formatted phone number: 254114669532
[2025-10-04 03:31:39] WARNING: Amount less than 10 KES. Setting to minimum 10 KES for sandbox testing.
[2025-10-04 03:31:39] Validated amount: 10
[2025-10-04 03:31:39] Generating access token...
[2025-10-04 03:31:39] Access token response: {
            "access_token": "m222q9QDhNMAKEcEmdaJXbUXds0B",
            "expires_in": "3599"
        }
        
[2025-10-04 03:31:39] Access token generated successfully: m222q9QDhN...
[2025-10-04 04:31:39] Using callback URL from reseller settings: https://fd7f49c64822.ngrok-free.app/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-04 04:31:39] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-04 04:31:39] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUxMDA0MDQzMTM5",
    "Timestamp": "20251004043139",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 10,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/fd7f49c64822.ngrok-free.app\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for 1Hr Konnect"
}
[2025-10-04 04:31:39] Sending STK Push request
[2025-10-04 04:31:40] STK Push response: {
            "MerchantRequestID":"ec67-43aa-9362-0f167cc2e9de7657",
            "CheckoutRequestID":"ws_CO_04102025043140951114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-10-04 04:31:40] HTTP status code: 200
[2025-10-04 04:31:40] Request took 0.83095 seconds
[2025-10-04 04:31:40] Response data: stdClass Object
(
    [MerchantRequestID] => ec67-43aa-9362-0f167cc2e9de7657
    [CheckoutRequestID] => ws_CO_04102025043140951114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-10-04 04:31:40] STK Push successful! CheckoutRequestID: ws_CO_04102025043140951114669532
[2025-10-04 04:31:40] MerchantRequestID: ec67-43aa-9362-0f167cc2e9de7657
[2025-10-04 04:31:40] Transaction details saved to database with ID: 90
[2025-10-04 04:31:40] Sending successful response to client
[2025-10-04 03:42:14] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-04 03:42:14] POST data: Array
(
    [reseller_id] => 6
    [router_id] => 15
    [package_name] => 1Hr Konnect
    [package_price] => 1.00
    [package_id] => 15
    [payment_gateway] => till
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-04 03:42:14] Form data received: {"resellerId":6,"packageName":"1Hr Konnect","packagePrice":"1.00","mpesaNumber":"254114669532","packageId":15,"routerId":15}
[2025-10-04 03:42:14] Formatted phone number: 254114669532
[2025-10-04 03:42:14] WARNING: Amount less than 10 KES. Setting to minimum 10 KES for sandbox testing.
[2025-10-04 03:42:14] Validated amount: 10
[2025-10-04 03:42:14] Generating access token...
[2025-10-04 03:42:15] Access token response: {
            "access_token": "9IhdXL2odgYqXd83J1lj067A1caz",
            "expires_in": "3599"
        }
        
[2025-10-04 03:42:15] Access token generated successfully: 9IhdXL2odg...
[2025-10-04 04:42:15] Using callback URL from reseller settings: https://fd7f49c64822.ngrok-free.app/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-04 04:42:15] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-04 04:42:15] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUxMDA0MDQ0MjE1",
    "Timestamp": "20251004044215",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 10,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/fd7f49c64822.ngrok-free.app\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for 1Hr Konnect"
}
[2025-10-04 04:42:15] Sending STK Push request
[2025-10-04 04:42:16] STK Push response: {
            "MerchantRequestID":"2e9c-429c-a95c-b4cd653531a313325",
            "CheckoutRequestID":"ws_CO_04102025044216372114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-10-04 04:42:16] HTTP status code: 200
[2025-10-04 04:42:16] Request took 0.81299 seconds
[2025-10-04 04:42:16] Response data: stdClass Object
(
    [MerchantRequestID] => 2e9c-429c-a95c-b4cd653531a313325
    [CheckoutRequestID] => ws_CO_04102025044216372114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-10-04 04:42:16] STK Push successful! CheckoutRequestID: ws_CO_04102025044216372114669532
[2025-10-04 04:42:16] MerchantRequestID: 2e9c-429c-a95c-b4cd653531a313325
[2025-10-04 04:42:16] Transaction details saved to database with ID: 91
[2025-10-04 04:42:16] Sending successful response to client
[2025-10-04 03:45:45] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-04 03:45:45] POST data: Array
(
    [reseller_id] => 6
    [router_id] => 15
    [package_name] => 1Hr Konnect
    [package_price] => 1.00
    [package_id] => 15
    [payment_gateway] => till
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-04 03:45:45] Form data received: {"resellerId":6,"packageName":"1Hr Konnect","packagePrice":"1.00","mpesaNumber":"254114669532","packageId":15,"routerId":15}
[2025-10-04 03:45:45] Formatted phone number: 254114669532
[2025-10-04 03:45:45] WARNING: Amount less than 10 KES. Setting to minimum 10 KES for sandbox testing.
[2025-10-04 03:45:45] Validated amount: 10
[2025-10-04 03:45:45] Generating access token...
[2025-10-04 03:45:45] Access token response: {
            "access_token": "Zf6KTR6lLnaqiBlIGGhE6P4ybxIr",
            "expires_in": "3599"
        }
        
[2025-10-04 03:45:45] Access token generated successfully: Zf6KTR6lLn...
[2025-10-04 04:45:45] Using callback URL from reseller settings: https://fd7f49c64822.ngrok-free.app/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-04 04:45:45] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-04 04:45:45] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUxMDA0MDQ0NTQ1",
    "Timestamp": "20251004044545",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 10,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/fd7f49c64822.ngrok-free.app\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for 1Hr Konnect"
}
[2025-10-04 04:45:45] Sending STK Push request
[2025-10-04 04:45:46] STK Push response: {
            "MerchantRequestID":"ec67-43aa-9362-0f167cc2e9de7795",
            "CheckoutRequestID":"ws_CO_04102025044546954114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-10-04 04:45:46] HTTP status code: 200
[2025-10-04 04:45:46] Request took 0.817525 seconds
[2025-10-04 04:45:46] Response data: stdClass Object
(
    [MerchantRequestID] => ec67-43aa-9362-0f167cc2e9de7795
    [CheckoutRequestID] => ws_CO_04102025044546954114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-10-04 04:45:46] STK Push successful! CheckoutRequestID: ws_CO_04102025044546954114669532
[2025-10-04 04:45:46] MerchantRequestID: ec67-43aa-9362-0f167cc2e9de7795
[2025-10-04 04:45:46] Transaction details saved to database with ID: 92
[2025-10-04 04:45:46] Sending successful response to client
[2025-10-04 04:01:37] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-04 04:01:37] POST data: Array
(
    [reseller_id] => 6
    [router_id] => 15
    [package_name] => 1Hr Konnect
    [package_price] => 1.00
    [package_id] => 15
    [payment_gateway] => till
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-04 04:01:37] Form data received: {"resellerId":6,"packageName":"1Hr Konnect","packagePrice":"1.00","mpesaNumber":"254114669532","packageId":15,"routerId":15}
[2025-10-04 04:01:37] Formatted phone number: 254114669532
[2025-10-04 04:01:37] WARNING: Amount less than 10 KES. Setting to minimum 10 KES for sandbox testing.
[2025-10-04 04:01:37] Validated amount: 10
[2025-10-04 04:01:37] Generating access token...
[2025-10-04 04:01:38] Access token response: {
            "access_token": "UKlmTLlD8un2HdBzGpKlpjHGVqUN",
            "expires_in": "3599"
        }
        
[2025-10-04 04:01:38] Access token generated successfully: UKlmTLlD8u...
[2025-10-04 05:01:38] Using callback URL from reseller settings: https://fd7f49c64822.ngrok-free.app/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-04 05:01:38] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-04 05:01:38] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUxMDA0MDUwMTM4",
    "Timestamp": "20251004050138",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 10,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/fd7f49c64822.ngrok-free.app\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for 1Hr Konnect"
}
[2025-10-04 05:01:38] Sending STK Push request
[2025-10-04 05:01:38] STK Push response: {
            "MerchantRequestID":"2e9c-429c-a95c-b4cd653531a313458",
            "CheckoutRequestID":"ws_CO_04102025050139137114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-10-04 05:01:38] HTTP status code: 200
[2025-10-04 05:01:38] Request took 0.692833 seconds
[2025-10-04 05:01:38] Response data: stdClass Object
(
    [MerchantRequestID] => 2e9c-429c-a95c-b4cd653531a313458
    [CheckoutRequestID] => ws_CO_04102025050139137114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-10-04 05:01:38] STK Push successful! CheckoutRequestID: ws_CO_04102025050139137114669532
[2025-10-04 05:01:38] MerchantRequestID: 2e9c-429c-a95c-b4cd653531a313458
[2025-10-04 05:01:38] Transaction details saved to database with ID: 93
[2025-10-04 05:01:38] Sending successful response to client
[2025-10-04 04:11:43] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-04 04:11:43] POST data: Array
(
    [reseller_id] => 6
    [router_id] => 15
    [package_name] => 1Hr Konnect
    [package_price] => 1.00
    [package_id] => 15
    [payment_gateway] => till
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-04 04:11:43] Form data received: {"resellerId":6,"packageName":"1Hr Konnect","packagePrice":"1.00","mpesaNumber":"254114669532","packageId":15,"routerId":15}
[2025-10-04 04:11:43] Formatted phone number: 254114669532
[2025-10-04 04:11:43] WARNING: Amount less than 10 KES. Setting to minimum 10 KES for sandbox testing.
[2025-10-04 04:11:43] Validated amount: 10
[2025-10-04 04:11:43] Generating access token...
[2025-10-04 04:11:44] Access token response: {
            "access_token": "qTkFRfTriWp5cRAbAe8JSEH1nTVU",
            "expires_in": "3599"
        }
        
[2025-10-04 04:11:44] Access token generated successfully: qTkFRfTriW...
[2025-10-04 05:11:44] Using callback URL from reseller settings: https://fd7f49c64822.ngrok-free.app/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-04 05:11:44] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-04 05:11:44] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUxMDA0MDUxMTQ0",
    "Timestamp": "20251004051144",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 10,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/fd7f49c64822.ngrok-free.app\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for 1Hr Konnect"
}
[2025-10-04 05:11:44] Sending STK Push request
[2025-10-04 05:11:45] STK Push response: {
            "MerchantRequestID":"ec67-43aa-9362-0f167cc2e9de8053",
            "CheckoutRequestID":"ws_CO_04102025051145417114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-10-04 05:11:45] HTTP status code: 200
[2025-10-04 05:11:45] Request took 0.867792 seconds
[2025-10-04 05:11:45] Response data: stdClass Object
(
    [MerchantRequestID] => ec67-43aa-9362-0f167cc2e9de8053
    [CheckoutRequestID] => ws_CO_04102025051145417114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-10-04 05:11:45] STK Push successful! CheckoutRequestID: ws_CO_04102025051145417114669532
[2025-10-04 05:11:45] MerchantRequestID: ec67-43aa-9362-0f167cc2e9de8053
[2025-10-04 05:11:45] Transaction details saved to database with ID: 94
[2025-10-04 05:11:45] Sending successful response to client
[2025-10-04 04:14:53] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-04 04:14:53] POST data: Array
(
    [reseller_id] => 6
    [router_id] => 15
    [package_name] => 1Hr Konnect
    [package_price] => 1.00
    [package_id] => 15
    [payment_gateway] => till
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-04 04:14:53] Form data received: {"resellerId":6,"packageName":"1Hr Konnect","packagePrice":"1.00","mpesaNumber":"254114669532","packageId":15,"routerId":15}
[2025-10-04 04:14:53] Formatted phone number: 254114669532
[2025-10-04 04:14:53] WARNING: Amount less than 10 KES. Setting to minimum 10 KES for sandbox testing.
[2025-10-04 04:14:53] Validated amount: 10
[2025-10-04 04:14:53] Generating access token...
[2025-10-04 04:14:54] Access token response: {
            "access_token": "rQR79D5EeAFevGMAZ9u0tDoIPEm2",
            "expires_in": "3599"
        }
        
[2025-10-04 04:14:54] Access token generated successfully: rQR79D5EeA...
[2025-10-04 05:14:54] Using callback URL from reseller settings: https://fd7f49c64822.ngrok-free.app/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-04 05:14:54] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-04 05:14:54] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUxMDA0MDUxNDU0",
    "Timestamp": "20251004051454",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 10,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/fd7f49c64822.ngrok-free.app\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for 1Hr Konnect"
}
[2025-10-04 05:14:54] Sending STK Push request
[2025-10-04 05:14:54] STK Push response: {
            "MerchantRequestID":"8650-45d8-a15a-b8eb285d295a10619",
            "CheckoutRequestID":"ws_CO_04102025051455428114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-10-04 05:14:55] HTTP status code: 200
[2025-10-04 05:14:55] Request took 0.903843 seconds
[2025-10-04 05:14:55] Response data: stdClass Object
(
    [MerchantRequestID] => 8650-45d8-a15a-b8eb285d295a10619
    [CheckoutRequestID] => ws_CO_04102025051455428114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-10-04 05:14:55] STK Push successful! CheckoutRequestID: ws_CO_04102025051455428114669532
[2025-10-04 05:14:55] MerchantRequestID: 8650-45d8-a15a-b8eb285d295a10619
[2025-10-04 05:14:55] Transaction details saved to database with ID: 95
[2025-10-04 05:14:55] Sending successful response to client
[2025-10-04 04:50:08] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-04 04:50:08] POST data: Array
(
    [reseller_id] => 6
    [router_id] => 15
    [package_name] => 1Hr Konnect
    [package_price] => 1.00
    [package_id] => 15
    [payment_gateway] => till
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-04 04:50:08] Form data received: {"resellerId":6,"packageName":"1Hr Konnect","packagePrice":"1.00","mpesaNumber":"254114669532","packageId":15,"routerId":15}
[2025-10-04 04:50:08] Formatted phone number: 254114669532
[2025-10-04 04:50:08] WARNING: Amount less than 10 KES. Setting to minimum 10 KES for sandbox testing.
[2025-10-04 04:50:08] Validated amount: 10
[2025-10-04 04:50:08] Generating access token...
[2025-10-04 04:50:09] Access token response: {
            "access_token": "PvkRY1kWtwnioz62GK7AwAaDkY14",
            "expires_in": "3599"
        }
        
[2025-10-04 04:50:09] Access token generated successfully: PvkRY1kWtw...
[2025-10-04 05:50:09] Using callback URL from reseller settings: https://fd7f49c64822.ngrok-free.app/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-04 05:50:09] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-04 05:50:09] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUxMDA0MDU1MDA5",
    "Timestamp": "20251004055009",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 10,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/fd7f49c64822.ngrok-free.app\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for 1Hr Konnect"
}
[2025-10-04 05:50:09] Sending STK Push request
[2025-10-04 05:50:10] STK Push response: {
            "MerchantRequestID":"2e9c-429c-a95c-b4cd653531a313890",
            "CheckoutRequestID":"ws_CO_04102025055010719114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-10-04 05:50:10] HTTP status code: 200
[2025-10-04 05:50:10] Request took 0.880667 seconds
[2025-10-04 05:50:10] Response data: stdClass Object
(
    [MerchantRequestID] => 2e9c-429c-a95c-b4cd653531a313890
    [CheckoutRequestID] => ws_CO_04102025055010719114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-10-04 05:50:10] STK Push successful! CheckoutRequestID: ws_CO_04102025055010719114669532
[2025-10-04 05:50:10] MerchantRequestID: 2e9c-429c-a95c-b4cd653531a313890
[2025-10-04 05:50:10] Transaction details saved to database with ID: 96
[2025-10-04 05:50:10] Sending successful response to client
[2025-10-04 05:02:33] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-04 05:02:33] POST data: Array
(
    [reseller_id] => 6
    [router_id] => 15
    [package_name] => 1Hr Konnect
    [package_price] => 1.00
    [package_id] => 15
    [payment_gateway] => till
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-04 05:02:33] Form data received: {"resellerId":6,"packageName":"1Hr Konnect","packagePrice":"1.00","mpesaNumber":"254114669532","packageId":15,"routerId":15}
[2025-10-04 05:02:33] Formatted phone number: 254114669532
[2025-10-04 05:02:33] WARNING: Amount less than 10 KES. Setting to minimum 10 KES for sandbox testing.
[2025-10-04 05:02:33] Validated amount: 10
[2025-10-04 05:02:33] Generating access token...
[2025-10-04 05:02:34] Access token response: {
            "access_token": "Gkx1gWxOfZlj3wODV7pNRIlFsezA",
            "expires_in": "3599"
        }
        
[2025-10-04 05:02:34] Access token generated successfully: Gkx1gWxOfZ...
[2025-10-04 06:02:34] Using callback URL from reseller settings: https://fd7f49c64822.ngrok-free.app/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-04 06:02:34] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-04 06:02:34] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUxMDA0MDYwMjM0",
    "Timestamp": "20251004060234",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 10,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/fd7f49c64822.ngrok-free.app\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for 1Hr Konnect"
}
[2025-10-04 06:02:34] Sending STK Push request
[2025-10-04 06:02:34] STK Push response: {
            "MerchantRequestID":"8650-45d8-a15a-b8eb285d295a10961",
            "CheckoutRequestID":"ws_CO_04102025060235499114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-10-04 06:02:34] HTTP status code: 200
[2025-10-04 06:02:34] Request took 0.683836 seconds
[2025-10-04 06:02:34] Response data: stdClass Object
(
    [MerchantRequestID] => 8650-45d8-a15a-b8eb285d295a10961
    [CheckoutRequestID] => ws_CO_04102025060235499114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-10-04 06:02:34] STK Push successful! CheckoutRequestID: ws_CO_04102025060235499114669532
[2025-10-04 06:02:34] MerchantRequestID: 8650-45d8-a15a-b8eb285d295a10961
[2025-10-04 06:02:34] Transaction details saved to database with ID: 97
[2025-10-04 06:02:34] Sending successful response to client
[2025-10-04 05:14:57] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-04 05:14:57] POST data: Array
(
    [reseller_id] => 6
    [router_id] => 15
    [package_name] => 1Hr Konnect
    [package_price] => 1.00
    [package_id] => 15
    [payment_gateway] => till
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-04 05:14:57] Form data received: {"resellerId":6,"packageName":"1Hr Konnect","packagePrice":"1.00","mpesaNumber":"254114669532","packageId":15,"routerId":15}
[2025-10-04 05:14:57] Formatted phone number: 254114669532
[2025-10-04 05:14:57] WARNING: Amount less than 10 KES. Setting to minimum 10 KES for sandbox testing.
[2025-10-04 05:14:57] Validated amount: 10
[2025-10-04 05:14:57] Generating access token...
[2025-10-04 05:14:58] Access token response: {
            "access_token": "3edULFoOpG5TuL0DaGmVpaAJF0fz",
            "expires_in": "3599"
        }
        
[2025-10-04 05:14:58] Access token generated successfully: 3edULFoOpG...
[2025-10-04 06:14:58] Using callback URL from reseller settings: https://fd7f49c64822.ngrok-free.app/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-04 06:14:58] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-04 06:14:58] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUxMDA0MDYxNDU4",
    "Timestamp": "20251004061458",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 10,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/fd7f49c64822.ngrok-free.app\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for 1Hr Konnect"
}
[2025-10-04 06:14:58] Sending STK Push request
[2025-10-04 06:14:59] STK Push response: {
            "MerchantRequestID":"5998-46a7-a4aa-5a37a83f21ad21064",
            "CheckoutRequestID":"ws_CO_04102025061459696114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-10-04 06:14:59] HTTP status code: 200
[2025-10-04 06:14:59] Request took 0.815568 seconds
[2025-10-04 06:14:59] Response data: stdClass Object
(
    [MerchantRequestID] => 5998-46a7-a4aa-5a37a83f21ad21064
    [CheckoutRequestID] => ws_CO_04102025061459696114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-10-04 06:14:59] STK Push successful! CheckoutRequestID: ws_CO_04102025061459696114669532
[2025-10-04 06:14:59] MerchantRequestID: 5998-46a7-a4aa-5a37a83f21ad21064
[2025-10-04 06:14:59] Transaction details saved to database with ID: 98
[2025-10-04 06:14:59] Sending successful response to client
[2025-10-04 05:20:03] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-04 05:20:03] POST data: Array
(
    [reseller_id] => 17
    [router_id] => 20
    [package_name] => Game Connect
    [package_price] => 5.00
    [package_id] => 31
    [payment_gateway] => till
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-04 05:20:03] Form data received: {"resellerId":17,"packageName":"Game Connect","packagePrice":"5.00","mpesaNumber":"254114669532","packageId":31,"routerId":20}
[2025-10-04 05:20:03] Formatted phone number: 254114669532
[2025-10-04 05:20:03] WARNING: Amount less than 10 KES. Setting to minimum 10 KES for sandbox testing.
[2025-10-04 05:20:03] Validated amount: 10
[2025-10-04 05:20:03] Generating access token...
[2025-10-04 05:20:04] Access token response: {
            "access_token": "lgVtvGH3GXGTGJaMs7aaKjwyGVpw",
            "expires_in": "3599"
        }
        
[2025-10-04 05:20:04] Access token generated successfully: lgVtvGH3GX...
[2025-10-04 06:20:04] Using callback URL from reseller settings: https://13a2-197-136-202-10.ngrok-free.app/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-04 06:20:04] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-04 06:20:04] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5MDkwNDlhNmQ2MzY0NTk0NTA1ODNhMDdhZWY3MWNlNDI3ZjY5YTZlNzJmYzgzYjFlOWJkODFkYTQyODI5MmJhMTIwMjUxMDA0MDYyMDA0",
    "Timestamp": "20251004062004",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 10,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/13a2-197-136-202-10.ngrok-free.app\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for Game Connect"
}
[2025-10-04 06:20:04] Sending STK Push request
[2025-10-04 06:20:04] STK Push response: {
                    "requestId":"5998-46a7-a4aa-5a37a83f21ad21126",
                    "errorCode": "500.001.1001",
                    "errorMessage": "Wrong credentials"
                }
            
[2025-10-04 06:20:04] HTTP status code: 500
[2025-10-04 06:20:04] Request took 0.773813 seconds
[2025-10-04 06:20:05] Response data: stdClass Object
(
    [requestId] => 5998-46a7-a4aa-5a37a83f21ad21126
    [errorCode] => 500.001.1001
    [errorMessage] => Wrong credentials
)

[2025-10-04 06:20:05] STK Push failed: Wrong credentials
[2025-10-04 09:51:25] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-04 09:51:25] POST data: Array
(
    [reseller_id] => 17
    [router_id] => 20
    [package_name] => Game Connect
    [package_price] => 5.00
    [package_id] => 31
    [payment_gateway] => till
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-04 09:51:25] Form data received: {"resellerId":17,"packageName":"Game Connect","packagePrice":"5.00","mpesaNumber":"254114669532","packageId":31,"routerId":20}
[2025-10-04 09:51:25] Formatted phone number: 254114669532
[2025-10-04 09:51:25] WARNING: Amount less than 10 KES. Setting to minimum 10 KES for sandbox testing.
[2025-10-04 09:51:25] Validated amount: 10
[2025-10-04 09:51:25] Generating access token...
[2025-10-04 09:51:25] Access token response: {
            "access_token": "jnVeEffNW3Q1cz2ZP6OadhZr7qeZ",
            "expires_in": "3599"
        }
        
[2025-10-04 09:51:25] Access token generated successfully: jnVeEffNW3...
[2025-10-04 10:51:25] Using callback URL from reseller settings: https://13a2-197-136-202-10.ngrok-free.app/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-04 10:51:25] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-04 10:51:25] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5MDkwNDlhNmQ2MzY0NTk0NTA1ODNhMDdhZWY3MWNlNDI3ZjY5YTZlNzJmYzgzYjFlOWJkODFkYTQyODI5MmJhMTIwMjUxMDA0MTA1MTI1",
    "Timestamp": "20251004105125",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 10,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/13a2-197-136-202-10.ngrok-free.app\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for Game Connect"
}
[2025-10-04 10:51:25] Sending STK Push request
[2025-10-04 10:51:26] STK Push response: {
                    "requestId":"8650-45d8-a15a-b8eb285d295a13070",
                    "errorCode": "500.001.1001",
                    "errorMessage": "Wrong credentials"
                }
            
[2025-10-04 10:51:26] HTTP status code: 500
[2025-10-04 10:51:26] Request took 0.548388 seconds
[2025-10-04 10:51:26] Response data: stdClass Object
(
    [requestId] => 8650-45d8-a15a-b8eb285d295a13070
    [errorCode] => 500.001.1001
    [errorMessage] => Wrong credentials
)

[2025-10-04 10:51:26] STK Push failed: Wrong credentials
[2025-10-04 09:54:32] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-04 09:54:32] POST data: Array
(
    [reseller_id] => 6
    [router_id] => 15
    [package_name] => 1Hr Konnect
    [package_price] => 1.00
    [package_id] => 15
    [payment_gateway] => till
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-04 09:54:32] Form data received: {"resellerId":6,"packageName":"1Hr Konnect","packagePrice":"1.00","mpesaNumber":"254114669532","packageId":15,"routerId":15}
[2025-10-04 09:54:32] Formatted phone number: 254114669532
[2025-10-04 09:54:32] WARNING: Amount less than 10 KES. Setting to minimum 10 KES for sandbox testing.
[2025-10-04 09:54:32] Validated amount: 10
[2025-10-04 09:54:32] Generating access token...
[2025-10-04 09:54:32] Access token response: {
            "access_token": "UGIaBWQyqlueHDX2xrpYJf47wnLG",
            "expires_in": "3599"
        }
        
[2025-10-04 09:54:32] Access token generated successfully: UGIaBWQyql...
[2025-10-04 10:54:32] Using callback URL from reseller settings: https://fd7f49c64822.ngrok-free.app/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-04 10:54:32] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-04 10:54:32] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUxMDA0MTA1NDMy",
    "Timestamp": "20251004105432",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 10,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/fd7f49c64822.ngrok-free.app\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for 1Hr Konnect"
}
[2025-10-04 10:54:32] Sending STK Push request
[2025-10-04 10:54:33] STK Push response: {
            "MerchantRequestID":"ec67-43aa-9362-0f167cc2e9de11308",
            "CheckoutRequestID":"ws_CO_04102025105433877114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-10-04 10:54:33] HTTP status code: 200
[2025-10-04 10:54:33] Request took 1.009844 seconds
[2025-10-04 10:54:33] Response data: stdClass Object
(
    [MerchantRequestID] => ec67-43aa-9362-0f167cc2e9de11308
    [CheckoutRequestID] => ws_CO_04102025105433877114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-10-04 10:54:33] STK Push successful! CheckoutRequestID: ws_CO_04102025105433877114669532
[2025-10-04 10:54:33] MerchantRequestID: ec67-43aa-9362-0f167cc2e9de11308
[2025-10-04 10:54:33] Transaction details saved to database with ID: 99
[2025-10-04 10:54:33] Sending successful response to client
[2025-10-04 09:59:08] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-04 09:59:08] POST data: Array
(
    [reseller_id] => 6
    [router_id] => 15
    [package_name] => 1Hr Konnect
    [package_price] => 1.00
    [package_id] => 15
    [payment_gateway] => till
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-04 09:59:08] Form data received: {"resellerId":6,"packageName":"1Hr Konnect","packagePrice":"1.00","mpesaNumber":"254114669532","packageId":15,"routerId":15}
[2025-10-04 09:59:08] Formatted phone number: 254114669532
[2025-10-04 09:59:08] WARNING: Amount less than 10 KES. Setting to minimum 10 KES for sandbox testing.
[2025-10-04 09:59:08] Validated amount: 10
[2025-10-04 09:59:08] Generating access token...
[2025-10-04 09:59:09] Access token response: {
            "access_token": "2CKGfQAbz8AvGISaAIL2skN4EGlI",
            "expires_in": "3599"
        }
        
[2025-10-04 09:59:09] Access token generated successfully: 2CKGfQAbz8...
[2025-10-04 10:59:09] Using callback URL from reseller settings: https://fd7f49c64822.ngrok-free.app/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-04 10:59:09] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-04 10:59:09] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUxMDA0MTA1OTA5",
    "Timestamp": "20251004105909",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 10,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/fd7f49c64822.ngrok-free.app\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for 1Hr Konnect"
}
[2025-10-04 10:59:09] Sending STK Push request
[2025-10-04 10:59:10] STK Push response: {
            "MerchantRequestID":"5998-46a7-a4aa-5a37a83f21ad23850",
            "CheckoutRequestID":"ws_CO_04102025105910191114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-10-04 10:59:10] HTTP status code: 200
[2025-10-04 10:59:10] Request took 0.914231 seconds
[2025-10-04 10:59:10] Response data: stdClass Object
(
    [MerchantRequestID] => 5998-46a7-a4aa-5a37a83f21ad23850
    [CheckoutRequestID] => ws_CO_04102025105910191114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-10-04 10:59:10] STK Push successful! CheckoutRequestID: ws_CO_04102025105910191114669532
[2025-10-04 10:59:10] MerchantRequestID: 5998-46a7-a4aa-5a37a83f21ad23850
[2025-10-04 10:59:10] Transaction details saved to database with ID: 100
[2025-10-04 10:59:10] Sending successful response to client
[2025-10-04 10:10:36] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-04 10:10:36] POST data: Array
(
    [reseller_id] => 6
    [router_id] => 15
    [package_name] => 1Hr Konnect
    [package_price] => 1.00
    [package_id] => 15
    [payment_gateway] => till
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-04 10:10:36] Form data received: {"resellerId":6,"packageName":"1Hr Konnect","packagePrice":"1.00","mpesaNumber":"254114669532","packageId":15,"routerId":15}
[2025-10-04 10:10:36] Formatted phone number: 254114669532
[2025-10-04 10:10:36] WARNING: Amount less than 10 KES. Setting to minimum 10 KES for sandbox testing.
[2025-10-04 10:10:36] Validated amount: 10
[2025-10-04 10:10:36] Generating access token...
[2025-10-04 10:10:37] Access token response: {
            "access_token": "KkNqI5hHRs7xSDXUY6qCZN4kDrli",
            "expires_in": "3599"
        }
        
[2025-10-04 10:10:37] Access token generated successfully: KkNqI5hHRs...
[2025-10-04 11:10:37] Using callback URL from reseller settings: https://fd7f49c64822.ngrok-free.app/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-04 11:10:37] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-04 11:10:37] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUxMDA0MTExMDM3",
    "Timestamp": "20251004111037",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 10,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/fd7f49c64822.ngrok-free.app\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for 1Hr Konnect"
}
[2025-10-04 11:10:37] Sending STK Push request
[2025-10-04 11:10:38] STK Push response: {
            "MerchantRequestID":"8650-45d8-a15a-b8eb285d295a13288",
            "CheckoutRequestID":"ws_CO_04102025111038148114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-10-04 11:10:38] HTTP status code: 200
[2025-10-04 11:10:38] Request took 0.843216 seconds
[2025-10-04 11:10:38] Response data: stdClass Object
(
    [MerchantRequestID] => 8650-45d8-a15a-b8eb285d295a13288
    [CheckoutRequestID] => ws_CO_04102025111038148114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-10-04 11:10:38] STK Push successful! CheckoutRequestID: ws_CO_04102025111038148114669532
[2025-10-04 11:10:38] MerchantRequestID: 8650-45d8-a15a-b8eb285d295a13288
[2025-10-04 11:10:38] Transaction details saved to database with ID: 101
[2025-10-04 11:10:38] Sending successful response to client
[2025-10-04 10:11:31] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-04 10:11:31] POST data: Array
(
    [reseller_id] => 6
    [router_id] => 15
    [package_name] => 1Hr Konnect
    [package_price] => 1.00
    [package_id] => 15
    [payment_gateway] => till
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-04 10:11:31] Form data received: {"resellerId":6,"packageName":"1Hr Konnect","packagePrice":"1.00","mpesaNumber":"254114669532","packageId":15,"routerId":15}
[2025-10-04 10:11:31] Formatted phone number: 254114669532
[2025-10-04 10:11:31] WARNING: Amount less than 10 KES. Setting to minimum 10 KES for sandbox testing.
[2025-10-04 10:11:31] Validated amount: 10
[2025-10-04 10:11:31] Generating access token...
[2025-10-04 10:11:32] Access token response: {
            "access_token": "EFPC7n7F1zlOaFFmm6i2VwkfStjR",
            "expires_in": "3599"
        }
        
[2025-10-04 10:11:32] Access token generated successfully: EFPC7n7F1z...
[2025-10-04 11:11:32] Using callback URL from reseller settings: https://fd7f49c64822.ngrok-free.app/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-04 11:11:32] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-04 11:11:32] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUxMDA0MTExMTMy",
    "Timestamp": "20251004111132",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 10,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/fd7f49c64822.ngrok-free.app\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for 1Hr Konnect"
}
[2025-10-04 11:11:32] Sending STK Push request
[2025-10-04 11:11:32] STK Push response: {
            "MerchantRequestID":"8650-45d8-a15a-b8eb285d295a13295",
            "CheckoutRequestID":"ws_CO_04102025111132819114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-10-04 11:11:32] HTTP status code: 200
[2025-10-04 11:11:32] Request took 0.736156 seconds
[2025-10-04 11:11:32] Response data: stdClass Object
(
    [MerchantRequestID] => 8650-45d8-a15a-b8eb285d295a13295
    [CheckoutRequestID] => ws_CO_04102025111132819114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-10-04 11:11:32] STK Push successful! CheckoutRequestID: ws_CO_04102025111132819114669532
[2025-10-04 11:11:32] MerchantRequestID: 8650-45d8-a15a-b8eb285d295a13295
[2025-10-04 11:11:32] Transaction details saved to database with ID: 102
[2025-10-04 11:11:32] Sending successful response to client
[2025-10-04 10:14:05] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-04 10:14:05] POST data: Array
(
    [reseller_id] => 6
    [router_id] => 15
    [package_name] => 1Hr Konnect
    [package_price] => 1.00
    [package_id] => 15
    [payment_gateway] => till
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-04 10:14:05] Form data received: {"resellerId":6,"packageName":"1Hr Konnect","packagePrice":"1.00","mpesaNumber":"254114669532","packageId":15,"routerId":15}
[2025-10-04 10:14:05] Formatted phone number: 254114669532
[2025-10-04 10:14:05] WARNING: Amount less than 10 KES. Setting to minimum 10 KES for sandbox testing.
[2025-10-04 10:14:05] Validated amount: 10
[2025-10-04 10:14:05] Generating access token...
[2025-10-04 10:14:05] Access token response: {
            "access_token": "PqViqcAt8yNKgDNADKVa4wspukfG",
            "expires_in": "3599"
        }
        
[2025-10-04 10:14:05] Access token generated successfully: PqViqcAt8y...
[2025-10-04 11:14:05] Using callback URL from reseller settings: https://fd7f49c64822.ngrok-free.app/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-04 11:14:05] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-04 11:14:05] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUxMDA0MTExNDA1",
    "Timestamp": "20251004111405",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 10,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/fd7f49c64822.ngrok-free.app\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for 1Hr Konnect"
}
[2025-10-04 11:14:05] Sending STK Push request
[2025-10-04 11:14:06] STK Push response: {
            "MerchantRequestID":"2e9c-429c-a95c-b4cd653531a316458",
            "CheckoutRequestID":"ws_CO_04102025111406572114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-10-04 11:14:06] HTTP status code: 200
[2025-10-04 11:14:06] Request took 0.897872 seconds
[2025-10-04 11:14:06] Response data: stdClass Object
(
    [MerchantRequestID] => 2e9c-429c-a95c-b4cd653531a316458
    [CheckoutRequestID] => ws_CO_04102025111406572114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-10-04 11:14:06] STK Push successful! CheckoutRequestID: ws_CO_04102025111406572114669532
[2025-10-04 11:14:06] MerchantRequestID: 2e9c-429c-a95c-b4cd653531a316458
[2025-10-04 11:14:06] Transaction details saved to database with ID: 103
[2025-10-04 11:14:06] Sending successful response to client
[2025-10-04 10:42:34] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-04 10:42:34] POST data: Array
(
    [reseller_id] => 6
    [router_id] => 15
    [package_name] => 1Hr Konnect
    [package_price] => 1.00
    [package_id] => 15
    [payment_gateway] => till
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-04 10:42:34] Form data received: {"resellerId":6,"packageName":"1Hr Konnect","packagePrice":"1.00","mpesaNumber":"254114669532","packageId":15,"routerId":15}
[2025-10-04 10:42:34] Formatted phone number: 254114669532
[2025-10-04 10:42:34] WARNING: Amount less than 10 KES. Setting to minimum 10 KES for sandbox testing.
[2025-10-04 10:42:34] Validated amount: 10
[2025-10-04 10:42:34] Generating access token...
[2025-10-04 10:42:35] Access token response: {
            "access_token": "0ClUUk93tfgmwa7NTY56BE9StuSN",
            "expires_in": "3599"
        }
        
[2025-10-04 10:42:35] Access token generated successfully: 0ClUUk93tf...
[2025-10-04 11:42:35] Using callback URL from reseller settings: https://fd7f49c64822.ngrok-free.app/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-04 11:42:35] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-04 11:42:35] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUxMDA0MTE0MjM1",
    "Timestamp": "20251004114235",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 10,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/fd7f49c64822.ngrok-free.app\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for 1Hr Konnect"
}
[2025-10-04 11:42:35] Sending STK Push request
[2025-10-04 11:42:36] STK Push response: {
            "MerchantRequestID":"ec67-43aa-9362-0f167cc2e9de11823",
            "CheckoutRequestID":"ws_CO_04102025114236178114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-10-04 11:42:36] HTTP status code: 200
[2025-10-04 11:42:36] Request took 0.837416 seconds
[2025-10-04 11:42:36] Response data: stdClass Object
(
    [MerchantRequestID] => ec67-43aa-9362-0f167cc2e9de11823
    [CheckoutRequestID] => ws_CO_04102025114236178114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-10-04 11:42:36] STK Push successful! CheckoutRequestID: ws_CO_04102025114236178114669532
[2025-10-04 11:42:36] MerchantRequestID: ec67-43aa-9362-0f167cc2e9de11823
[2025-10-04 11:42:36] Transaction details saved to database with ID: 104
[2025-10-04 11:42:36] Sending successful response to client
[2025-10-04 11:38:45] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-04 11:38:45] POST data: Array
(
    [reseller_id] => 6
    [router_id] => 15
    [package_name] => 1Hr Konnect
    [package_price] => 1.00
    [package_id] => 15
    [payment_gateway] => till
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-04 11:38:45] Form data received: {"resellerId":6,"packageName":"1Hr Konnect","packagePrice":"1.00","mpesaNumber":"254114669532","packageId":15,"routerId":15}
[2025-10-04 11:38:45] Formatted phone number: 254114669532
[2025-10-04 11:38:45] WARNING: Amount less than 10 KES. Setting to minimum 10 KES for sandbox testing.
[2025-10-04 11:38:45] Validated amount: 10
[2025-10-04 11:38:45] Generating access token...
[2025-10-04 11:38:45] Access token response: {
            "access_token": "xbJDYEQTJ85XazfxSrXbFI46rrhj",
            "expires_in": "3599"
        }
        
[2025-10-04 11:38:45] Access token generated successfully: xbJDYEQTJ8...
[2025-10-04 12:38:45] Using callback URL from reseller settings: https://fd7f49c64822.ngrok-free.app/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-04 12:38:45] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-04 12:38:45] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUxMDA0MTIzODQ1",
    "Timestamp": "20251004123845",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 10,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/fd7f49c64822.ngrok-free.app\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for 1Hr Konnect"
}
[2025-10-04 12:38:45] Sending STK Push request
[2025-10-04 12:38:47] STK Push response: {
            "MerchantRequestID":"2e9c-429c-a95c-b4cd653531a317168",
            "CheckoutRequestID":"ws_CO_04102025123847792114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-10-04 12:38:47] HTTP status code: 200
[2025-10-04 12:38:47] Request took 1.788025 seconds
[2025-10-04 12:38:47] Response data: stdClass Object
(
    [MerchantRequestID] => 2e9c-429c-a95c-b4cd653531a317168
    [CheckoutRequestID] => ws_CO_04102025123847792114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-10-04 12:38:47] STK Push successful! CheckoutRequestID: ws_CO_04102025123847792114669532
[2025-10-04 12:38:47] MerchantRequestID: 2e9c-429c-a95c-b4cd653531a317168
[2025-10-04 12:38:47] Transaction details saved to database with ID: 105
[2025-10-04 12:38:47] Sending successful response to client
[2025-10-04 11:56:30] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-04 11:56:30] POST data: Array
(
    [reseller_id] => 6
    [router_id] => 15
    [package_name] => 1Hr Konnect
    [package_price] => 1.00
    [package_id] => 15
    [payment_gateway] => till
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-04 11:56:30] Form data received: {"resellerId":6,"packageName":"1Hr Konnect","packagePrice":"1.00","mpesaNumber":"254114669532","packageId":15,"routerId":15}
[2025-10-04 11:56:30] Formatted phone number: 254114669532
[2025-10-04 11:56:30] WARNING: Amount less than 10 KES. Setting to minimum 10 KES for sandbox testing.
[2025-10-04 11:56:30] Validated amount: 10
[2025-10-04 11:56:30] Generating access token...
[2025-10-04 11:56:37] Access token response: {
            "access_token": "bf85SSVTCyAngfzxAhn39quOxiCr",
            "expires_in": "3599"
        }
        
[2025-10-04 11:56:37] Access token generated successfully: bf85SSVTCy...
[2025-10-04 12:56:37] Using callback URL from reseller settings: https://fd7f49c64822.ngrok-free.app/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-04 12:56:37] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-04 12:56:37] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUxMDA0MTI1NjM3",
    "Timestamp": "20251004125637",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 10,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/fd7f49c64822.ngrok-free.app\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for 1Hr Konnect"
}
[2025-10-04 12:56:37] Sending STK Push request
[2025-10-04 12:56:42] STK Push response: {
            "MerchantRequestID":"2e9c-429c-a95c-b4cd653531a317323",
            "CheckoutRequestID":"ws_CO_04102025125642025114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-10-04 12:56:42] HTTP status code: 200
[2025-10-04 12:56:42] Request took 5.535876 seconds
[2025-10-04 12:56:42] Response data: stdClass Object
(
    [MerchantRequestID] => 2e9c-429c-a95c-b4cd653531a317323
    [CheckoutRequestID] => ws_CO_04102025125642025114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-10-04 12:56:42] STK Push successful! CheckoutRequestID: ws_CO_04102025125642025114669532
[2025-10-04 12:56:42] MerchantRequestID: 2e9c-429c-a95c-b4cd653531a317323
[2025-10-04 12:56:42] Transaction details saved to database with ID: 106
[2025-10-04 12:56:42] Sending successful response to client
[2025-10-04 11:58:57] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-04 11:58:57] POST data: Array
(
    [reseller_id] => 6
    [router_id] => 15
    [package_name] => 1Hr Konnect
    [package_price] => 1.00
    [package_id] => 15
    [payment_gateway] => till
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-04 11:58:57] Form data received: {"resellerId":6,"packageName":"1Hr Konnect","packagePrice":"1.00","mpesaNumber":"254114669532","packageId":15,"routerId":15}
[2025-10-04 11:58:57] Formatted phone number: 254114669532
[2025-10-04 11:58:57] WARNING: Amount less than 10 KES. Setting to minimum 10 KES for sandbox testing.
[2025-10-04 11:58:57] Validated amount: 10
[2025-10-04 11:58:57] Generating access token...
[2025-10-04 11:58:57] Access token response: {
            "access_token": "l3NNgPifmSYACRwkYodPsmxKbBPc",
            "expires_in": "3599"
        }
        
[2025-10-04 11:58:57] Access token generated successfully: l3NNgPifmS...
[2025-10-04 12:58:57] Using callback URL from reseller settings: https://fd7f49c64822.ngrok-free.app/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-04 12:58:57] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-04 12:58:57] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUxMDA0MTI1ODU3",
    "Timestamp": "20251004125857",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 10,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/fd7f49c64822.ngrok-free.app\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for 1Hr Konnect"
}
[2025-10-04 12:58:57] Sending STK Push request
[2025-10-04 12:58:58] STK Push response: {
            "MerchantRequestID":"8650-45d8-a15a-b8eb285d295a14210",
            "CheckoutRequestID":"ws_CO_04102025125858530114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-10-04 12:58:58] HTTP status code: 200
[2025-10-04 12:58:58] Request took 0.814039 seconds
[2025-10-04 12:58:58] Response data: stdClass Object
(
    [MerchantRequestID] => 8650-45d8-a15a-b8eb285d295a14210
    [CheckoutRequestID] => ws_CO_04102025125858530114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-10-04 12:58:58] STK Push successful! CheckoutRequestID: ws_CO_04102025125858530114669532
[2025-10-04 12:58:58] MerchantRequestID: 8650-45d8-a15a-b8eb285d295a14210
[2025-10-04 12:58:58] Transaction details saved to database with ID: 107
[2025-10-04 12:58:58] Sending successful response to client
[2025-10-04 12:00:02] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-04 12:00:02] POST data: Array
(
    [reseller_id] => 6
    [router_id] => 15
    [package_name] => 1Hr Konnect
    [package_price] => 1.00
    [package_id] => 15
    [payment_gateway] => till
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-04 12:00:02] Form data received: {"resellerId":6,"packageName":"1Hr Konnect","packagePrice":"1.00","mpesaNumber":"254114669532","packageId":15,"routerId":15}
[2025-10-04 12:00:02] Formatted phone number: 254114669532
[2025-10-04 12:00:02] WARNING: Amount less than 10 KES. Setting to minimum 10 KES for sandbox testing.
[2025-10-04 12:00:02] Validated amount: 10
[2025-10-04 12:00:02] Generating access token...
[2025-10-04 12:00:02] Access token response: {
            "access_token": "OAzYRGRNqMlNv1A1hNgTcQW3bGlz",
            "expires_in": "3599"
        }
        
[2025-10-04 12:00:02] Access token generated successfully: OAzYRGRNqM...
[2025-10-04 13:00:02] Using callback URL from reseller settings: https://fd7f49c64822.ngrok-free.app/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-04 13:00:02] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-04 13:00:02] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUxMDA0MTMwMDAy",
    "Timestamp": "20251004130002",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 10,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/fd7f49c64822.ngrok-free.app\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for 1Hr Konnect"
}
[2025-10-04 13:00:02] Sending STK Push request
[2025-10-04 13:00:03] STK Push response: {
            "MerchantRequestID":"ec67-43aa-9362-0f167cc2e9de12732",
            "CheckoutRequestID":"ws_CO_04102025130003863114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-10-04 13:00:03] HTTP status code: 200
[2025-10-04 13:00:03] Request took 1.033595 seconds
[2025-10-04 13:00:03] Response data: stdClass Object
(
    [MerchantRequestID] => ec67-43aa-9362-0f167cc2e9de12732
    [CheckoutRequestID] => ws_CO_04102025130003863114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-10-04 13:00:03] STK Push successful! CheckoutRequestID: ws_CO_04102025130003863114669532
[2025-10-04 13:00:03] MerchantRequestID: ec67-43aa-9362-0f167cc2e9de12732
[2025-10-04 13:00:03] Transaction details saved to database with ID: 108
[2025-10-04 13:00:03] Sending successful response to client
[2025-10-04 12:02:51] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-04 12:02:51] POST data: Array
(
    [reseller_id] => 6
    [router_id] => 15
    [package_name] => 1Hr Konnect
    [package_price] => 1.00
    [package_id] => 15
    [payment_gateway] => till
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-04 12:02:51] Form data received: {"resellerId":6,"packageName":"1Hr Konnect","packagePrice":"1.00","mpesaNumber":"254114669532","packageId":15,"routerId":15}
[2025-10-04 12:02:51] Formatted phone number: 254114669532
[2025-10-04 12:02:51] WARNING: Amount less than 10 KES. Setting to minimum 10 KES for sandbox testing.
[2025-10-04 12:02:51] Validated amount: 10
[2025-10-04 12:02:51] Generating access token...
[2025-10-04 12:02:52] Access token response: {
            "access_token": "CnY1cyzDGrkpOGVCjwIojui5RvXD",
            "expires_in": "3599"
        }
        
[2025-10-04 12:02:52] Access token generated successfully: CnY1cyzDGr...
[2025-10-04 13:02:52] Using callback URL from reseller settings: https://fd7f49c64822.ngrok-free.app/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-04 13:02:52] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-04 13:02:52] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUxMDA0MTMwMjUy",
    "Timestamp": "20251004130252",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 10,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/fd7f49c64822.ngrok-free.app\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for 1Hr Konnect"
}
[2025-10-04 13:02:52] Sending STK Push request
[2025-10-04 13:02:53] STK Push response: {
            "MerchantRequestID":"5998-46a7-a4aa-5a37a83f21ad25223",
            "CheckoutRequestID":"ws_CO_04102025130253338114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-10-04 13:02:53] HTTP status code: 200
[2025-10-04 13:02:53] Request took 0.963257 seconds
[2025-10-04 13:02:53] Response data: stdClass Object
(
    [MerchantRequestID] => 5998-46a7-a4aa-5a37a83f21ad25223
    [CheckoutRequestID] => ws_CO_04102025130253338114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-10-04 13:02:53] STK Push successful! CheckoutRequestID: ws_CO_04102025130253338114669532
[2025-10-04 13:02:53] MerchantRequestID: 5998-46a7-a4aa-5a37a83f21ad25223
[2025-10-04 13:02:53] Transaction details saved to database with ID: 109
[2025-10-04 13:02:53] Sending successful response to client
[2025-10-04 12:17:11] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-04 12:17:11] POST data: Array
(
    [reseller_id] => 6
    [router_id] => 15
    [package_name] => 1Hr Konnect
    [package_price] => 1.00
    [package_id] => 15
    [payment_gateway] => till
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-04 12:17:11] Form data received: {"resellerId":6,"packageName":"1Hr Konnect","packagePrice":"1.00","mpesaNumber":"254114669532","packageId":15,"routerId":15}
[2025-10-04 12:17:11] Formatted phone number: 254114669532
[2025-10-04 12:17:11] WARNING: Amount less than 10 KES. Setting to minimum 10 KES for sandbox testing.
[2025-10-04 12:17:11] Validated amount: 10
[2025-10-04 12:17:11] Generating access token...
[2025-10-04 12:17:12] Access token response: {
            "access_token": "Smi8eaAH63w7yQo8hwfFphm0TqzQ",
            "expires_in": "3599"
        }
        
[2025-10-04 12:17:12] Access token generated successfully: Smi8eaAH63...
[2025-10-04 13:17:12] Using callback URL from reseller settings: https://fd7f49c64822.ngrok-free.app/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-04 13:17:12] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-04 13:17:12] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUxMDA0MTMxNzEy",
    "Timestamp": "20251004131712",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 10,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/fd7f49c64822.ngrok-free.app\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for 1Hr Konnect"
}
[2025-10-04 13:17:12] Sending STK Push request
[2025-10-04 13:17:13] STK Push response: {
            "MerchantRequestID":"2e9c-429c-a95c-b4cd653531a317493",
            "CheckoutRequestID":"ws_CO_04102025131713278114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-10-04 13:17:13] HTTP status code: 200
[2025-10-04 13:17:13] Request took 0.87881 seconds
[2025-10-04 13:17:13] Response data: stdClass Object
(
    [MerchantRequestID] => 2e9c-429c-a95c-b4cd653531a317493
    [CheckoutRequestID] => ws_CO_04102025131713278114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-10-04 13:17:13] STK Push successful! CheckoutRequestID: ws_CO_04102025131713278114669532
[2025-10-04 13:17:13] MerchantRequestID: 2e9c-429c-a95c-b4cd653531a317493
[2025-10-04 13:17:13] Transaction details saved to database with ID: 110
[2025-10-04 13:17:13] Sending successful response to client
[2025-10-04 12:30:12] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-04 12:30:12] POST data: Array
(
    [reseller_id] => 6
    [router_id] => 15
    [package_name] => 1Hr Konnect
    [package_price] => 1.00
    [package_id] => 15
    [payment_gateway] => till
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-04 12:30:12] Form data received: {"resellerId":6,"packageName":"1Hr Konnect","packagePrice":"1.00","mpesaNumber":"254114669532","packageId":15,"routerId":15}
[2025-10-04 12:30:12] Formatted phone number: 254114669532
[2025-10-04 12:30:12] WARNING: Amount less than 10 KES. Setting to minimum 10 KES for sandbox testing.
[2025-10-04 12:30:12] Validated amount: 10
[2025-10-04 12:30:12] Generating access token...
[2025-10-04 12:30:12] Access token response: {
            "access_token": "qdUistr9ZznAQAJDUGA398FKw0dW",
            "expires_in": "3599"
        }
        
[2025-10-04 12:30:12] Access token generated successfully: qdUistr9Zz...
[2025-10-04 13:30:12] Using callback URL from reseller settings: https://fd7f49c64822.ngrok-free.app/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-04 13:30:12] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-04 13:30:12] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUxMDA0MTMzMDEy",
    "Timestamp": "20251004133012",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 10,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/fd7f49c64822.ngrok-free.app\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for 1Hr Konnect"
}
[2025-10-04 13:30:12] Sending STK Push request
[2025-10-04 13:30:13] STK Push response: {
            "MerchantRequestID":"2e9c-429c-a95c-b4cd653531a317614",
            "CheckoutRequestID":"ws_CO_04102025133013808114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-10-04 13:30:13] HTTP status code: 200
[2025-10-04 13:30:13] Request took 0.783365 seconds
[2025-10-04 13:30:13] Response data: stdClass Object
(
    [MerchantRequestID] => 2e9c-429c-a95c-b4cd653531a317614
    [CheckoutRequestID] => ws_CO_04102025133013808114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-10-04 13:30:13] STK Push successful! CheckoutRequestID: ws_CO_04102025133013808114669532
[2025-10-04 13:30:13] MerchantRequestID: 2e9c-429c-a95c-b4cd653531a317614
[2025-10-04 13:30:13] Transaction details saved to database with ID: 111
[2025-10-04 13:30:13] Sending successful response to client
[2025-10-04 12:31:58] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-04 12:31:58] POST data: Array
(
    [reseller_id] => 6
    [router_id] => 15
    [package_name] => 1Hr Konnect
    [package_price] => 1.00
    [package_id] => 15
    [payment_gateway] => till
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-04 12:31:58] Form data received: {"resellerId":6,"packageName":"1Hr Konnect","packagePrice":"1.00","mpesaNumber":"254114669532","packageId":15,"routerId":15}
[2025-10-04 12:31:58] Formatted phone number: 254114669532
[2025-10-04 12:31:58] WARNING: Amount less than 10 KES. Setting to minimum 10 KES for sandbox testing.
[2025-10-04 12:31:58] Validated amount: 10
[2025-10-04 12:31:58] Generating access token...
[2025-10-04 12:31:59] Access token response: {
            "access_token": "bczXAIDhFg837HyOMTPKia89v3XB",
            "expires_in": "3599"
        }
        
[2025-10-04 12:31:59] Access token generated successfully: bczXAIDhFg...
[2025-10-04 13:31:59] Using callback URL from reseller settings: https://fd7f49c64822.ngrok-free.app/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-04 13:31:59] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-04 13:31:59] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUxMDA0MTMzMTU5",
    "Timestamp": "20251004133159",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 10,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/fd7f49c64822.ngrok-free.app\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for 1Hr Konnect"
}
[2025-10-04 13:31:59] Sending STK Push request
[2025-10-04 13:32:03] STK Push response: {
            "MerchantRequestID":"2e9c-429c-a95c-b4cd653531a317624",
            "CheckoutRequestID":"ws_CO_04102025133200961114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-10-04 13:32:03] HTTP status code: 200
[2025-10-04 13:32:03] Request took 3.729942 seconds
[2025-10-04 13:32:03] Response data: stdClass Object
(
    [MerchantRequestID] => 2e9c-429c-a95c-b4cd653531a317624
    [CheckoutRequestID] => ws_CO_04102025133200961114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-10-04 13:32:03] STK Push successful! CheckoutRequestID: ws_CO_04102025133200961114669532
[2025-10-04 13:32:03] MerchantRequestID: 2e9c-429c-a95c-b4cd653531a317624
[2025-10-04 13:32:03] Transaction details saved to database with ID: 112
[2025-10-04 13:32:03] Sending successful response to client
[2025-10-04 12:50:48] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-04 12:50:48] POST data: Array
(
    [reseller_id] => 6
    [router_id] => 15
    [package_name] => 1Hr Konnect
    [package_price] => 1.00
    [package_id] => 15
    [payment_gateway] => till
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-04 12:50:48] Form data received: {"resellerId":6,"packageName":"1Hr Konnect","packagePrice":"1.00","mpesaNumber":"254114669532","packageId":15,"routerId":15}
[2025-10-04 12:50:48] Formatted phone number: 254114669532
[2025-10-04 12:50:48] WARNING: Amount less than 10 KES. Setting to minimum 10 KES for sandbox testing.
[2025-10-04 12:50:48] Validated amount: 10
[2025-10-04 12:50:48] Generating access token...
[2025-10-04 12:50:52] Access token response: {
            "access_token": "JGzE9KX6glB47jPP6sC2a3Obv8IH",
            "expires_in": "3599"
        }
        
[2025-10-04 12:50:52] Access token generated successfully: JGzE9KX6gl...
[2025-10-04 13:50:52] Using callback URL from reseller settings: https://fd7f49c64822.ngrok-free.app/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-04 13:50:52] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-04 13:50:52] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUxMDA0MTM1MDUy",
    "Timestamp": "20251004135052",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 10,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/fd7f49c64822.ngrok-free.app\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for 1Hr Konnect"
}
[2025-10-04 13:50:52] Sending STK Push request
[2025-10-04 12:57:17] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-04 12:57:17] POST data: Array
(
    [reseller_id] => 6
    [router_id] => 15
    [package_name] => 1Hr Konnect
    [package_price] => 1.00
    [package_id] => 15
    [payment_gateway] => till
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-04 12:57:17] Form data received: {"resellerId":6,"packageName":"1Hr Konnect","packagePrice":"1.00","mpesaNumber":"254114669532","packageId":15,"routerId":15}
[2025-10-04 12:57:17] Formatted phone number: 254114669532
[2025-10-04 12:57:17] WARNING: Amount less than 10 KES. Setting to minimum 10 KES for sandbox testing.
[2025-10-04 12:57:17] Validated amount: 10
[2025-10-04 12:57:17] Generating access token...
[2025-10-04 12:57:18] Access token response: {
            "access_token": "3Ppl0fKNaI5iFaXgPNVcNwbuEjoi",
            "expires_in": "3599"
        }
        
[2025-10-04 12:57:18] Access token generated successfully: 3Ppl0fKNaI...
[2025-10-04 13:57:18] Using callback URL from reseller settings: https://fd7f49c64822.ngrok-free.app/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-04 13:57:18] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-04 13:57:18] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUxMDA0MTM1NzE4",
    "Timestamp": "20251004135718",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 10,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/fd7f49c64822.ngrok-free.app\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for 1Hr Konnect"
}
[2025-10-04 13:57:18] Sending STK Push request
[2025-10-04 13:57:19] STK Push response: {
            "MerchantRequestID":"8650-45d8-a15a-b8eb285d295a14698",
            "CheckoutRequestID":"ws_CO_04102025135719682114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-10-04 13:57:19] HTTP status code: 200
[2025-10-04 13:57:19] Request took 0.931877 seconds
[2025-10-04 13:57:19] Response data: stdClass Object
(
    [MerchantRequestID] => 8650-45d8-a15a-b8eb285d295a14698
    [CheckoutRequestID] => ws_CO_04102025135719682114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-10-04 13:57:19] STK Push successful! CheckoutRequestID: ws_CO_04102025135719682114669532
[2025-10-04 13:57:19] MerchantRequestID: 8650-45d8-a15a-b8eb285d295a14698
[2025-10-04 13:57:19] Transaction details saved to database with ID: 114
[2025-10-04 13:57:19] Sending successful response to client
[2025-10-04 12:57:57] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-04 12:57:57] POST data: Array
(
    [reseller_id] => 6
    [router_id] => 15
    [package_name] => 1Hr Konnect
    [package_price] => 1.00
    [package_id] => 15
    [payment_gateway] => till
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-04 12:57:57] Form data received: {"resellerId":6,"packageName":"1Hr Konnect","packagePrice":"1.00","mpesaNumber":"254114669532","packageId":15,"routerId":15}
[2025-10-04 12:57:57] Formatted phone number: 254114669532
[2025-10-04 12:57:57] WARNING: Amount less than 10 KES. Setting to minimum 10 KES for sandbox testing.
[2025-10-04 12:57:57] Validated amount: 10
[2025-10-04 12:57:57] Generating access token...
[2025-10-04 12:57:57] Access token response: {
            "access_token": "6a5GGg12EquGFajhT8nOdZI81hEJ",
            "expires_in": "3599"
        }
        
[2025-10-04 12:57:57] Access token generated successfully: 6a5GGg12Eq...
[2025-10-04 13:57:57] Using callback URL from reseller settings: https://fd7f49c64822.ngrok-free.app/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-04 13:57:57] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-04 13:57:57] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUxMDA0MTM1NzU3",
    "Timestamp": "20251004135757",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 10,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/fd7f49c64822.ngrok-free.app\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for 1Hr Konnect"
}
[2025-10-04 13:57:57] Sending STK Push request
[2025-10-04 13:57:58] STK Push response: {
            "MerchantRequestID":"8650-45d8-a15a-b8eb285d295a14707",
            "CheckoutRequestID":"ws_CO_04102025135759173114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-10-04 13:57:58] HTTP status code: 200
[2025-10-04 13:57:58] Request took 0.987659 seconds
[2025-10-04 13:57:58] Response data: stdClass Object
(
    [MerchantRequestID] => 8650-45d8-a15a-b8eb285d295a14707
    [CheckoutRequestID] => ws_CO_04102025135759173114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-10-04 13:57:58] STK Push successful! CheckoutRequestID: ws_CO_04102025135759173114669532
[2025-10-04 13:57:58] MerchantRequestID: 8650-45d8-a15a-b8eb285d295a14707
[2025-10-04 13:57:58] Transaction details saved to database with ID: 115
[2025-10-04 13:57:58] Sending successful response to client
[2025-10-04 12:58:40] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-04 12:58:40] POST data: Array
(
    [reseller_id] => 6
    [router_id] => 15
    [package_name] => 1Hr Konnect
    [package_price] => 1.00
    [package_id] => 15
    [payment_gateway] => till
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-04 12:58:40] Form data received: {"resellerId":6,"packageName":"1Hr Konnect","packagePrice":"1.00","mpesaNumber":"254114669532","packageId":15,"routerId":15}
[2025-10-04 12:58:40] Formatted phone number: 254114669532
[2025-10-04 12:58:40] WARNING: Amount less than 10 KES. Setting to minimum 10 KES for sandbox testing.
[2025-10-04 12:58:40] Validated amount: 10
[2025-10-04 12:58:40] Generating access token...
[2025-10-04 12:58:40] Access token response: {
            "access_token": "HWWXavCAFz3MENVKUTmGCpkJSgwi",
            "expires_in": "3599"
        }
        
[2025-10-04 12:58:40] Access token generated successfully: HWWXavCAFz...
[2025-10-04 13:58:40] Using callback URL from reseller settings: https://fd7f49c64822.ngrok-free.app/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-04 13:58:40] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-04 13:58:40] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUxMDA0MTM1ODQw",
    "Timestamp": "20251004135840",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 10,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/fd7f49c64822.ngrok-free.app\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for 1Hr Konnect"
}
[2025-10-04 13:58:40] Sending STK Push request
[2025-10-04 13:58:41] STK Push response: {
            "MerchantRequestID":"2e9c-429c-a95c-b4cd653531a317842",
            "CheckoutRequestID":"ws_CO_04102025135841953114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-10-04 13:58:41] HTTP status code: 200
[2025-10-04 13:58:41] Request took 0.655704 seconds
[2025-10-04 13:58:41] Response data: stdClass Object
(
    [MerchantRequestID] => 2e9c-429c-a95c-b4cd653531a317842
    [CheckoutRequestID] => ws_CO_04102025135841953114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-10-04 13:58:41] STK Push successful! CheckoutRequestID: ws_CO_04102025135841953114669532
[2025-10-04 13:58:41] MerchantRequestID: 2e9c-429c-a95c-b4cd653531a317842
[2025-10-04 13:58:41] Transaction details saved to database with ID: 116
[2025-10-04 13:58:41] Sending successful response to client
[2025-10-04 13:00:08] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-04 13:00:08] POST data: Array
(
    [reseller_id] => 6
    [router_id] => 15
    [package_name] => 1Hr Konnect
    [package_price] => 1.00
    [package_id] => 15
    [payment_gateway] => till
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-04 13:00:08] Form data received: {"resellerId":6,"packageName":"1Hr Konnect","packagePrice":"1.00","mpesaNumber":"254114669532","packageId":15,"routerId":15}
[2025-10-04 13:00:08] Formatted phone number: 254114669532
[2025-10-04 13:00:08] WARNING: Amount less than 10 KES. Setting to minimum 10 KES for sandbox testing.
[2025-10-04 13:00:08] Validated amount: 10
[2025-10-04 13:00:08] Generating access token...
[2025-10-04 13:00:09] Access token response: {
            "access_token": "eVOMlfPKpjfEXoI5f1TO8PCJ219o",
            "expires_in": "3599"
        }
        
[2025-10-04 13:00:09] Access token generated successfully: eVOMlfPKpj...
[2025-10-04 14:00:09] Using callback URL from reseller settings: https://fd7f49c64822.ngrok-free.app/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-04 14:00:09] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-04 14:00:09] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUxMDA0MTQwMDA5",
    "Timestamp": "20251004140009",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 10,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/fd7f49c64822.ngrok-free.app\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for 1Hr Konnect"
}
[2025-10-04 14:00:09] Sending STK Push request
[2025-10-04 14:00:10] STK Push response: {
            "MerchantRequestID":"ec67-43aa-9362-0f167cc2e9de13494",
            "CheckoutRequestID":"ws_CO_04102025140010445114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-10-04 14:00:10] HTTP status code: 200
[2025-10-04 14:00:10] Request took 0.769725 seconds
[2025-10-04 14:00:10] Response data: stdClass Object
(
    [MerchantRequestID] => ec67-43aa-9362-0f167cc2e9de13494
    [CheckoutRequestID] => ws_CO_04102025140010445114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-10-04 14:00:10] STK Push successful! CheckoutRequestID: ws_CO_04102025140010445114669532
[2025-10-04 14:00:10] MerchantRequestID: ec67-43aa-9362-0f167cc2e9de13494
[2025-10-04 14:00:10] Transaction details saved to database with ID: 117
[2025-10-04 14:00:10] Sending successful response to client
[2025-10-04 13:26:31] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-04 13:26:31] POST data: Array
(
    [reseller_id] => 6
    [router_id] => 15
    [package_name] => 1Hr Konnect
    [package_price] => 1.00
    [package_id] => 15
    [payment_gateway] => till
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-04 13:26:31] Form data received: {"resellerId":6,"packageName":"1Hr Konnect","packagePrice":"1.00","mpesaNumber":"254114669532","packageId":15,"routerId":15}
[2025-10-04 13:26:31] Formatted phone number: 254114669532
[2025-10-04 13:26:31] WARNING: Amount less than 10 KES. Setting to minimum 10 KES for sandbox testing.
[2025-10-04 13:26:31] Validated amount: 10
[2025-10-04 13:26:31] Generating access token...
[2025-10-04 13:26:32] Access token response: {
            "access_token": "G12DGU9GVTgClwl5fPm0Qu08m116",
            "expires_in": "3599"
        }
        
[2025-10-04 13:26:32] Access token generated successfully: G12DGU9GVT...
[2025-10-04 14:26:32] Using callback URL from reseller settings: https://fd7f49c64822.ngrok-free.app/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-04 14:26:32] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-04 14:26:32] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUxMDA0MTQyNjMy",
    "Timestamp": "20251004142632",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 10,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/fd7f49c64822.ngrok-free.app\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for 1Hr Konnect"
}
[2025-10-04 14:26:32] Sending STK Push request
[2025-10-04 14:26:33] STK Push response: {
            "MerchantRequestID":"8650-45d8-a15a-b8eb285d295a14940",
            "CheckoutRequestID":"ws_CO_04102025142633878114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-10-04 14:26:33] HTTP status code: 200
[2025-10-04 14:26:33] Request took 1.017017 seconds
[2025-10-04 14:26:33] Response data: stdClass Object
(
    [MerchantRequestID] => 8650-45d8-a15a-b8eb285d295a14940
    [CheckoutRequestID] => ws_CO_04102025142633878114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-10-04 14:26:33] STK Push successful! CheckoutRequestID: ws_CO_04102025142633878114669532
[2025-10-04 14:26:33] MerchantRequestID: 8650-45d8-a15a-b8eb285d295a14940
[2025-10-04 14:26:33] Transaction details saved to database with ID: 118
[2025-10-04 14:26:33] Sending successful response to client
[2025-10-04 13:50:35] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-04 13:50:35] POST data: Array
(
    [reseller_id] => 6
    [router_id] => 15
    [package_name] => 1Hr Konnect
    [package_price] => 1.00
    [package_id] => 15
    [payment_gateway] => till
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-04 13:50:35] Form data received: {"resellerId":6,"packageName":"1Hr Konnect","packagePrice":"1.00","mpesaNumber":"254114669532","packageId":15,"routerId":15}
[2025-10-04 13:50:35] Formatted phone number: 254114669532
[2025-10-04 13:50:35] WARNING: Amount less than 10 KES. Setting to minimum 10 KES for sandbox testing.
[2025-10-04 13:50:35] Validated amount: 10
[2025-10-04 13:50:35] Generating access token...
[2025-10-04 13:50:35] Access token response: {
            "access_token": "FxHXzwGoA8Gq6t5ChbL8qSeOx3P3",
            "expires_in": "3599"
        }
        
[2025-10-04 13:50:35] Access token generated successfully: FxHXzwGoA8...
[2025-10-04 14:50:35] Using callback URL from reseller settings: https://fd7f49c64822.ngrok-free.app/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-04 14:50:35] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-04 14:50:35] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUxMDA0MTQ1MDM1",
    "Timestamp": "20251004145035",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 10,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/fd7f49c64822.ngrok-free.app\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for 1Hr Konnect"
}
[2025-10-04 14:50:35] Sending STK Push request
[2025-10-04 14:50:36] STK Push response: {
            "MerchantRequestID":"ec67-43aa-9362-0f167cc2e9de14048",
            "CheckoutRequestID":"ws_CO_04102025145036947114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-10-04 14:50:36] HTTP status code: 200
[2025-10-04 14:50:36] Request took 0.672985 seconds
[2025-10-04 14:50:36] Response data: stdClass Object
(
    [MerchantRequestID] => ec67-43aa-9362-0f167cc2e9de14048
    [CheckoutRequestID] => ws_CO_04102025145036947114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-10-04 14:50:36] STK Push successful! CheckoutRequestID: ws_CO_04102025145036947114669532
[2025-10-04 14:50:36] MerchantRequestID: ec67-43aa-9362-0f167cc2e9de14048
[2025-10-04 14:50:36] Transaction details saved to database with ID: 119
[2025-10-04 14:50:36] Sending successful response to client
[2025-10-04 14:02:34] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-04 14:02:34] POST data: Array
(
    [reseller_id] => 6
    [router_id] => 15
    [package_name] => 1Hr Konnect
    [package_price] => 1.00
    [package_id] => 15
    [payment_gateway] => till
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-04 14:02:34] Form data received: {"resellerId":6,"packageName":"1Hr Konnect","packagePrice":"1.00","mpesaNumber":"254114669532","packageId":15,"routerId":15}
[2025-10-04 14:02:34] Formatted phone number: 254114669532
[2025-10-04 14:02:34] WARNING: Amount less than 10 KES. Setting to minimum 10 KES for sandbox testing.
[2025-10-04 14:02:34] Validated amount: 10
[2025-10-04 14:02:34] Generating access token...
[2025-10-04 14:02:34] Access token response: {
            "access_token": "tYyT1FDOB7O4KheyZnXEHDAOhmkS",
            "expires_in": "3599"
        }
        
[2025-10-04 14:02:34] Access token generated successfully: tYyT1FDOB7...
[2025-10-04 15:02:34] Using callback URL from reseller settings: https://fd7f49c64822.ngrok-free.app/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-04 15:02:34] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-04 15:02:34] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUxMDA0MTUwMjM0",
    "Timestamp": "20251004150234",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 10,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/fd7f49c64822.ngrok-free.app\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for 1Hr Konnect"
}
[2025-10-04 15:02:34] Sending STK Push request
[2025-10-04 15:02:35] STK Push response: {
            "MerchantRequestID":"ec67-43aa-9362-0f167cc2e9de14197",
            "CheckoutRequestID":"ws_CO_04102025150235936114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-10-04 15:02:35] HTTP status code: 200
[2025-10-04 15:02:35] Request took 0.655876 seconds
[2025-10-04 15:02:35] Response data: stdClass Object
(
    [MerchantRequestID] => ec67-43aa-9362-0f167cc2e9de14197
    [CheckoutRequestID] => ws_CO_04102025150235936114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-10-04 15:02:35] STK Push successful! CheckoutRequestID: ws_CO_04102025150235936114669532
[2025-10-04 15:02:35] MerchantRequestID: ec67-43aa-9362-0f167cc2e9de14197
[2025-10-04 15:02:35] Transaction details saved to database with ID: 120
[2025-10-04 15:02:35] Sending successful response to client
[2025-10-04 19:19:21] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-04 19:19:21] POST data: Array
(
    [reseller_id] => 6
    [router_id] => 15
    [package_name] => 1Hr Konnect
    [package_price] => 1.00
    [package_id] => 15
    [payment_gateway] => till
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-04 19:19:21] Form data received: {"resellerId":6,"packageName":"1Hr Konnect","packagePrice":"1.00","mpesaNumber":"254114669532","packageId":15,"routerId":15}
[2025-10-04 19:19:21] Formatted phone number: 254114669532
[2025-10-04 19:19:21] WARNING: Amount less than 10 KES. Setting to minimum 10 KES for sandbox testing.
[2025-10-04 19:19:21] Validated amount: 10
[2025-10-04 19:19:21] Generating access token...
[2025-10-04 19:19:22] Access token response: {
            "access_token": "eVCB5DhDc0Pn7Uzh4esb2Ztev9m5",
            "expires_in": "3599"
        }
        
[2025-10-04 19:19:22] Access token generated successfully: eVCB5DhDc0...
[2025-10-04 20:19:22] Using callback URL from reseller settings: https://fd7f49c64822.ngrok-free.app/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-04 20:19:22] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-04 20:19:22] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUxMDA0MjAxOTIy",
    "Timestamp": "20251004201922",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 10,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/fd7f49c64822.ngrok-free.app\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for 1Hr Konnect"
}
[2025-10-04 20:19:22] Sending STK Push request
[2025-10-04 20:19:23] STK Push response: {
            "MerchantRequestID":"5998-46a7-a4aa-5a37a83f21ad30324",
            "CheckoutRequestID":"ws_CO_04102025201923265114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-10-04 20:19:23] HTTP status code: 200
[2025-10-04 20:19:23] Request took 0.871814 seconds
[2025-10-04 20:19:23] Response data: stdClass Object
(
    [MerchantRequestID] => 5998-46a7-a4aa-5a37a83f21ad30324
    [CheckoutRequestID] => ws_CO_04102025201923265114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-10-04 20:19:23] STK Push successful! CheckoutRequestID: ws_CO_04102025201923265114669532
[2025-10-04 20:19:23] MerchantRequestID: 5998-46a7-a4aa-5a37a83f21ad30324
[2025-10-04 20:19:23] Transaction details saved to database with ID: 121
[2025-10-04 20:19:23] Sending successful response to client
[2025-10-04 19:20:00] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-04 19:20:00] POST data: Array
(
    [reseller_id] => 6
    [router_id] => 15
    [package_name] => 1Hr Konnect
    [package_price] => 1.00
    [package_id] => 15
    [payment_gateway] => till
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-04 19:20:00] Form data received: {"resellerId":6,"packageName":"1Hr Konnect","packagePrice":"1.00","mpesaNumber":"254114669532","packageId":15,"routerId":15}
[2025-10-04 19:20:00] Formatted phone number: 254114669532
[2025-10-04 19:20:00] WARNING: Amount less than 10 KES. Setting to minimum 10 KES for sandbox testing.
[2025-10-04 19:20:00] Validated amount: 10
[2025-10-04 19:20:00] Generating access token...
[2025-10-04 19:20:01] Access token response: {
            "access_token": "QFMmOJ3F00LtgyW9604oMzRI4Tml",
            "expires_in": "3599"
        }
        
[2025-10-04 19:20:01] Access token generated successfully: QFMmOJ3F00...
[2025-10-04 20:20:01] Using callback URL from reseller settings: https://fd7f49c64822.ngrok-free.app/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-04 20:20:01] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-04 20:20:01] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUxMDA0MjAyMDAx",
    "Timestamp": "20251004202001",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 10,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/fd7f49c64822.ngrok-free.app\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for 1Hr Konnect"
}
[2025-10-04 20:20:01] Sending STK Push request
[2025-10-04 20:20:01] STK Push response: {
            "MerchantRequestID":"5998-46a7-a4aa-5a37a83f21ad30325",
            "CheckoutRequestID":"ws_CO_04102025202001992114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-10-04 20:20:01] HTTP status code: 200
[2025-10-04 20:20:01] Request took 0.729672 seconds
[2025-10-04 20:20:01] Response data: stdClass Object
(
    [MerchantRequestID] => 5998-46a7-a4aa-5a37a83f21ad30325
    [CheckoutRequestID] => ws_CO_04102025202001992114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-10-04 20:20:01] STK Push successful! CheckoutRequestID: ws_CO_04102025202001992114669532
[2025-10-04 20:20:01] MerchantRequestID: 5998-46a7-a4aa-5a37a83f21ad30325
[2025-10-04 20:20:01] Transaction details saved to database with ID: 122
[2025-10-04 20:20:01] Sending successful response to client
[2025-10-04 19:23:56] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-04 19:23:56] POST data: Array
(
    [reseller_id] => 6
    [router_id] => 15
    [package_name] => 1Hr Konnect
    [package_price] => 1.00
    [package_id] => 15
    [payment_gateway] => till
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-04 19:23:56] Form data received: {"resellerId":6,"packageName":"1Hr Konnect","packagePrice":"1.00","mpesaNumber":"254114669532","packageId":15,"routerId":15}
[2025-10-04 19:23:56] Formatted phone number: 254114669532
[2025-10-04 19:23:56] WARNING: Amount less than 10 KES. Setting to minimum 10 KES for sandbox testing.
[2025-10-04 19:23:56] Validated amount: 10
[2025-10-04 19:23:56] Generating access token...
[2025-10-04 19:23:58] Access token response: {
            "access_token": "NAwVbxLbmKtFcPc2aVGnSFSnmaJv",
            "expires_in": "3599"
        }
        
[2025-10-04 19:23:58] Access token generated successfully: NAwVbxLbmK...
[2025-10-04 20:23:58] Using callback URL from reseller settings: https://fd7f49c64822.ngrok-free.app/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-04 20:23:58] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-04 20:23:58] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUxMDA0MjAyMzU4",
    "Timestamp": "20251004202358",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 10,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/fd7f49c64822.ngrok-free.app\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for 1Hr Konnect"
}
[2025-10-04 20:23:58] Sending STK Push request
[2025-10-04 20:23:59] STK Push response: {
            "MerchantRequestID":"8650-45d8-a15a-b8eb285d295a17824",
            "CheckoutRequestID":"ws_CO_04102025202359583114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-10-04 20:23:59] HTTP status code: 200
[2025-10-04 20:23:59] Request took 0.993131 seconds
[2025-10-04 20:23:59] Response data: stdClass Object
(
    [MerchantRequestID] => 8650-45d8-a15a-b8eb285d295a17824
    [CheckoutRequestID] => ws_CO_04102025202359583114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-10-04 20:23:59] STK Push successful! CheckoutRequestID: ws_CO_04102025202359583114669532
[2025-10-04 20:23:59] MerchantRequestID: 8650-45d8-a15a-b8eb285d295a17824
[2025-10-04 20:23:59] Transaction details saved to database with ID: 123
[2025-10-04 20:23:59] Sending successful response to client
[2025-10-04 20:00:57] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-04 20:00:57] POST data: Array
(
    [reseller_id] => 6
    [router_id] => 15
    [package_name] => 1Hr Konnect
    [package_price] => 1.00
    [package_id] => 15
    [payment_gateway] => till
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-04 20:00:57] Form data received: {"resellerId":6,"packageName":"1Hr Konnect","packagePrice":"1.00","mpesaNumber":"254114669532","packageId":15,"routerId":15}
[2025-10-04 20:00:57] Formatted phone number: 254114669532
[2025-10-04 20:00:57] WARNING: Amount less than 10 KES. Setting to minimum 10 KES for sandbox testing.
[2025-10-04 20:00:57] Validated amount: 10
[2025-10-04 20:00:57] Generating access token...
[2025-10-04 20:01:02] Access token response: {
            "access_token": "KQifxVJLw3Pe1rz079gldApO14Ll",
            "expires_in": "3599"
        }
        
[2025-10-04 20:01:02] Access token generated successfully: KQifxVJLw3...
[2025-10-04 21:01:02] Using callback URL from reseller settings: https://fd7f49c64822.ngrok-free.app/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-04 21:01:02] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-04 21:01:02] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUxMDA0MjEwMTAy",
    "Timestamp": "20251004210102",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 10,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/fd7f49c64822.ngrok-free.app\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for 1Hr Konnect"
}
[2025-10-04 21:01:02] Sending STK Push request
[2025-10-04 21:01:07] STK Push response: {
            "MerchantRequestID":"5998-46a7-a4aa-5a37a83f21ad30752",
            "CheckoutRequestID":"ws_CO_04102025210105487114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-10-04 21:01:07] HTTP status code: 200
[2025-10-04 21:01:07] Request took 5.237695 seconds
[2025-10-04 21:01:07] Response data: stdClass Object
(
    [MerchantRequestID] => 5998-46a7-a4aa-5a37a83f21ad30752
    [CheckoutRequestID] => ws_CO_04102025210105487114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-10-04 21:01:07] STK Push successful! CheckoutRequestID: ws_CO_04102025210105487114669532
[2025-10-04 21:01:07] MerchantRequestID: 5998-46a7-a4aa-5a37a83f21ad30752
[2025-10-04 21:01:07] Transaction details saved to database with ID: 124
[2025-10-04 21:01:07] Sending successful response to client
[2025-10-04 20:35:53] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-04 20:35:53] POST data: Array
(
    [reseller_id] => 6
    [router_id] => 15
    [package_name] => 1Hr Konnect
    [package_price] => 1.00
    [package_id] => 15
    [payment_gateway] => till
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-04 20:35:53] Form data received: {"resellerId":6,"packageName":"1Hr Konnect","packagePrice":"1.00","mpesaNumber":"254114669532","packageId":15,"routerId":15}
[2025-10-04 20:35:53] Formatted phone number: 254114669532
[2025-10-04 20:35:53] WARNING: Amount less than 10 KES. Setting to minimum 10 KES for sandbox testing.
[2025-10-04 20:35:53] Validated amount: 10
[2025-10-04 20:35:53] Generating access token...
[2025-10-04 20:35:54] Access token response: {
            "access_token": "T4KlYfsbm6zF1vw7BQjMx7bFWAmG",
            "expires_in": "3599"
        }
        
[2025-10-04 20:35:54] Access token generated successfully: T4KlYfsbm6...
[2025-10-04 21:35:54] Using callback URL from reseller settings: https://fd7f49c64822.ngrok-free.app/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-04 21:35:54] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-04 21:35:54] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUxMDA0MjEzNTU0",
    "Timestamp": "20251004213554",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 10,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/fd7f49c64822.ngrok-free.app\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for 1Hr Konnect"
}
[2025-10-04 21:35:54] Sending STK Push request
[2025-10-04 21:35:56] STK Push response: {
            "MerchantRequestID":"ec67-43aa-9362-0f167cc2e9de18588",
            "CheckoutRequestID":"ws_CO_04102025213555225114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-10-04 21:35:56] HTTP status code: 200
[2025-10-04 21:35:56] Request took 2.175571 seconds
[2025-10-04 21:35:56] Response data: stdClass Object
(
    [MerchantRequestID] => ec67-43aa-9362-0f167cc2e9de18588
    [CheckoutRequestID] => ws_CO_04102025213555225114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-10-04 21:35:56] STK Push successful! CheckoutRequestID: ws_CO_04102025213555225114669532
[2025-10-04 21:35:56] MerchantRequestID: ec67-43aa-9362-0f167cc2e9de18588
[2025-10-04 21:35:56]  Transaction saved to database with ID: 125 | CheckoutRequestID: ws_CO_04102025213555225114669532
[2025-10-04 21:35:56] Sending successful response to client
[2025-10-04 20:38:44] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-04 20:38:44] POST data: Array
(
    [reseller_id] => 6
    [router_id] => 15
    [package_name] => 1Hr Konnect
    [package_price] => 1.00
    [package_id] => 15
    [payment_gateway] => till
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-04 20:38:44] Form data received: {"resellerId":6,"packageName":"1Hr Konnect","packagePrice":"1.00","mpesaNumber":"254114669532","packageId":15,"routerId":15}
[2025-10-04 20:38:44] Formatted phone number: 254114669532
[2025-10-04 20:38:44] WARNING: Amount less than 10 KES. Setting to minimum 10 KES for sandbox testing.
[2025-10-04 20:38:44] Validated amount: 10
[2025-10-04 20:38:44] Generating access token...
[2025-10-04 20:38:44] Access token response: {
            "access_token": "YpwYtqQwJPW8wH139XcWG6KGqheQ",
            "expires_in": "3599"
        }
        
[2025-10-04 20:38:44] Access token generated successfully: YpwYtqQwJP...
[2025-10-04 21:38:44] Using callback URL from reseller settings: https://fd7f49c64822.ngrok-free.app/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-04 21:38:44] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-04 21:38:44] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUxMDA0MjEzODQ0",
    "Timestamp": "20251004213844",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 10,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/fd7f49c64822.ngrok-free.app\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for 1Hr Konnect"
}
[2025-10-04 21:38:44] Sending STK Push request
[2025-10-04 21:38:45] STK Push response: {
            "MerchantRequestID":"8650-45d8-a15a-b8eb285d295a18400",
            "CheckoutRequestID":"ws_CO_04102025213846024114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-10-04 21:38:45] HTTP status code: 200
[2025-10-04 21:38:45] Request took 0.929008 seconds
[2025-10-04 21:38:45] Response data: stdClass Object
(
    [MerchantRequestID] => 8650-45d8-a15a-b8eb285d295a18400
    [CheckoutRequestID] => ws_CO_04102025213846024114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-10-04 21:38:45] STK Push successful! CheckoutRequestID: ws_CO_04102025213846024114669532
[2025-10-04 21:38:45] MerchantRequestID: 8650-45d8-a15a-b8eb285d295a18400
[2025-10-04 21:38:45]  Transaction saved to database with ID: 126 | CheckoutRequestID: ws_CO_04102025213846024114669532
[2025-10-04 21:38:45] Sending successful response to client
[2025-10-04 21:15:04] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-04 21:15:04] POST data: Array
(
    [reseller_id] => 6
    [router_id] => 15
    [package_name] => 1Hr Konnect
    [package_price] => 1.00
    [package_id] => 15
    [payment_gateway] => till
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-04 21:15:04] Form data received: {"resellerId":6,"packageName":"1Hr Konnect","packagePrice":"1.00","mpesaNumber":"254114669532","packageId":15,"routerId":15}
[2025-10-04 21:15:04] Formatted phone number: 254114669532
[2025-10-04 21:15:04] WARNING: Amount less than 10 KES. Setting to minimum 10 KES for sandbox testing.
[2025-10-04 21:15:04] Validated amount: 10
[2025-10-04 21:15:04] Generating access token...
[2025-10-04 21:15:05] Access token response: {
            "access_token": "ElxQMehvdlWA5271wwQjhnHX235T",
            "expires_in": "3599"
        }
        
[2025-10-04 21:15:05] Access token generated successfully: ElxQMehvdl...
[2025-10-04 22:15:05] Using callback URL from reseller settings: https://fd7f49c64822.ngrok-free.app/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-04 22:15:05] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-04 22:15:05] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUxMDA0MjIxNTA1",
    "Timestamp": "20251004221505",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 10,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/fd7f49c64822.ngrok-free.app\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for 1Hr Konnect"
}
[2025-10-04 22:15:05] Sending STK Push request
[2025-10-04 22:15:06] STK Push response: {
            "MerchantRequestID":"ec67-43aa-9362-0f167cc2e9de18964",
            "CheckoutRequestID":"ws_CO_04102025221506849114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-10-04 22:15:06] HTTP status code: 200
[2025-10-04 22:15:06] Request took 0.879292 seconds
[2025-10-04 22:15:06] Response data: stdClass Object
(
    [MerchantRequestID] => ec67-43aa-9362-0f167cc2e9de18964
    [CheckoutRequestID] => ws_CO_04102025221506849114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-10-04 22:15:06] STK Push successful! CheckoutRequestID: ws_CO_04102025221506849114669532
[2025-10-04 22:15:06] MerchantRequestID: ec67-43aa-9362-0f167cc2e9de18964
[2025-10-04 22:15:06]  Transaction saved to database with ID: 127 | CheckoutRequestID: ws_CO_04102025221506849114669532
[2025-10-04 22:15:06] Sending successful response to client
[2025-10-04 21:41:08] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-04 21:41:08] POST data: Array
(
    [reseller_id] => 6
    [router_id] => 15
    [package_name] => 1Hr Konnect
    [package_price] => 1.00
    [package_id] => 15
    [payment_gateway] => till
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-04 21:41:08] Form data received: {"resellerId":6,"packageName":"1Hr Konnect","packagePrice":"1.00","mpesaNumber":"254114669532","packageId":15,"routerId":15}
[2025-10-04 21:41:08] Formatted phone number: 254114669532
[2025-10-04 21:41:08] WARNING: Amount less than 10 KES. Setting to minimum 10 KES for sandbox testing.
[2025-10-04 21:41:08] Validated amount: 10
[2025-10-04 21:41:08] Generating access token...
[2025-10-04 21:41:09] Access token response: {
            "access_token": "Vo40bkE3vwoaKLHTAOAs8mkrWqeN",
            "expires_in": "3599"
        }
        
[2025-10-04 21:41:09] Access token generated successfully: Vo40bkE3vw...
[2025-10-04 22:41:09] Using callback URL from reseller settings: https://fd7f49c64822.ngrok-free.app/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-04 22:41:09] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-04 22:41:09] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUxMDA0MjI0MTA5",
    "Timestamp": "20251004224109",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 10,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/fd7f49c64822.ngrok-free.app\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for 1Hr Konnect"
}
[2025-10-04 22:41:09] Sending STK Push request
[2025-10-04 22:41:10] STK Push response: {
            "MerchantRequestID":"8650-45d8-a15a-b8eb285d295a18907",
            "CheckoutRequestID":"ws_CO_04102025224110744114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-10-04 22:41:10] HTTP status code: 200
[2025-10-04 22:41:10] Request took 0.846533 seconds
[2025-10-04 22:41:10] Response data: stdClass Object
(
    [MerchantRequestID] => 8650-45d8-a15a-b8eb285d295a18907
    [CheckoutRequestID] => ws_CO_04102025224110744114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-10-04 22:41:10] STK Push successful! CheckoutRequestID: ws_CO_04102025224110744114669532
[2025-10-04 22:41:10] MerchantRequestID: 8650-45d8-a15a-b8eb285d295a18907
[2025-10-04 22:41:10]  Transaction saved to database with ID: 128 | CheckoutRequestID: ws_CO_04102025224110744114669532
[2025-10-04 22:41:10] Sending successful response to client
[2025-10-04 22:17:37] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-04 22:17:37] POST data: Array
(
    [reseller_id] => 6
    [router_id] => 15
    [package_name] => 1Hr Konnect
    [package_price] => 1.00
    [package_id] => 15
    [payment_gateway] => till
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-04 22:17:37] Form data received: {"resellerId":6,"packageName":"1Hr Konnect","packagePrice":"1.00","mpesaNumber":"254114669532","packageId":15,"routerId":15}
[2025-10-04 22:17:37] Formatted phone number: 254114669532
[2025-10-04 22:17:37] WARNING: Amount less than 10 KES. Setting to minimum 10 KES for sandbox testing.
[2025-10-04 22:17:37] Validated amount: 10
[2025-10-04 22:17:37] Generating access token...
[2025-10-04 22:17:37] Access token response: {
            "access_token": "0Av4AhFIxK2YrkzFhof2w4rfdhi6",
            "expires_in": "3599"
        }
        
[2025-10-04 22:17:37] Access token generated successfully: 0Av4AhFIxK...
[2025-10-04 23:17:37] Using callback URL from reseller settings: https://fd7f49c64822.ngrok-free.app/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-04 23:17:37] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-04 23:17:37] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUxMDA0MjMxNzM3",
    "Timestamp": "20251004231737",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 10,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/fd7f49c64822.ngrok-free.app\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for 1Hr Konnect"
}
[2025-10-04 23:17:37] Sending STK Push request
[2025-10-04 23:17:38] STK Push response: {
            "MerchantRequestID":"5998-46a7-a4aa-5a37a83f21ad32264",
            "CheckoutRequestID":"ws_CO_04102025231739196114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-10-04 23:17:38] HTTP status code: 200
[2025-10-04 23:17:38] Request took 0.978239 seconds
[2025-10-04 23:17:38] Response data: stdClass Object
(
    [MerchantRequestID] => 5998-46a7-a4aa-5a37a83f21ad32264
    [CheckoutRequestID] => ws_CO_04102025231739196114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-10-04 23:17:38] STK Push successful! CheckoutRequestID: ws_CO_04102025231739196114669532
[2025-10-04 23:17:38] MerchantRequestID: 5998-46a7-a4aa-5a37a83f21ad32264
[2025-10-04 23:17:39]  Transaction saved to database with ID: 129 | CheckoutRequestID: ws_CO_04102025231739196114669532
[2025-10-04 23:17:39] Sending successful response to client
[2025-10-08 12:23:43] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-08 12:23:43] POST data: Array
(
    [reseller_id] => 17
    [router_id] => 19
    [package_name] => Konnect
    [package_price] => 11.00
    [package_id] => 30
    [payment_gateway] => till
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-08 12:23:43] Form data received: {"resellerId":17,"packageName":"Konnect","packagePrice":"11.00","mpesaNumber":"254114669532","packageId":30,"routerId":19}
[2025-10-08 12:23:43] Formatted phone number: 254114669532
[2025-10-08 12:23:43] Validated amount: 11
[2025-10-08 12:23:43] Generating access token...
[2025-10-08 12:23:44] Access token response: 
[2025-10-08 12:23:44] Curl error: OpenSSL SSL_connect: SSL_ERROR_SYSCALL in connection to sandbox.safaricom.co.ke:443 
[2025-10-08 12:23:46] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-08 12:23:46] POST data: Array
(
    [reseller_id] => 17
    [router_id] => 19
    [package_name] => Konnect
    [package_price] => 11.00
    [package_id] => 30
    [payment_gateway] => till
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-08 12:23:46] Form data received: {"resellerId":17,"packageName":"Konnect","packagePrice":"11.00","mpesaNumber":"254114669532","packageId":30,"routerId":19}
[2025-10-08 12:23:46] Formatted phone number: 254114669532
[2025-10-08 12:23:46] Validated amount: 11
[2025-10-08 12:23:46] Generating access token...
[2025-10-08 12:23:47] Access token response: 
[2025-10-08 12:23:47] Curl error: OpenSSL SSL_connect: SSL_ERROR_SYSCALL in connection to sandbox.safaricom.co.ke:443 
[2025-10-08 12:23:49] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-08 12:23:49] POST data: Array
(
    [reseller_id] => 17
    [router_id] => 19
    [package_name] => Konnect
    [package_price] => 11.00
    [package_id] => 30
    [payment_gateway] => till
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-08 12:23:49] Form data received: {"resellerId":17,"packageName":"Konnect","packagePrice":"11.00","mpesaNumber":"254114669532","packageId":30,"routerId":19}
[2025-10-08 12:23:49] Formatted phone number: 254114669532
[2025-10-08 12:23:49] Validated amount: 11
[2025-10-08 12:23:49] Generating access token...
[2025-10-08 12:23:49] Access token response: 
[2025-10-08 12:23:49] Curl error: OpenSSL SSL_connect: SSL_ERROR_SYSCALL in connection to sandbox.safaricom.co.ke:443 
[2025-10-08 12:24:07] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-08 12:24:07] POST data: Array
(
    [reseller_id] => 17
    [router_id] => 19
    [package_name] => Konnect
    [package_price] => 11.00
    [package_id] => 30
    [payment_gateway] => till
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-08 12:24:07] Form data received: {"resellerId":17,"packageName":"Konnect","packagePrice":"11.00","mpesaNumber":"254114669532","packageId":30,"routerId":19}
[2025-10-08 12:24:07] Formatted phone number: 254114669532
[2025-10-08 12:24:07] Validated amount: 11
[2025-10-08 12:24:07] Generating access token...
[2025-10-08 12:24:07] Access token response: 
[2025-10-08 12:24:07] Curl error: OpenSSL SSL_connect: SSL_ERROR_SYSCALL in connection to sandbox.safaricom.co.ke:443 
[2025-10-08 12:24:29] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-08 12:24:29] POST data: Array
(
    [reseller_id] => 17
    [router_id] => 19
    [package_name] => Konnect
    [package_price] => 11.00
    [package_id] => 30
    [payment_gateway] => till
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-08 12:24:29] Form data received: {"resellerId":17,"packageName":"Konnect","packagePrice":"11.00","mpesaNumber":"254114669532","packageId":30,"routerId":19}
[2025-10-08 12:24:29] Formatted phone number: 254114669532
[2025-10-08 12:24:29] Validated amount: 11
[2025-10-08 12:24:29] Generating access token...
[2025-10-08 12:24:30] Access token response: {
            "access_token": "IfBuMOc3uY6ATMCAA1k7apFtxPsk",
            "expires_in": "3599"
        }
        
[2025-10-08 12:24:30] Access token generated successfully: IfBuMOc3uY...
[2025-10-08 13:24:30] Using callback URL from reseller settings: https://13a2-197-136-202-10.ngrok-free.app/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-08 13:24:30] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-08 13:24:30] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5MDkwNDlhNmQ2MzY0NTk0NTA1ODNhMDdhZWY3MWNlNDI3ZjY5YTZlNzJmYzgzYjFlOWJkODFkYTQyODI5MmJhMTIwMjUxMDA4MTMyNDMw",
    "Timestamp": "20251008132430",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 11,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/13a2-197-136-202-10.ngrok-free.app\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for Konnect"
}
[2025-10-08 13:24:30] Sending STK Push request
[2025-10-08 13:24:31] STK Push response: {
                    "requestId":"ec67-43aa-9362-0f167cc2e9de74869",
                    "errorCode": "500.001.1001",
                    "errorMessage": "Wrong credentials"
                }
            
[2025-10-08 13:24:31] HTTP status code: 500
[2025-10-08 13:24:31] Request took 0.758803 seconds
[2025-10-08 13:24:31] Response data: stdClass Object
(
    [requestId] => ec67-43aa-9362-0f167cc2e9de74869
    [errorCode] => 500.001.1001
    [errorMessage] => Wrong credentials
)

[2025-10-08 13:24:31] STK Push failed: Wrong credentials
[2025-10-08 12:24:34] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-08 12:24:34] POST data: Array
(
    [reseller_id] => 17
    [router_id] => 19
    [package_name] => Konnect
    [package_price] => 11.00
    [package_id] => 30
    [payment_gateway] => till
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-08 12:24:34] Form data received: {"resellerId":17,"packageName":"Konnect","packagePrice":"11.00","mpesaNumber":"254114669532","packageId":30,"routerId":19}
[2025-10-08 12:24:34] Formatted phone number: 254114669532
[2025-10-08 12:24:34] Validated amount: 11
[2025-10-08 12:24:34] Generating access token...
[2025-10-08 12:24:35] Access token response: {
            "access_token": "NEv0Wh1o6jDKLcnRJ6wK4w7fQVVv",
            "expires_in": "3599"
        }
        
[2025-10-08 12:24:35] Access token generated successfully: NEv0Wh1o6j...
[2025-10-08 13:24:35] Using callback URL from reseller settings: https://13a2-197-136-202-10.ngrok-free.app/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-08 13:24:35] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-08 13:24:35] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5MDkwNDlhNmQ2MzY0NTk0NTA1ODNhMDdhZWY3MWNlNDI3ZjY5YTZlNzJmYzgzYjFlOWJkODFkYTQyODI5MmJhMTIwMjUxMDA4MTMyNDM1",
    "Timestamp": "20251008132435",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 11,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/13a2-197-136-202-10.ngrok-free.app\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for Konnect"
}
[2025-10-08 13:24:35] Sending STK Push request
[2025-10-08 13:24:35] STK Push response: {
                    "requestId":"66c4-495b-8726-76b58dcce90817419",
                    "errorCode": "500.001.1001",
                    "errorMessage": "Wrong credentials"
                }
            
[2025-10-08 13:24:35] HTTP status code: 500
[2025-10-08 13:24:35] Request took 0.786329 seconds
[2025-10-08 13:24:35] Response data: stdClass Object
(
    [requestId] => 66c4-495b-8726-76b58dcce90817419
    [errorCode] => 500.001.1001
    [errorMessage] => Wrong credentials
)

[2025-10-08 13:24:35] STK Push failed: Wrong credentials
[2025-10-08 12:24:52] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-08 12:24:52] POST data: Array
(
    [reseller_id] => 17
    [router_id] => 19
    [package_name] => Konnect
    [package_price] => 11.00
    [package_id] => 30
    [payment_gateway] => till
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-08 12:24:52] Form data received: {"resellerId":17,"packageName":"Konnect","packagePrice":"11.00","mpesaNumber":"254114669532","packageId":30,"routerId":19}
[2025-10-08 12:24:52] Formatted phone number: 254114669532
[2025-10-08 12:24:52] Validated amount: 11
[2025-10-08 12:24:52] Generating access token...
[2025-10-08 12:24:53] Access token response: {
            "access_token": "EhXJco0aidkG9doBFzGQB8rdIiGq",
            "expires_in": "3599"
        }
        
[2025-10-08 12:24:53] Access token generated successfully: EhXJco0aid...
[2025-10-08 13:24:53] Using callback URL from reseller settings: https://13a2-197-136-202-10.ngrok-free.app/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-08 13:24:53] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-08 13:24:53] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5MDkwNDlhNmQ2MzY0NTk0NTA1ODNhMDdhZWY3MWNlNDI3ZjY5YTZlNzJmYzgzYjFlOWJkODFkYTQyODI5MmJhMTIwMjUxMDA4MTMyNDUz",
    "Timestamp": "20251008132453",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 11,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/13a2-197-136-202-10.ngrok-free.app\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for Konnect"
}
[2025-10-08 13:24:53] Sending STK Push request
[2025-10-08 13:24:54] STK Push response: {
                    "requestId":"157e-4eb9-bd2c-b1a695a1173a10470",
                    "errorCode": "500.001.1001",
                    "errorMessage": "Wrong credentials"
                }
            
[2025-10-08 13:24:54] HTTP status code: 500
[2025-10-08 13:24:54] Request took 0.828515 seconds
[2025-10-08 13:24:54] Response data: stdClass Object
(
    [requestId] => 157e-4eb9-bd2c-b1a695a1173a10470
    [errorCode] => 500.001.1001
    [errorMessage] => Wrong credentials
)

[2025-10-08 13:24:54] STK Push failed: Wrong credentials
[2025-10-08 12:25:06] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-08 12:25:06] POST data: Array
(
    [reseller_id] => 17
    [router_id] => 19
    [package_name] => Konnect
    [package_price] => 11.00
    [package_id] => 30
    [payment_gateway] => till
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-08 12:25:06] Form data received: {"resellerId":17,"packageName":"Konnect","packagePrice":"11.00","mpesaNumber":"254114669532","packageId":30,"routerId":19}
[2025-10-08 12:25:06] Formatted phone number: 254114669532
[2025-10-08 12:25:06] Validated amount: 11
[2025-10-08 12:25:06] Generating access token...
[2025-10-08 12:25:07] Access token response: {
            "access_token": "NNgfJqQNARW5lojJO9dl325y3AFt",
            "expires_in": "3599"
        }
        
[2025-10-08 12:25:07] Access token generated successfully: NNgfJqQNAR...
[2025-10-08 13:25:07] Using callback URL from reseller settings: https://13a2-197-136-202-10.ngrok-free.app/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-08 13:25:07] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-08 13:25:07] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5MDkwNDlhNmQ2MzY0NTk0NTA1ODNhMDdhZWY3MWNlNDI3ZjY5YTZlNzJmYzgzYjFlOWJkODFkYTQyODI5MmJhMTIwMjUxMDA4MTMyNTA3",
    "Timestamp": "20251008132507",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 11,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/13a2-197-136-202-10.ngrok-free.app\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for Konnect"
}
[2025-10-08 13:25:07] Sending STK Push request
[2025-10-08 13:25:07] STK Push response: <html style="height:100%"><head><META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW"><meta name="format-detection" content="telephone=no"><meta name="viewport" content="initial-scale=1.0"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><script type="text/javascript" src="/_Incapsula_Resource?SWJIYLWA=719d34d31c8e3a6e6fffd425f7e032f3"></script></head><body style="margin:0px;height:100%"><iframe id="main-iframe" src="/_Incapsula_Resource?CWUDNSAI=23&xinfo=51-251022814-0%200NNN%20RT%281759919109635%20272%29%20q%280%20-1%20-1%20-1%29%20r%280%20-1%29%20B15%2811%2c6926146%2c0%29%20U6&incident_id=899000141601386563-1504962063905260467&edet=15&cinfo=0b000000&rpinfo=0&cip=154.159.252.243&mth=POST" frameborder=0 width="100%" height="100%" marginheight="0px" marginwidth="0px">Request unsuccessful. Incapsula incident ID: 899000141601386563-1504962063905260467</iframe></body></html>
[2025-10-08 13:25:07] HTTP status code: 403
[2025-10-08 13:25:07] Request took 0.503227 seconds
[2025-10-08 13:25:07] Response data: 
[2025-10-08 13:25:07] STK Push failed: Unknown error
[2025-10-08 12:25:45] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-08 12:25:45] POST data: Array
(
    [reseller_id] => 6
    [router_id] => 15
    [package_name] => 1Hr Konnect
    [package_price] => 1.00
    [package_id] => 15
    [payment_gateway] => till
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-08 12:25:45] Form data received: {"resellerId":6,"packageName":"1Hr Konnect","packagePrice":"1.00","mpesaNumber":"254114669532","packageId":15,"routerId":15}
[2025-10-08 12:25:45] Formatted phone number: 254114669532
[2025-10-08 12:25:45] WARNING: Amount less than 10 KES. Setting to minimum 10 KES for sandbox testing.
[2025-10-08 12:25:45] Validated amount: 10
[2025-10-08 12:25:45] Generating access token...
[2025-10-08 12:25:46] Access token response: {
            "access_token": "QA7x0lAyMU9bsGSxV6tTYGfchqoq",
            "expires_in": "3599"
        }
        
[2025-10-08 12:25:46] Access token generated successfully: QA7x0lAyMU...
[2025-10-08 13:25:46] Using callback URL from reseller settings: https://fd7f49c64822.ngrok-free.app/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-08 13:25:46] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-08 13:25:46] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUxMDA4MTMyNTQ2",
    "Timestamp": "20251008132546",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 10,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/fd7f49c64822.ngrok-free.app\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for 1Hr Konnect"
}
[2025-10-08 13:25:46] Sending STK Push request
[2025-10-08 13:25:47] STK Push response: {
            "MerchantRequestID":"ec67-43aa-9362-0f167cc2e9de74884",
            "CheckoutRequestID":"ws_CO_08102025132549503114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-10-08 13:25:47] HTTP status code: 200
[2025-10-08 13:25:47] Request took 1.015984 seconds
[2025-10-08 13:25:47] Response data: stdClass Object
(
    [MerchantRequestID] => ec67-43aa-9362-0f167cc2e9de74884
    [CheckoutRequestID] => ws_CO_08102025132549503114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-10-08 13:25:47] STK Push successful! CheckoutRequestID: ws_CO_08102025132549503114669532
[2025-10-08 13:25:47] MerchantRequestID: ec67-43aa-9362-0f167cc2e9de74884
[2025-10-08 13:25:47]  Transaction saved to database with ID: 130 | CheckoutRequestID: ws_CO_08102025132549503114669532
[2025-10-08 13:25:47] Sending successful response to client
[2025-10-17 12:21:05] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-17 12:21:05] POST data: Array
(
    [reseller_id] => 17
    [router_id] => 20
    [package_name] => Game Connect
    [package_price] => 5.00
    [package_id] => 31
    [payment_gateway] => till
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-17 12:21:05] Form data received: {"resellerId":17,"packageName":"Game Connect","packagePrice":"5.00","mpesaNumber":"254114669532","packageId":31,"routerId":20}
[2025-10-17 12:21:05] Formatted phone number: 254114669532
[2025-10-17 12:21:05] WARNING: Amount less than 10 KES. Setting to minimum 10 KES for sandbox testing.
[2025-10-17 12:21:05] Validated amount: 10
[2025-10-17 12:21:05] Generating access token...
[2025-10-17 12:21:06] Access token response: {
            "access_token": "UPK1nslenluUZm4U4gBwISbfnGBf",
            "expires_in": "3599"
        }
        
[2025-10-17 12:21:06] Access token generated successfully: UPK1nslenl...
[2025-10-17 13:21:06] Using callback URL from reseller settings: https://13a2-197-136-202-10.ngrok-free.app/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-17 13:21:06] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-17 13:21:06] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5MDkwNDlhNmQ2MzY0NTk0NTA1ODNhMDdhZWY3MWNlNDI3ZjY5YTZlNzJmYzgzYjFlOWJkODFkYTQyODI5MmJhMTIwMjUxMDE3MTMyMTA2",
    "Timestamp": "20251017132106",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 10,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/13a2-197-136-202-10.ngrok-free.app\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for Game Connect"
}
[2025-10-17 13:21:06] Sending STK Push request
[2025-10-17 13:21:13] STK Push response: {
            "MerchantRequestID":"6f23-4b16-bfec-a4fbda25dc0521955",
            "CheckoutRequestID":"ws_CO_17102025132109810114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-10-17 13:21:13] HTTP status code: 200
[2025-10-17 13:21:13] Request took 6.306842 seconds
[2025-10-17 13:21:13] Response data: stdClass Object
(
    [MerchantRequestID] => 6f23-4b16-bfec-a4fbda25dc0521955
    [CheckoutRequestID] => ws_CO_17102025132109810114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-10-17 13:21:13] STK Push successful! CheckoutRequestID: ws_CO_17102025132109810114669532
[2025-10-17 13:21:13] MerchantRequestID: 6f23-4b16-bfec-a4fbda25dc0521955
[2025-10-17 13:21:13]  Transaction saved to database with ID: 131 | CheckoutRequestID: ws_CO_17102025132109810114669532
[2025-10-17 13:21:13] Sending successful response to client
[2025-10-20 19:26:36] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-20 19:26:36] POST data: Array
(
    [reseller_id] => 17
    [router_id] => 19
    [package_name] => Konnect
    [package_price] => 11.00
    [package_id] => 30
    [payment_gateway] => till
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-20 19:26:36] Form data received: {"resellerId":17,"packageName":"Konnect","packagePrice":"11.00","mpesaNumber":"254114669532","packageId":30,"routerId":19}
[2025-10-20 19:26:36] Formatted phone number: 254114669532
[2025-10-20 19:26:36] Validated amount: 11
[2025-10-20 19:26:36] Generating access token...
[2025-10-20 19:26:38] Access token response: {
            "access_token": "foiuGpzCxkMvmMeZOstpnurd1eBS",
            "expires_in": "3599"
        }
        
[2025-10-20 19:26:38] Access token generated successfully: foiuGpzCxk...
[2025-10-20 20:26:38] Using callback URL from reseller settings: https://13a2-197-136-202-10.ngrok-free.app/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-20 20:26:38] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-20 20:26:38] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5MDkwNDlhNmQ2MzY0NTk0NTA1ODNhMDdhZWY3MWNlNDI3ZjY5YTZlNzJmYzgzYjFlOWJkODFkYTQyODI5MmJhMTIwMjUxMDIwMjAyNjM4",
    "Timestamp": "20251020202638",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 11,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/13a2-197-136-202-10.ngrok-free.app\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for Konnect"
}
[2025-10-20 20:26:38] Sending STK Push request
[2025-10-20 20:26:41] STK Push response: {
                    "requestId":"94ee-4aa2-9826-0f5e5087ff067995",
                    "errorCode": "500.001.1001",
                    "errorMessage": "Wrong credentials"
                }
            
[2025-10-20 20:26:41] HTTP status code: 500
[2025-10-20 20:26:41] Request took 3.757286 seconds
[2025-10-20 20:26:41] Response data: stdClass Object
(
    [requestId] => 94ee-4aa2-9826-0f5e5087ff067995
    [errorCode] => 500.001.1001
    [errorMessage] => Wrong credentials
)

[2025-10-20 20:26:41] STK Push failed: Wrong credentials
[2025-10-20 20:11:04] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-20 20:11:04] POST data: Array
(
    [reseller_id] => 21
    [router_id] => 22
    [package_name] => 1 Hr Package
    [package_price] => 12.00
    [package_id] => 32
    [payment_gateway] => phone
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-20 20:11:04] Form data received: {"resellerId":21,"packageName":"1 Hr Package","packagePrice":"12.00","mpesaNumber":"254114669532","packageId":32,"routerId":22}
[2025-10-20 20:11:04] Formatted phone number: 254114669532
[2025-10-20 20:11:04] Validated amount: 12
[2025-10-20 20:11:04] Generating access token...
[2025-10-20 20:11:05] Access token response: 
[2025-10-20 20:11:05] Failed to generate access token: Unknown error
[2025-10-20 20:11:11] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-20 20:11:11] POST data: Array
(
    [reseller_id] => 21
    [router_id] => 22
    [package_name] => 1 Hr Package
    [package_price] => 12.00
    [package_id] => 32
    [payment_gateway] => phone
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-20 20:11:11] Form data received: {"resellerId":21,"packageName":"1 Hr Package","packagePrice":"12.00","mpesaNumber":"254114669532","packageId":32,"routerId":22}
[2025-10-20 20:11:11] Formatted phone number: 254114669532
[2025-10-20 20:11:11] Validated amount: 12
[2025-10-20 20:11:11] Generating access token...
[2025-10-20 20:11:11] Access token response: 
[2025-10-20 20:11:11] Failed to generate access token: Unknown error
[2025-10-20 20:11:15] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-20 20:11:15] POST data: Array
(
    [reseller_id] => 21
    [router_id] => 22
    [package_name] => 1 Hr Package
    [package_price] => 12.00
    [package_id] => 32
    [payment_gateway] => phone
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-20 20:11:15] Form data received: {"resellerId":21,"packageName":"1 Hr Package","packagePrice":"12.00","mpesaNumber":"254114669532","packageId":32,"routerId":22}
[2025-10-20 20:11:15] Formatted phone number: 254114669532
[2025-10-20 20:11:15] Validated amount: 12
[2025-10-20 20:11:15] Generating access token...
[2025-10-20 20:11:15] Access token response: 
[2025-10-20 20:11:15] Failed to generate access token: Unknown error
[2025-10-20 20:23:33] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-20 20:23:33] POST data: Array
(
    [reseller_id] => 21
    [router_id] => 22
    [package_name] => 1 Hr Package
    [package_price] => 12.00
    [package_id] => 32
    [payment_gateway] => phone
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-20 20:23:33] Form data received: {"resellerId":21,"packageName":"1 Hr Package","packagePrice":"12.00","mpesaNumber":"254114669532","packageId":32,"routerId":22}
[2025-10-20 20:23:33] Formatted phone number: 254114669532
[2025-10-20 20:23:33] Validated amount: 12
[2025-10-20 20:23:33] M-Pesa Credentials Retrieved:
[2025-10-20 20:23:33]   - Payment Gateway: phone
[2025-10-20 20:23:33]   - Environment: sandbox
[2025-10-20 20:23:33]   - Consumer Key:  SET (48 chars)
[2025-10-20 20:23:33]   - Consumer Secret:  SET (64 chars)
[2025-10-20 20:23:33]   - Business Shortcode: 174379
[2025-10-20 20:23:33]   - Callback URL: https://5f9fa7362e95.ngrok-free.app/SAAS/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-20 20:23:33] Generating access token...
[2025-10-20 20:23:35] Access token response: {
            "access_token": "ZCgbdA2682jGtqKr69R8bfcA6b3Y",
            "expires_in": "3599"
        }
        
[2025-10-20 20:23:35] Access token generated successfully: ZCgbdA2682...
[2025-10-20 21:23:35] Using callback URL from reseller settings: https://5f9fa7362e95.ngrok-free.app/SAAS/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-20 21:23:35] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-20 21:23:35] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUxMDIwMjEyMzM1",
    "Timestamp": "20251020212335",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 12,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/5f9fa7362e95.ngrok-free.app\/SAAS\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for 1 Hr Package"
}
[2025-10-20 21:23:35] Sending STK Push request
[2025-10-20 21:23:36] STK Push response: {
            "MerchantRequestID":"637b-46ff-b231-d1b29c9a0cf79926",
            "CheckoutRequestID":"ws_CO_20102025212336964114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-10-20 21:23:36] HTTP status code: 200
[2025-10-20 21:23:36] Request took 0.92496 seconds
[2025-10-20 21:23:36] Response data: stdClass Object
(
    [MerchantRequestID] => 637b-46ff-b231-d1b29c9a0cf79926
    [CheckoutRequestID] => ws_CO_20102025212336964114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-10-20 21:23:36] STK Push successful! CheckoutRequestID: ws_CO_20102025212336964114669532
[2025-10-20 21:23:36] MerchantRequestID: 637b-46ff-b231-d1b29c9a0cf79926
[2025-10-20 21:23:36]  Transaction saved to database with ID: 132 | CheckoutRequestID: ws_CO_20102025212336964114669532
[2025-10-20 21:23:36] Sending successful response to client
[2025-10-20 20:37:12] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-20 20:37:12] POST data: Array
(
    [reseller_id] => 21
    [router_id] => 22
    [package_name] => 1 Hr Package
    [package_price] => 12.00
    [package_id] => 32
    [payment_gateway] => phone
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-20 20:37:12] Form data received: {"resellerId":21,"packageName":"1 Hr Package","packagePrice":"12.00","mpesaNumber":"254114669532","packageId":32,"routerId":22}
[2025-10-20 20:37:12] Formatted phone number: 254114669532
[2025-10-20 20:37:12] Validated amount: 12
[2025-10-20 20:37:12] M-Pesa Credentials Retrieved:
[2025-10-20 20:37:12]   - Payment Gateway: phone
[2025-10-20 20:37:12]   - Environment: sandbox
[2025-10-20 20:37:12]   - Consumer Key:  SET (48 chars)
[2025-10-20 20:37:12]   - Consumer Secret:  SET (64 chars)
[2025-10-20 20:37:12]   - Business Shortcode: 174379
[2025-10-20 20:37:12]   - Callback URL: https://66accf695d88.ngrok-free.app/SAAS/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-20 20:37:12] Generating access token...
[2025-10-20 20:37:13] Access token response: {
            "access_token": "DLtPtP21tdBLoBztpoqOASPtyCAG",
            "expires_in": "3599"
        }
        
[2025-10-20 20:37:13] Access token generated successfully: DLtPtP21td...
[2025-10-20 21:37:13] Using callback URL from reseller settings: https://66accf695d88.ngrok-free.app/SAAS/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-20 21:37:13] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-20 21:37:13] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUxMDIwMjEzNzEz",
    "Timestamp": "20251020213713",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 12,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/66accf695d88.ngrok-free.app\/SAAS\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for 1 Hr Package"
}
[2025-10-20 21:37:13] Sending STK Push request
[2025-10-20 21:37:15] STK Push response: {
            "MerchantRequestID":"f98c-4622-b5bf-31e882f0b43311437",
            "CheckoutRequestID":"ws_CO_20102025213716096114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-10-20 21:37:15] HTTP status code: 200
[2025-10-20 21:37:15] Request took 2.146632 seconds
[2025-10-20 21:37:15] Response data: stdClass Object
(
    [MerchantRequestID] => f98c-4622-b5bf-31e882f0b43311437
    [CheckoutRequestID] => ws_CO_20102025213716096114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-10-20 21:37:15] STK Push successful! CheckoutRequestID: ws_CO_20102025213716096114669532
[2025-10-20 21:37:15] MerchantRequestID: f98c-4622-b5bf-31e882f0b43311437
[2025-10-20 21:37:15]  Transaction saved to database with ID: 133 | CheckoutRequestID: ws_CO_20102025213716096114669532
[2025-10-20 21:37:15] Sending successful response to client
[2025-10-20 20:39:06] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-20 20:39:06] POST data: Array
(
    [reseller_id] => 21
    [router_id] => 22
    [package_name] => 1 Hr Package
    [package_price] => 12.00
    [package_id] => 32
    [payment_gateway] => phone
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-20 20:39:06] Form data received: {"resellerId":21,"packageName":"1 Hr Package","packagePrice":"12.00","mpesaNumber":"254114669532","packageId":32,"routerId":22}
[2025-10-20 20:39:06] Formatted phone number: 254114669532
[2025-10-20 20:39:06] Validated amount: 12
[2025-10-20 20:39:06] M-Pesa Credentials Retrieved:
[2025-10-20 20:39:06]   - Payment Gateway: phone
[2025-10-20 20:39:06]   - Environment: sandbox
[2025-10-20 20:39:06]   - Consumer Key:  SET (48 chars)
[2025-10-20 20:39:06]   - Consumer Secret:  SET (64 chars)
[2025-10-20 20:39:06]   - Business Shortcode: 174379
[2025-10-20 20:39:06]   - Callback URL: https://66accf695d88.ngrok-free.app/SAAS/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-20 20:39:06] Generating access token...
[2025-10-20 20:39:06] Access token response: {
            "access_token": "BINVF5qPkkZxQtyODyyekPbndAW9",
            "expires_in": "3599"
        }
        
[2025-10-20 20:39:06] Access token generated successfully: BINVF5qPkk...
[2025-10-20 21:39:06] Using callback URL from reseller settings: https://66accf695d88.ngrok-free.app/SAAS/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-20 21:39:06] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-20 21:39:06] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUxMDIwMjEzOTA2",
    "Timestamp": "20251020213906",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 12,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/66accf695d88.ngrok-free.app\/SAAS\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for 1 Hr Package"
}
[2025-10-20 21:39:06] Sending STK Push request
[2025-10-20 21:39:07] STK Push response: {
            "MerchantRequestID":"5c3b-422b-b5fb-8525d105316a11242",
            "CheckoutRequestID":"ws_CO_20102025213908350114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-10-20 21:39:07] HTTP status code: 200
[2025-10-20 21:39:07] Request took 0.913236 seconds
[2025-10-20 21:39:07] Response data: stdClass Object
(
    [MerchantRequestID] => 5c3b-422b-b5fb-8525d105316a11242
    [CheckoutRequestID] => ws_CO_20102025213908350114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-10-20 21:39:07] STK Push successful! CheckoutRequestID: ws_CO_20102025213908350114669532
[2025-10-20 21:39:07] MerchantRequestID: 5c3b-422b-b5fb-8525d105316a11242
[2025-10-20 21:39:07]  Transaction saved to database with ID: 134 | CheckoutRequestID: ws_CO_20102025213908350114669532
[2025-10-20 21:39:07] Sending successful response to client
[2025-10-20 21:02:35] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-20 21:02:35] POST data: Array
(
    [reseller_id] => 21
    [router_id] => 22
    [package_name] => 1 Hr Package
    [package_price] => 12.00
    [package_id] => 32
    [payment_gateway] => phone
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-20 21:02:35] Form data received: {"resellerId":21,"packageName":"1 Hr Package","packagePrice":"12.00","mpesaNumber":"254114669532","packageId":32,"routerId":22}
[2025-10-20 21:02:35] Formatted phone number: 254114669532
[2025-10-20 21:02:35] Validated amount: 12
[2025-10-20 21:02:35] M-Pesa Credentials Retrieved:
[2025-10-20 21:02:35]   - Payment Gateway: phone
[2025-10-20 21:02:35]   - Environment: sandbox
[2025-10-20 21:02:35]   - Consumer Key:  SET (48 chars)
[2025-10-20 21:02:35]   - Consumer Secret:  SET (64 chars)
[2025-10-20 21:02:35]   - Business Shortcode: 174379
[2025-10-20 21:02:35]   - Callback URL: https://66accf695d88.ngrok-free.app/SAAS/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-20 21:02:35] Generating access token...
[2025-10-20 21:02:38] Access token response: {
            "access_token": "urPZdy80r0cW0uWYN9Hm0PrGdVG4",
            "expires_in": "3599"
        }
        
[2025-10-20 21:02:38] Access token generated successfully: urPZdy80r0...
[2025-10-20 22:02:38] Using callback URL from reseller settings: https://66accf695d88.ngrok-free.app/SAAS/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-20 22:02:38] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-20 22:02:38] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUxMDIwMjIwMjM4",
    "Timestamp": "20251020220238",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 12,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/66accf695d88.ngrok-free.app\/SAAS\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for 1 Hr Package"
}
[2025-10-20 22:02:38] Sending STK Push request
[2025-10-20 22:02:39] STK Push response: {
            "MerchantRequestID":"94ee-4aa2-9826-0f5e5087ff068921",
            "CheckoutRequestID":"ws_CO_20102025220240093114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-10-20 22:02:39] HTTP status code: 200
[2025-10-20 22:02:39] Request took 0.949529 seconds
[2025-10-20 22:02:39] Response data: stdClass Object
(
    [MerchantRequestID] => 94ee-4aa2-9826-0f5e5087ff068921
    [CheckoutRequestID] => ws_CO_20102025220240093114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-10-20 22:02:39] STK Push successful! CheckoutRequestID: ws_CO_20102025220240093114669532
[2025-10-20 22:02:39] MerchantRequestID: 94ee-4aa2-9826-0f5e5087ff068921
[2025-10-20 22:02:39]  Transaction saved to database with ID: 135 | CheckoutRequestID: ws_CO_20102025220240093114669532
[2025-10-20 22:02:39] Sending successful response to client
[2025-10-20 21:12:34] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-20 21:12:34] POST data: Array
(
    [reseller_id] => 21
    [router_id] => 22
    [package_name] => 1 Hr Package
    [package_price] => 12.00
    [package_id] => 32
    [payment_gateway] => phone
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-20 21:12:34] Form data received: {"resellerId":21,"packageName":"1 Hr Package","packagePrice":"12.00","mpesaNumber":"254114669532","packageId":32,"routerId":22}
[2025-10-20 21:12:34] Formatted phone number: 254114669532
[2025-10-20 21:12:34] Validated amount: 12
[2025-10-20 21:12:34] M-Pesa Credentials Retrieved:
[2025-10-20 21:12:34]   - Payment Gateway: phone
[2025-10-20 21:12:34]   - Environment: sandbox
[2025-10-20 21:12:34]   - Consumer Key:  SET (48 chars)
[2025-10-20 21:12:34]   - Consumer Secret:  SET (64 chars)
[2025-10-20 21:12:34]   - Business Shortcode: 174379
[2025-10-20 21:12:34]   - Callback URL: https://66accf695d88.ngrok-free.app/SAAS/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-20 21:12:34] Generating access token...
[2025-10-20 21:12:35] Access token response: {
            "access_token": "IPLIrvNiPsc3hwwxuG7BEqhcJCGi",
            "expires_in": "3599"
        }
        
[2025-10-20 21:12:35] Access token generated successfully: IPLIrvNiPs...
[2025-10-20 22:12:35] Using callback URL from reseller settings: https://66accf695d88.ngrok-free.app/SAAS/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-20 22:12:35] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-20 22:12:35] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUxMDIwMjIxMjM1",
    "Timestamp": "20251020221235",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 12,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/66accf695d88.ngrok-free.app\/SAAS\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for 1 Hr Package"
}
[2025-10-20 22:12:35] Sending STK Push request
[2025-10-20 22:12:35] STK Push response: {
            "MerchantRequestID":"94ee-4aa2-9826-0f5e5087ff069011",
            "CheckoutRequestID":"ws_CO_20102025221236408114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-10-20 22:12:35] HTTP status code: 200
[2025-10-20 22:12:35] Request took 0.69783 seconds
[2025-10-20 22:12:35] Response data: stdClass Object
(
    [MerchantRequestID] => 94ee-4aa2-9826-0f5e5087ff069011
    [CheckoutRequestID] => ws_CO_20102025221236408114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-10-20 22:12:35] STK Push successful! CheckoutRequestID: ws_CO_20102025221236408114669532
[2025-10-20 22:12:35] MerchantRequestID: 94ee-4aa2-9826-0f5e5087ff069011
[2025-10-20 22:12:35]  Transaction saved to database with ID: 136 | CheckoutRequestID: ws_CO_20102025221236408114669532
[2025-10-20 22:12:35] Sending successful response to client
[2025-10-21 15:24:25] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-21 15:24:25] POST data: Array
(
    [reseller_id] => 23
    [router_id] => 26
    [package_name] => 2HR Qtro Konnect
    [package_price] => 10.00
    [package_id] => 40
    [payment_gateway] => phone
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-21 15:24:25] Form data received: {"resellerId":23,"packageName":"2HR Qtro Konnect","packagePrice":"10.00","mpesaNumber":"254114669532","packageId":40,"routerId":26}
[2025-10-21 15:24:25] Formatted phone number: 254114669532
[2025-10-21 15:24:25] Validated amount: 10
[2025-10-21 15:24:25] M-Pesa Credentials Retrieved:
[2025-10-21 15:24:25]   - Payment Gateway: phone
[2025-10-21 15:24:25]   - Environment: sandbox
[2025-10-21 15:24:25]   - Consumer Key:  SET (48 chars)
[2025-10-21 15:24:25]   - Consumer Secret:  SET (64 chars)
[2025-10-21 15:24:25]   - Business Shortcode: 174379
[2025-10-21 15:24:25]   - Callback URL: https://66accf695d88.ngrok-free.app/SAAS/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-21 15:24:25] Generating access token...
[2025-10-21 15:24:36] Access token response: 
[2025-10-21 15:24:36] Curl error: Could not resolve host: sandbox.safaricom.co.ke
[2025-10-21 15:24:54] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-21 15:24:54] POST data: Array
(
    [reseller_id] => 23
    [router_id] => 26
    [package_name] => 2HR Qtro Konnect
    [package_price] => 10.00
    [package_id] => 40
    [payment_gateway] => phone
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-21 15:24:54] Form data received: {"resellerId":23,"packageName":"2HR Qtro Konnect","packagePrice":"10.00","mpesaNumber":"254114669532","packageId":40,"routerId":26}
[2025-10-21 15:24:54] Formatted phone number: 254114669532
[2025-10-21 15:24:54] Validated amount: 10
[2025-10-21 15:24:54] M-Pesa Credentials Retrieved:
[2025-10-21 15:24:54]   - Payment Gateway: phone
[2025-10-21 15:24:54]   - Environment: sandbox
[2025-10-21 15:24:54]   - Consumer Key:  SET (48 chars)
[2025-10-21 15:24:54]   - Consumer Secret:  SET (64 chars)
[2025-10-21 15:24:54]   - Business Shortcode: 174379
[2025-10-21 15:24:54]   - Callback URL: https://66accf695d88.ngrok-free.app/SAAS/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-21 15:24:54] Generating access token...
[2025-10-21 15:24:55] Access token response: 
[2025-10-21 15:24:55] Curl error: Could not resolve host: sandbox.safaricom.co.ke
[2025-10-21 15:24:57] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-21 15:24:57] POST data: Array
(
    [reseller_id] => 23
    [router_id] => 26
    [package_name] => 2HR Qtro Konnect
    [package_price] => 10.00
    [package_id] => 40
    [payment_gateway] => phone
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-21 15:24:57] Form data received: {"resellerId":23,"packageName":"2HR Qtro Konnect","packagePrice":"10.00","mpesaNumber":"254114669532","packageId":40,"routerId":26}
[2025-10-21 15:24:57] Formatted phone number: 254114669532
[2025-10-21 15:24:57] Validated amount: 10
[2025-10-21 15:24:57] M-Pesa Credentials Retrieved:
[2025-10-21 15:24:57]   - Payment Gateway: phone
[2025-10-21 15:24:57]   - Environment: sandbox
[2025-10-21 15:24:57]   - Consumer Key:  SET (48 chars)
[2025-10-21 15:24:57]   - Consumer Secret:  SET (64 chars)
[2025-10-21 15:24:57]   - Business Shortcode: 174379
[2025-10-21 15:24:57]   - Callback URL: https://66accf695d88.ngrok-free.app/SAAS/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-21 15:24:57] Generating access token...
[2025-10-21 15:24:57] Access token response: 
[2025-10-21 15:24:57] Curl error: Could not resolve host: sandbox.safaricom.co.ke
[2025-10-21 18:30:44] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-21 18:30:44] POST data: Array
(
    [reseller_id] => 23
    [router_id] => 26
    [package_name] => 2HR Qtro Konnect
    [package_price] => 10.00
    [package_id] => 40
    [payment_gateway] => phone
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-21 18:30:44] Form data received: {"resellerId":23,"packageName":"2HR Qtro Konnect","packagePrice":"10.00","mpesaNumber":"254114669532","packageId":40,"routerId":26}
[2025-10-21 18:30:44] Formatted phone number: 254114669532
[2025-10-21 18:30:44] Validated amount: 10
[2025-10-21 18:30:44] M-Pesa Credentials Retrieved:
[2025-10-21 18:30:44]   - Payment Gateway: phone
[2025-10-21 18:30:44]   - Environment: sandbox
[2025-10-21 18:30:44]   - Consumer Key:  SET (48 chars)
[2025-10-21 18:30:44]   - Consumer Secret:  SET (64 chars)
[2025-10-21 18:30:44]   - Business Shortcode: 174379
[2025-10-21 18:30:44]   - Callback URL: https://66accf695d88.ngrok-free.app/SAAS/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-21 18:30:44] Generating access token...
[2025-10-21 18:30:45] Access token response: {
            "access_token": "dnOxURZ5PuGOuBtzLiEZHzICujx6",
            "expires_in": "3599"
        }
        
[2025-10-21 18:30:45] Access token generated successfully: dnOxURZ5Pu...
[2025-10-21 19:30:45] Using system callback URL: https://66accf695d88.ngrok-free.app/SAAS/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-21 19:30:45] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-21 19:30:45] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUxMDIxMTkzMDQ1",
    "Timestamp": "20251021193045",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 10,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/66accf695d88.ngrok-free.app\/SAAS\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for 2HR Qtro Konnect"
}
[2025-10-21 19:30:45] Sending STK Push request
[2025-10-21 19:30:46] STK Push response: {
            "MerchantRequestID":"b745-4ef9-a475-c3183dc804941489",
            "CheckoutRequestID":"ws_CO_21102025193046489114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-10-21 19:30:46] HTTP status code: 200
[2025-10-21 19:30:46] Request took 1.272466 seconds
[2025-10-21 19:30:46] Response data: stdClass Object
(
    [MerchantRequestID] => b745-4ef9-a475-c3183dc804941489
    [CheckoutRequestID] => ws_CO_21102025193046489114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-10-21 19:30:46] STK Push successful! CheckoutRequestID: ws_CO_21102025193046489114669532
[2025-10-21 19:30:46] MerchantRequestID: b745-4ef9-a475-c3183dc804941489
[2025-10-21 19:30:46]  Transaction saved to database with ID: 137 | CheckoutRequestID: ws_CO_21102025193046489114669532
[2025-10-21 19:30:46] Sending successful response to client
[2025-10-21 18:39:07] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-21 18:39:07] POST data: Array
(
    [reseller_id] => 23
    [router_id] => 26
    [package_name] => 2HR Qtro Konnect
    [package_price] => 10.00
    [package_id] => 40
    [payment_gateway] => phone
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-21 18:39:07] Form data received: {"resellerId":23,"packageName":"2HR Qtro Konnect","packagePrice":"10.00","mpesaNumber":"254114669532","packageId":40,"routerId":26}
[2025-10-21 18:39:07] Formatted phone number: 254114669532
[2025-10-21 18:39:07] Validated amount: 10
[2025-10-21 18:39:07] M-Pesa Credentials Retrieved:
[2025-10-21 18:39:07]   - Payment Gateway: phone
[2025-10-21 18:39:07]   - Environment: sandbox
[2025-10-21 18:39:07]   - Consumer Key:  SET (48 chars)
[2025-10-21 18:39:07]   - Consumer Secret:  SET (64 chars)
[2025-10-21 18:39:07]   - Business Shortcode: 174379
[2025-10-21 18:39:07]   - Callback URL: https://71f03f4e8463.ngrok-free.app/SAAS/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-21 18:39:07] Generating access token...
[2025-10-21 18:39:07] Access token response: {
            "access_token": "l6hq8zshbCCU83NhA2MTfP9S4U4A",
            "expires_in": "3599"
        }
        
[2025-10-21 18:39:07] Access token generated successfully: l6hq8zshbC...
[2025-10-21 19:39:07] Using system callback URL: https://71f03f4e8463.ngrok-free.app/SAAS/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-21 19:39:07] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-21 19:39:07] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUxMDIxMTkzOTA3",
    "Timestamp": "20251021193907",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 10,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/71f03f4e8463.ngrok-free.app\/SAAS\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for 2HR Qtro Konnect"
}
[2025-10-21 19:39:07] Sending STK Push request
[2025-10-21 19:39:08] STK Push response: {
            "MerchantRequestID":"f98c-4622-b5bf-31e882f0b43332322",
            "CheckoutRequestID":"ws_CO_21102025193908439114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-10-21 19:39:08] HTTP status code: 200
[2025-10-21 19:39:08] Request took 0.879755 seconds
[2025-10-21 19:39:08] Response data: stdClass Object
(
    [MerchantRequestID] => f98c-4622-b5bf-31e882f0b43332322
    [CheckoutRequestID] => ws_CO_21102025193908439114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-10-21 19:39:08] STK Push successful! CheckoutRequestID: ws_CO_21102025193908439114669532
[2025-10-21 19:39:08] MerchantRequestID: f98c-4622-b5bf-31e882f0b43332322
[2025-10-21 19:39:08]  Transaction saved to database with ID: 138 | CheckoutRequestID: ws_CO_21102025193908439114669532
[2025-10-21 19:39:08] Sending successful response to client
[2025-10-21 18:42:40] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-21 18:42:40] POST data: Array
(
    [reseller_id] => 23
    [router_id] => 26
    [package_name] => 2HR Qtro Konnect
    [package_price] => 10.00
    [package_id] => 40
    [payment_gateway] => phone
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-21 18:42:40] Form data received: {"resellerId":23,"packageName":"2HR Qtro Konnect","packagePrice":"10.00","mpesaNumber":"254114669532","packageId":40,"routerId":26}
[2025-10-21 18:42:40] Formatted phone number: 254114669532
[2025-10-21 18:42:40] Validated amount: 10
[2025-10-21 18:42:40] M-Pesa Credentials Retrieved:
[2025-10-21 18:42:40]   - Payment Gateway: phone
[2025-10-21 18:42:40]   - Environment: sandbox
[2025-10-21 18:42:40]   - Consumer Key:  SET (48 chars)
[2025-10-21 18:42:40]   - Consumer Secret:  SET (64 chars)
[2025-10-21 18:42:40]   - Business Shortcode: 174379
[2025-10-21 18:42:40]   - Callback URL: https://71f03f4e8463.ngrok-free.app/SAAS/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-21 18:42:40] Generating access token...
[2025-10-21 18:42:41] Access token response: {
            "access_token": "jSLhkWAcb7lzhW8bdC9fzcX6Fnec",
            "expires_in": "3599"
        }
        
[2025-10-21 18:42:41] Access token generated successfully: jSLhkWAcb7...
[2025-10-21 19:42:41] Using system callback URL: https://71f03f4e8463.ngrok-free.app/SAAS/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-21 19:42:41] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-21 19:42:41] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUxMDIxMTk0MjQx",
    "Timestamp": "20251021194241",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 10,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/71f03f4e8463.ngrok-free.app\/SAAS\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for 2HR Qtro Konnect"
}
[2025-10-21 19:42:41] Sending STK Push request
[2025-10-21 19:42:42] STK Push response: {
            "MerchantRequestID":"b745-4ef9-a475-c3183dc804941713",
            "CheckoutRequestID":"ws_CO_21102025194241705114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-10-21 19:42:42] HTTP status code: 200
[2025-10-21 19:42:42] Request took 0.827976 seconds
[2025-10-21 19:42:42] Response data: stdClass Object
(
    [MerchantRequestID] => b745-4ef9-a475-c3183dc804941713
    [CheckoutRequestID] => ws_CO_21102025194241705114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-10-21 19:42:42] STK Push successful! CheckoutRequestID: ws_CO_21102025194241705114669532
[2025-10-21 19:42:42] MerchantRequestID: b745-4ef9-a475-c3183dc804941713
[2025-10-21 19:42:42]  Transaction saved to database with ID: 139 | CheckoutRequestID: ws_CO_21102025194241705114669532
[2025-10-21 19:42:42] Sending successful response to client
[2025-10-27 16:13:36] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-27 16:13:36] POST data: Array
(
    [reseller_id] => 17
    [router_id] => 19
    [package_name] => Konnect
    [package_price] => 11.00
    [package_id] => 30
    [payment_gateway] => till
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-27 16:13:36] Form data received: {"resellerId":17,"packageName":"Konnect","packagePrice":"11.00","mpesaNumber":"254114669532","packageId":30,"routerId":19}
[2025-10-27 16:13:36] Formatted phone number: 254114669532
[2025-10-27 16:13:36] Validated amount: 11
[2025-10-27 16:13:36] M-Pesa Credentials Retrieved:
[2025-10-27 16:13:36]   - Payment Gateway: till
[2025-10-27 16:13:36]   - Environment: sandbox
[2025-10-27 16:13:36]   - Consumer Key:  SET (48 chars)
[2025-10-27 16:13:36]   - Consumer Secret:  SET (64 chars)
[2025-10-27 16:13:36]   - Business Shortcode: 174379
[2025-10-27 16:13:36]   - Callback URL: https://13a2-197-136-202-10.ngrok-free.app/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-27 16:13:36] Generating access token...
[2025-10-27 16:13:36] Access token response: {
            "access_token": "pfATdSYnW0ctZ9dypPESgXGqRIqS",
            "expires_in": "3599"
        }
        
[2025-10-27 16:13:36] Access token generated successfully: pfATdSYnW0...
[2025-10-27 18:13:36] Using system callback URL: https://71f03f4e8463.ngrok-free.app/SAAS/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-27 18:13:36] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-27 18:13:36] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5MDkwNDlhNmQ2MzY0NTk0NTA1ODNhMDdhZWY3MWNlNDI3ZjY5YTZlNzJmYzgzYjFlOWJkODFkYTQyODI5MmJhMTIwMjUxMDI3MTgxMzM2",
    "Timestamp": "20251027181336",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 11,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/71f03f4e8463.ngrok-free.app\/SAAS\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for Konnect"
}
[2025-10-27 18:13:36] Sending STK Push request
[2025-10-27 18:13:38] STK Push response: {
                    "requestId":"c2d4-4d4d-85f7-3cdd050f8e93522",
                    "errorCode": "500.001.1001",
                    "errorMessage": "Wrong credentials"
                }
            
[2025-10-27 18:13:38] HTTP status code: 500
[2025-10-27 18:13:38] Request took 1.87032 seconds
[2025-10-27 18:13:38] Response data: stdClass Object
(
    [requestId] => c2d4-4d4d-85f7-3cdd050f8e93522
    [errorCode] => 500.001.1001
    [errorMessage] => Wrong credentials
)

[2025-10-27 18:13:38] STK Push failed: Wrong credentials
[2025-10-27 16:13:56] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-27 16:13:56] POST data: Array
(
    [reseller_id] => 17
    [router_id] => 19
    [package_name] => Konnect
    [package_price] => 11.00
    [package_id] => 30
    [payment_gateway] => till
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-27 16:13:56] Form data received: {"resellerId":17,"packageName":"Konnect","packagePrice":"11.00","mpesaNumber":"254114669532","packageId":30,"routerId":19}
[2025-10-27 16:13:56] Formatted phone number: 254114669532
[2025-10-27 16:13:56] Validated amount: 11
[2025-10-27 16:13:56] M-Pesa Credentials Retrieved:
[2025-10-27 16:13:56]   - Payment Gateway: till
[2025-10-27 16:13:56]   - Environment: sandbox
[2025-10-27 16:13:56]   - Consumer Key:  SET (48 chars)
[2025-10-27 16:13:56]   - Consumer Secret:  SET (64 chars)
[2025-10-27 16:13:56]   - Business Shortcode: 174379
[2025-10-27 16:13:56]   - Callback URL: https://13a2-197-136-202-10.ngrok-free.app/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-27 16:13:56] Generating access token...
[2025-10-27 16:13:57] Access token response: {
            "access_token": "D3tXRp46pGI3NuKvfB6YJx2v4F6C",
            "expires_in": "3599"
        }
        
[2025-10-27 16:13:57] Access token generated successfully: D3tXRp46pG...
[2025-10-27 18:13:57] Using system callback URL: https://71f03f4e8463.ngrok-free.app/SAAS/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-27 18:13:57] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-27 18:13:57] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5MDkwNDlhNmQ2MzY0NTk0NTA1ODNhMDdhZWY3MWNlNDI3ZjY5YTZlNzJmYzgzYjFlOWJkODFkYTQyODI5MmJhMTIwMjUxMDI3MTgxMzU3",
    "Timestamp": "20251027181357",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 11,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/71f03f4e8463.ngrok-free.app\/SAAS\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for Konnect"
}
[2025-10-27 18:13:57] Sending STK Push request
[2025-10-27 18:13:58] STK Push response: {
                    "requestId":"c2d4-4d4d-85f7-3cdd050f8e93527",
                    "errorCode": "500.001.1001",
                    "errorMessage": "Wrong credentials"
                }
            
[2025-10-27 18:13:58] HTTP status code: 500
[2025-10-27 18:13:58] Request took 1.353225 seconds
[2025-10-27 18:13:58] Response data: stdClass Object
(
    [requestId] => c2d4-4d4d-85f7-3cdd050f8e93527
    [errorCode] => 500.001.1001
    [errorMessage] => Wrong credentials
)

[2025-10-27 18:13:58] STK Push failed: Wrong credentials
[2025-10-27 16:14:28] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-27 16:14:28] POST data: Array
(
    [reseller_id] => 23
    [router_id] => 26
    [package_name] => 2HR Qtro Konnect
    [package_price] => 10.00
    [package_id] => 40
    [payment_gateway] => phone
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-27 16:14:28] Form data received: {"resellerId":23,"packageName":"2HR Qtro Konnect","packagePrice":"10.00","mpesaNumber":"254114669532","packageId":40,"routerId":26}
[2025-10-27 16:14:28] Formatted phone number: 254114669532
[2025-10-27 16:14:28] Validated amount: 10
[2025-10-27 16:14:28] M-Pesa Credentials Retrieved:
[2025-10-27 16:14:28]   - Payment Gateway: phone
[2025-10-27 16:14:28]   - Environment: sandbox
[2025-10-27 16:14:28]   - Consumer Key:  SET (48 chars)
[2025-10-27 16:14:28]   - Consumer Secret:  SET (64 chars)
[2025-10-27 16:14:28]   - Business Shortcode: 174379
[2025-10-27 16:14:28]   - Callback URL: https://71f03f4e8463.ngrok-free.app/SAAS/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-27 16:14:28] Generating access token...
[2025-10-27 16:14:28] Access token response: {
            "access_token": "wj7Q8pn8uKCVyUAGkdsJsDtRDUqv",
            "expires_in": "3599"
        }
        
[2025-10-27 16:14:28] Access token generated successfully: wj7Q8pn8uK...
[2025-10-27 18:14:28] Using system callback URL: https://71f03f4e8463.ngrok-free.app/SAAS/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-27 18:14:28] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-27 18:14:28] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUxMDI3MTgxNDI4",
    "Timestamp": "20251027181428",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 10,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/71f03f4e8463.ngrok-free.app\/SAAS\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for 2HR Qtro Konnect"
}
[2025-10-27 18:14:28] Sending STK Push request
[2025-10-27 18:14:31] STK Push response: {
            "MerchantRequestID":"7c3d-4f82-8024-bb5eed41cb1112634",
            "CheckoutRequestID":"ws_CO_27102025181431927114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-10-27 18:14:31] HTTP status code: 200
[2025-10-27 18:14:31] Request took 2.157728 seconds
[2025-10-27 18:14:31] Response data: stdClass Object
(
    [MerchantRequestID] => 7c3d-4f82-8024-bb5eed41cb1112634
    [CheckoutRequestID] => ws_CO_27102025181431927114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-10-27 18:14:31] STK Push successful! CheckoutRequestID: ws_CO_27102025181431927114669532
[2025-10-27 18:14:31] MerchantRequestID: 7c3d-4f82-8024-bb5eed41cb1112634
[2025-10-27 18:14:31]  Transaction saved to database with ID: 140 | CheckoutRequestID: ws_CO_27102025181431927114669532
[2025-10-27 18:14:31] Sending successful response to client
[2025-10-27 16:18:45] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-27 16:18:45] POST data: Array
(
    [reseller_id] => 23
    [router_id] => 26
    [package_name] => 2HR Qtro Konnect
    [package_price] => 10.00
    [package_id] => 40
    [payment_gateway] => phone
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-27 16:18:45] Form data received: {"resellerId":23,"packageName":"2HR Qtro Konnect","packagePrice":"10.00","mpesaNumber":"254114669532","packageId":40,"routerId":26}
[2025-10-27 16:18:45] Formatted phone number: 254114669532
[2025-10-27 16:18:45] Validated amount: 10
[2025-10-27 16:18:45] M-Pesa Credentials Retrieved:
[2025-10-27 16:18:45]   - Payment Gateway: phone
[2025-10-27 16:18:45]   - Environment: sandbox
[2025-10-27 16:18:45]   - Consumer Key:  SET (48 chars)
[2025-10-27 16:18:45]   - Consumer Secret:  SET (64 chars)
[2025-10-27 16:18:45]   - Business Shortcode: 174379
[2025-10-27 16:18:45]   - Callback URL: https://7d2fcfdeb690.ngrok-free.app/SAAS/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-27 16:18:45] Generating access token...
[2025-10-27 16:18:56] Access token response: 
[2025-10-27 16:18:56] Curl error: Could not resolve host: sandbox.safaricom.co.ke
[2025-10-27 16:19:05] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-27 16:19:05] POST data: Array
(
    [reseller_id] => 23
    [router_id] => 26
    [package_name] => 2HR Qtro Konnect
    [package_price] => 10.00
    [package_id] => 40
    [payment_gateway] => phone
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-27 16:19:05] Form data received: {"resellerId":23,"packageName":"2HR Qtro Konnect","packagePrice":"10.00","mpesaNumber":"254114669532","packageId":40,"routerId":26}
[2025-10-27 16:19:05] Formatted phone number: 254114669532
[2025-10-27 16:19:05] Validated amount: 10
[2025-10-27 16:19:05] M-Pesa Credentials Retrieved:
[2025-10-27 16:19:05]   - Payment Gateway: phone
[2025-10-27 16:19:05]   - Environment: sandbox
[2025-10-27 16:19:05]   - Consumer Key:  SET (48 chars)
[2025-10-27 16:19:05]   - Consumer Secret:  SET (64 chars)
[2025-10-27 16:19:05]   - Business Shortcode: 174379
[2025-10-27 16:19:05]   - Callback URL: https://7d2fcfdeb690.ngrok-free.app/SAAS/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-27 16:19:05] Generating access token...
[2025-10-27 16:19:17] Access token response: 
[2025-10-27 16:19:17] Curl error: Could not resolve host: sandbox.safaricom.co.ke
[2025-10-27 16:19:37] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-27 16:19:37] POST data: Array
(
    [reseller_id] => 23
    [router_id] => 26
    [package_name] => 2HR Qtro Konnect
    [package_price] => 10.00
    [package_id] => 40
    [payment_gateway] => phone
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-27 16:19:37] Form data received: {"resellerId":23,"packageName":"2HR Qtro Konnect","packagePrice":"10.00","mpesaNumber":"254114669532","packageId":40,"routerId":26}
[2025-10-27 16:19:37] Formatted phone number: 254114669532
[2025-10-27 16:19:37] Validated amount: 10
[2025-10-27 16:19:37] M-Pesa Credentials Retrieved:
[2025-10-27 16:19:37]   - Payment Gateway: phone
[2025-10-27 16:19:37]   - Environment: sandbox
[2025-10-27 16:19:37]   - Consumer Key:  SET (48 chars)
[2025-10-27 16:19:37]   - Consumer Secret:  SET (64 chars)
[2025-10-27 16:19:37]   - Business Shortcode: 174379
[2025-10-27 16:19:37]   - Callback URL: https://7d2fcfdeb690.ngrok-free.app/SAAS/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-27 16:19:37] Generating access token...
[2025-10-27 16:19:49] Access token response: 
[2025-10-27 16:19:49] Curl error: Could not resolve host: sandbox.safaricom.co.ke
[2025-10-27 16:22:32] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-27 16:22:32] POST data: Array
(
    [reseller_id] => 23
    [router_id] => 26
    [package_name] => 2HR Qtro Konnect
    [package_price] => 10.00
    [package_id] => 40
    [payment_gateway] => phone
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-27 16:22:32] Form data received: {"resellerId":23,"packageName":"2HR Qtro Konnect","packagePrice":"10.00","mpesaNumber":"254114669532","packageId":40,"routerId":26}
[2025-10-27 16:22:32] Formatted phone number: 254114669532
[2025-10-27 16:22:32] Validated amount: 10
[2025-10-27 16:22:32] M-Pesa Credentials Retrieved:
[2025-10-27 16:22:32]   - Payment Gateway: phone
[2025-10-27 16:22:32]   - Environment: sandbox
[2025-10-27 16:22:32]   - Consumer Key:  SET (48 chars)
[2025-10-27 16:22:32]   - Consumer Secret:  SET (64 chars)
[2025-10-27 16:22:32]   - Business Shortcode: 174379
[2025-10-27 16:22:32]   - Callback URL: https://7d2fcfdeb690.ngrok-free.app/SAAS/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-27 16:22:32] Generating access token...
[2025-10-27 16:22:33] Access token response: {
            "access_token": "DviChXNfQJgKDnA7BmzXKbJsmqpA",
            "expires_in": "3599"
        }
        
[2025-10-27 16:22:33] Access token generated successfully: DviChXNfQJ...
[2025-10-27 18:22:33] Using system callback URL: https://7d2fcfdeb690.ngrok-free.app/SAAS/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-27 18:22:33] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-27 18:22:33] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUxMDI3MTgyMjMz",
    "Timestamp": "20251027182233",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 10,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/7d2fcfdeb690.ngrok-free.app\/SAAS\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for 2HR Qtro Konnect"
}
[2025-10-27 18:22:33] Sending STK Push request
[2025-10-27 18:22:34] STK Push response: {
            "MerchantRequestID":"7c3d-4f82-8024-bb5eed41cb1112758",
            "CheckoutRequestID":"ws_CO_27102025182235822114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-10-27 18:22:34] HTTP status code: 200
[2025-10-27 18:22:34] Request took 1.072619 seconds
[2025-10-27 18:22:34] Response data: stdClass Object
(
    [MerchantRequestID] => 7c3d-4f82-8024-bb5eed41cb1112758
    [CheckoutRequestID] => ws_CO_27102025182235822114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-10-27 18:22:34] STK Push successful! CheckoutRequestID: ws_CO_27102025182235822114669532
[2025-10-27 18:22:34] MerchantRequestID: 7c3d-4f82-8024-bb5eed41cb1112758
[2025-10-27 18:22:34]  Transaction saved to database with ID: 141 | CheckoutRequestID: ws_CO_27102025182235822114669532
[2025-10-27 18:22:34] Sending successful response to client
[2025-10-27 16:24:09] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-27 16:24:09] POST data: Array
(
    [reseller_id] => 23
    [router_id] => 26
    [package_name] => 2HR Qtro Konnect
    [package_price] => 10.00
    [package_id] => 40
    [payment_gateway] => phone
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-27 16:24:09] Form data received: {"resellerId":23,"packageName":"2HR Qtro Konnect","packagePrice":"10.00","mpesaNumber":"254114669532","packageId":40,"routerId":26}
[2025-10-27 16:24:09] Formatted phone number: 254114669532
[2025-10-27 16:24:09] Validated amount: 10
[2025-10-27 16:24:09] M-Pesa Credentials Retrieved:
[2025-10-27 16:24:09]   - Payment Gateway: phone
[2025-10-27 16:24:09]   - Environment: sandbox
[2025-10-27 16:24:09]   - Consumer Key:  SET (48 chars)
[2025-10-27 16:24:09]   - Consumer Secret:  SET (64 chars)
[2025-10-27 16:24:09]   - Business Shortcode: 174379
[2025-10-27 16:24:09]   - Callback URL: https://7d2fcfdeb690.ngrok-free.app/SAAS/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-27 16:24:09] Generating access token...
[2025-10-27 16:24:10] Access token response: {
            "access_token": "9IWgyUGGlXjmgGkkRvoh1KYEolGm",
            "expires_in": "3599"
        }
        
[2025-10-27 16:24:10] Access token generated successfully: 9IWgyUGGlX...
[2025-10-27 18:24:10] Using system callback URL: https://7d2fcfdeb690.ngrok-free.app/SAAS/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-27 18:24:10] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-27 18:24:10] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUxMDI3MTgyNDEw",
    "Timestamp": "20251027182410",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 10,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/7d2fcfdeb690.ngrok-free.app\/SAAS\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for 2HR Qtro Konnect"
}
[2025-10-27 18:24:10] Sending STK Push request
[2025-10-27 18:24:11] STK Push response: {
            "MerchantRequestID":"c2d4-4d4d-85f7-3cdd050f8e93677",
            "CheckoutRequestID":"ws_CO_27102025182412995114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-10-27 18:24:11] HTTP status code: 200
[2025-10-27 18:24:11] Request took 1.085406 seconds
[2025-10-27 18:24:11] Response data: stdClass Object
(
    [MerchantRequestID] => c2d4-4d4d-85f7-3cdd050f8e93677
    [CheckoutRequestID] => ws_CO_27102025182412995114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-10-27 18:24:11] STK Push successful! CheckoutRequestID: ws_CO_27102025182412995114669532
[2025-10-27 18:24:11] MerchantRequestID: c2d4-4d4d-85f7-3cdd050f8e93677
[2025-10-27 18:24:11]  Transaction saved to database with ID: 142 | CheckoutRequestID: ws_CO_27102025182412995114669532
[2025-10-27 18:24:11] Sending successful response to client
[2025-10-27 16:25:41] ======= NEW PAYMENT PROCESS STARTED =======
[2025-10-27 16:25:41] POST data: Array
(
    [reseller_id] => 23
    [router_id] => 26
    [package_name] => 2HR Qtro Konnect
    [package_price] => 10.00
    [package_id] => 40
    [payment_gateway] => phone
    [mpesa_number] => 254114669532
    [paystack_email] => 
)

[2025-10-27 16:25:41] Form data received: {"resellerId":23,"packageName":"2HR Qtro Konnect","packagePrice":"10.00","mpesaNumber":"254114669532","packageId":40,"routerId":26}
[2025-10-27 16:25:41] Formatted phone number: 254114669532
[2025-10-27 16:25:41] Validated amount: 10
[2025-10-27 16:25:41] M-Pesa Credentials Retrieved:
[2025-10-27 16:25:41]   - Payment Gateway: phone
[2025-10-27 16:25:41]   - Environment: sandbox
[2025-10-27 16:25:41]   - Consumer Key:  SET (48 chars)
[2025-10-27 16:25:41]   - Consumer Secret:  SET (64 chars)
[2025-10-27 16:25:41]   - Business Shortcode: 174379
[2025-10-27 16:25:41]   - Callback URL: https://7d2fcfdeb690.ngrok-free.app/SAAS/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-27 16:25:41] Generating access token...
[2025-10-27 16:25:42] Access token response: {
            "access_token": "rAgelfk1SH5cwF6CMlgMw3uexkAj",
            "expires_in": "3599"
        }
        
[2025-10-27 16:25:42] Access token generated successfully: rAgelfk1SH...
[2025-10-27 18:25:42] Using system callback URL: https://7d2fcfdeb690.ngrok-free.app/SAAS/Wifi%20Billiling%20system/Admin/mpesa_callback.php
[2025-10-27 18:25:42] NGROK detected in callback URL - ensure this matches your active ngrok tunnel
[2025-10-27 18:25:42] STK Push payload: {
    "BusinessShortCode": "174379",
    "Password": "MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjUxMDI3MTgyNTQy",
    "Timestamp": "20251027182542",
    "TransactionType": "CustomerPayBillOnline",
    "Amount": 10,
    "PartyA": "254114669532",
    "PartyB": "174379",
    "PhoneNumber": "254114669532",
    "CallBackURL": "https:\/\/7d2fcfdeb690.ngrok-free.app\/SAAS\/Wifi%20Billiling%20system\/Admin\/mpesa_callback.php",
    "AccountReference": "Qtro Technologies",
    "TransactionDesc": "Payment for 2HR Qtro Konnect"
}
[2025-10-27 18:25:42] Sending STK Push request
[2025-10-27 18:25:43] STK Push response: {
            "MerchantRequestID":"7c3d-4f82-8024-bb5eed41cb1112818",
            "CheckoutRequestID":"ws_CO_27102025182544742114669532",
            "ResponseCode": "0",
            "ResponseDescription":"Success. Request accepted for processing",
            "CustomerMessage":"Success. Request accepted for processing"
        }
        
[2025-10-27 18:25:43] HTTP status code: 200
[2025-10-27 18:25:43] Request took 1.112758 seconds
[2025-10-27 18:25:43] Response data: stdClass Object
(
    [MerchantRequestID] => 7c3d-4f82-8024-bb5eed41cb1112818
    [CheckoutRequestID] => ws_CO_27102025182544742114669532
    [ResponseCode] => 0
    [ResponseDescription] => Success. Request accepted for processing
    [CustomerMessage] => Success. Request accepted for processing
)

[2025-10-27 18:25:43] STK Push successful! CheckoutRequestID: ws_CO_27102025182544742114669532
[2025-10-27 18:25:43] MerchantRequestID: 7c3d-4f82-8024-bb5eed41cb1112818
[2025-10-27 18:25:43]  Transaction saved to database with ID: 143 | CheckoutRequestID: ws_CO_27102025182544742114669532
[2025-10-27 18:25:43] Sending successful response to client
